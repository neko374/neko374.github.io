var Ui=Object.defineProperty;var ji=(bt,u,nt)=>u in bt?Ui(bt,u,{enumerable:!0,configurable:!0,writable:!0,value:nt}):bt[u]=nt;var Yt=(bt,u,nt)=>(ji(bt,typeof u!="symbol"?u+"":u,nt),nt),Te=(bt,u,nt)=>{if(!u.has(bt))throw TypeError("Cannot "+nt)};var t=(bt,u,nt)=>(Te(bt,u,"read from private field"),nt?nt.call(bt):u.get(bt)),W=(bt,u,nt)=>{if(u.has(bt))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(bt):u.set(bt,nt)},rt=(bt,u,nt,h)=>(Te(bt,u,"write to private field"),h?h.call(bt,nt):u.set(bt,nt),nt),ie=(bt,u,nt,h)=>({set _(R){rt(bt,u,R,nt)},get _(){return t(bt,u,h)}}),Q=(bt,u,nt)=>(Te(bt,u,"access private method"),nt);/* empty css             */import{_ as __unplugin_components_0}from"./header.c7c6c47e.js";/* empty css               */import{x as getAugmentedNamespace,y as getDefaultExportFromCjs,_ as _export_sfc,r as ref,z as ElTableColumn,A as ElTable,f as openBlock,g as createElementBlock,i as createVNode,m as createBaseVNode,j as withCtx,B as createCommentVNode}from"./index.f5a7a079.js";const elTable="",elCheckbox="",elTableColumn="";function commonjsRequire(bt){throw new Error('Could not dynamically require "'+bt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(u,nt){module.exports=nt()})(globalThis,()=>(()=>{var __webpack_modules__=[,(bt,u)=>{var Ut;Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.TextRenderingMode=u.RenderingIntentFlag=u.PromiseCapability=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.MAX_IMAGE_SIZE_TO_CACHE=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.BASELINE_FACTOR=u.AnnotationType=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.assert=$,u.bytesToString=Y,u.createValidAbsoluteUrl=pt,u.getModificationDate=Ft,u.getUuid=zt,u.getVerbosityLevel=_,u.info=G,u.isArrayBuffer=gt,u.isArrayEqual=yt,u.isNodeJS=void 0,u.normalizeUnicode=Xt,u.objectFromMap=ft,u.objectSize=ht,u.setVerbosityLevel=q,u.shadow=_t,u.string32=at,u.stringToBytes=dt,u.stringToPDFString=vt,u.stringToUTF8String=st,u.unreachable=x,u.utf8StringToString=tt,u.warn=D;const nt=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");u.isNodeJS=nt;const h=[1,0,0,1,0,0];u.IDENTITY_MATRIX=h;const R=[.001,0,0,.001,0,0];u.FONT_IDENTITY_MATRIX=R;const it=1e7;u.MAX_IMAGE_SIZE_TO_CACHE=it;const J=1.35;u.LINE_FACTOR=J;const ct=.35;u.LINE_DESCENT_FACTOR=ct;const B=ct/J;u.BASELINE_FACTOR=B;const T={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};u.RenderingIntentFlag=T;const p={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};u.AnnotationMode=p;const O="pdfjs_internal_editor_";u.AnnotationEditorPrefix=O;const U={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};u.AnnotationEditorType=U;const w={RESIZE:1,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};u.AnnotationEditorParamsType=w;const y={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};u.PermissionFlag=y;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};u.TextRenderingMode=v;const f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};u.ImageKind=f;const A={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};u.AnnotationType=A;const E={GROUP:"Group",REPLY:"R"};u.AnnotationReplyType=E;const k={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};u.AnnotationFlag=k;const g={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};u.AnnotationFieldFlag=g;const n={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};u.AnnotationBorderStyleType=n;const o={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};u.AnnotationActionEventType=o;const F={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};u.DocumentActionEventType=F;const b={O:"PageOpen",C:"PageClose"};u.PageActionEventType=b;const s={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=s;const l={NONE:0,BINARY:1};u.CMapCompressionType=l;const r={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};u.OPS=r;const M={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};u.PasswordResponses=M;let L=s.WARNINGS;function q(lt){Number.isInteger(lt)&&(L=lt)}function _(){return L}function G(lt){L>=s.INFOS&&console.log(`Info: ${lt}`)}function D(lt){L>=s.WARNINGS&&console.log(`Warning: ${lt}`)}function x(lt){throw new Error(lt)}function $(lt,V){lt||x(V)}function et(lt){switch(lt==null?void 0:lt.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function pt(lt,V=null,K=null){if(!lt)return null;try{if(K&&typeof lt=="string"){if(K.addDefaultProtocol&&lt.startsWith("www.")){const jt=lt.match(/\./g);(jt==null?void 0:jt.length)>=2&&(lt=`http://${lt}`)}if(K.tryConvertEncoding)try{lt=st(lt)}catch{}}const wt=V?new URL(lt,V):new URL(lt);if(et(wt))return wt}catch{}return null}function _t(lt,V,K,wt=!1){return Object.defineProperty(lt,V,{value:K,enumerable:!wt,configurable:!0,writable:!1}),K}const I=function(){function V(K,wt){this.constructor===V&&x("Cannot initialize BaseException."),this.message=K,this.name=wt}return V.prototype=new Error,V.constructor=V,V}();u.BaseException=I;class i extends I{constructor(V,K){super(V,"PasswordException"),this.code=K}}u.PasswordException=i;class e extends I{constructor(V,K){super(V,"UnknownErrorException"),this.details=K}}u.UnknownErrorException=e;class m extends I{constructor(V){super(V,"InvalidPDFException")}}u.InvalidPDFException=m;class N extends I{constructor(V){super(V,"MissingPDFException")}}u.MissingPDFException=N;class P extends I{constructor(V,K){super(V,"UnexpectedResponseException"),this.status=K}}u.UnexpectedResponseException=P;class H extends I{constructor(V){super(V,"FormatError")}}u.FormatError=H;class z extends I{constructor(V){super(V,"AbortException")}}u.AbortException=z;function Y(lt){(typeof lt!="object"||(lt==null?void 0:lt.length)===void 0)&&x("Invalid argument for bytesToString");const V=lt.length,K=8192;if(V<K)return String.fromCharCode.apply(null,lt);const wt=[];for(let jt=0;jt<V;jt+=K){const Ot=Math.min(jt+K,V),qt=lt.subarray(jt,Ot);wt.push(String.fromCharCode.apply(null,qt))}return wt.join("")}function dt(lt){typeof lt!="string"&&x("Invalid argument for stringToBytes");const V=lt.length,K=new Uint8Array(V);for(let wt=0;wt<V;++wt)K[wt]=lt.charCodeAt(wt)&255;return K}function at(lt){return String.fromCharCode(lt>>24&255,lt>>16&255,lt>>8&255,lt&255)}function ht(lt){return Object.keys(lt).length}function ft(lt){const V=Object.create(null);for(const[K,wt]of lt)V[K]=wt;return V}function Ct(){const lt=new Uint8Array(4);return lt[0]=1,new Uint32Array(lt.buffer,0,1)[0]===1}function At(){try{return new Function(""),!0}catch{return!1}}class Rt{static get isLittleEndian(){return _t(this,"isLittleEndian",Ct())}static get isEvalSupported(){return _t(this,"isEvalSupported",At())}static get isOffscreenCanvasSupported(){return _t(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?_t(this,"platform",{isWin:!1,isMac:!1}):_t(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}u.FeatureTest=Rt;const Ht=[...Array(256).keys()].map(lt=>lt.toString(16).padStart(2,"0"));class St{static makeHexColor(V,K,wt){return`#${Ht[V]}${Ht[K]}${Ht[wt]}`}static scaleMinMax(V,K){let wt;V[0]?(V[0]<0&&(wt=K[0],K[0]=K[1],K[1]=wt),K[0]*=V[0],K[1]*=V[0],V[3]<0&&(wt=K[2],K[2]=K[3],K[3]=wt),K[2]*=V[3],K[3]*=V[3]):(wt=K[0],K[0]=K[2],K[2]=wt,wt=K[1],K[1]=K[3],K[3]=wt,V[1]<0&&(wt=K[2],K[2]=K[3],K[3]=wt),K[2]*=V[1],K[3]*=V[1],V[2]<0&&(wt=K[0],K[0]=K[1],K[1]=wt),K[0]*=V[2],K[1]*=V[2]),K[0]+=V[4],K[1]+=V[4],K[2]+=V[5],K[3]+=V[5]}static transform(V,K){return[V[0]*K[0]+V[2]*K[1],V[1]*K[0]+V[3]*K[1],V[0]*K[2]+V[2]*K[3],V[1]*K[2]+V[3]*K[3],V[0]*K[4]+V[2]*K[5]+V[4],V[1]*K[4]+V[3]*K[5]+V[5]]}static applyTransform(V,K){const wt=V[0]*K[0]+V[1]*K[2]+K[4],jt=V[0]*K[1]+V[1]*K[3]+K[5];return[wt,jt]}static applyInverseTransform(V,K){const wt=K[0]*K[3]-K[1]*K[2],jt=(V[0]*K[3]-V[1]*K[2]+K[2]*K[5]-K[4]*K[3])/wt,Ot=(-V[0]*K[1]+V[1]*K[0]+K[4]*K[1]-K[5]*K[0])/wt;return[jt,Ot]}static getAxialAlignedBoundingBox(V,K){const wt=this.applyTransform(V,K),jt=this.applyTransform(V.slice(2,4),K),Ot=this.applyTransform([V[0],V[3]],K),qt=this.applyTransform([V[2],V[1]],K);return[Math.min(wt[0],jt[0],Ot[0],qt[0]),Math.min(wt[1],jt[1],Ot[1],qt[1]),Math.max(wt[0],jt[0],Ot[0],qt[0]),Math.max(wt[1],jt[1],Ot[1],qt[1])]}static inverseTransform(V){const K=V[0]*V[3]-V[1]*V[2];return[V[3]/K,-V[1]/K,-V[2]/K,V[0]/K,(V[2]*V[5]-V[4]*V[3])/K,(V[4]*V[1]-V[5]*V[0])/K]}static singularValueDecompose2dScale(V){const K=[V[0],V[2],V[1],V[3]],wt=V[0]*K[0]+V[1]*K[2],jt=V[0]*K[1]+V[1]*K[3],Ot=V[2]*K[0]+V[3]*K[2],qt=V[2]*K[1]+V[3]*K[3],Kt=(wt+qt)/2,c=Math.sqrt((wt+qt)**2-4*(wt*qt-Ot*jt))/2,X=Kt+c||1,ut=Kt-c||1;return[Math.sqrt(X),Math.sqrt(ut)]}static normalizeRect(V){const K=V.slice(0);return V[0]>V[2]&&(K[0]=V[2],K[2]=V[0]),V[1]>V[3]&&(K[1]=V[3],K[3]=V[1]),K}static intersect(V,K){const wt=Math.max(Math.min(V[0],V[2]),Math.min(K[0],K[2])),jt=Math.min(Math.max(V[0],V[2]),Math.max(K[0],K[2]));if(wt>jt)return null;const Ot=Math.max(Math.min(V[1],V[3]),Math.min(K[1],K[3])),qt=Math.min(Math.max(V[1],V[3]),Math.max(K[1],K[3]));return Ot>qt?null:[wt,Ot,jt,qt]}static bezierBoundingBox(V,K,wt,jt,Ot,qt,Kt,c){const X=[],ut=[[],[]];let ot,d,a,C,S,j,Z,mt;for(let Lt=0;Lt<2;++Lt){if(Lt===0?(d=6*V-12*wt+6*Ot,ot=-3*V+9*wt-9*Ot+3*Kt,a=3*wt-3*V):(d=6*K-12*jt+6*qt,ot=-3*K+9*jt-9*qt+3*c,a=3*jt-3*K),Math.abs(ot)<1e-12){if(Math.abs(d)<1e-12)continue;C=-a/d,0<C&&C<1&&X.push(C);continue}Z=d*d-4*a*ot,mt=Math.sqrt(Z),!(Z<0)&&(S=(-d+mt)/(2*ot),0<S&&S<1&&X.push(S),j=(-d-mt)/(2*ot),0<j&&j<1&&X.push(j))}let xt=X.length,kt;const Et=xt;for(;xt--;)C=X[xt],kt=1-C,ut[0][xt]=kt*kt*kt*V+3*kt*kt*C*wt+3*kt*C*C*Ot+C*C*C*Kt,ut[1][xt]=kt*kt*kt*K+3*kt*kt*C*jt+3*kt*C*C*qt+C*C*C*c;return ut[0][Et]=V,ut[1][Et]=K,ut[0][Et+1]=Kt,ut[1][Et+1]=c,ut[0].length=ut[1].length=Et+2,[Math.min(...ut[0]),Math.min(...ut[1]),Math.max(...ut[0]),Math.max(...ut[1])]}}u.Util=St;const Nt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function vt(lt){if(lt[0]>="\xEF"){let K;if(lt[0]==="\xFE"&&lt[1]==="\xFF"?K="utf-16be":lt[0]==="\xFF"&&lt[1]==="\xFE"?K="utf-16le":lt[0]==="\xEF"&&lt[1]==="\xBB"&&lt[2]==="\xBF"&&(K="utf-8"),K)try{const wt=new TextDecoder(K,{fatal:!0}),jt=dt(lt);return wt.decode(jt)}catch(wt){D(`stringToPDFString: "${wt}".`)}}const V=[];for(let K=0,wt=lt.length;K<wt;K++){const jt=Nt[lt.charCodeAt(K)];V.push(jt?String.fromCharCode(jt):lt.charAt(K))}return V.join("")}function st(lt){return decodeURIComponent(escape(lt))}function tt(lt){return unescape(encodeURIComponent(lt))}function gt(lt){return typeof lt=="object"&&(lt==null?void 0:lt.byteLength)!==void 0}function yt(lt,V){if(lt.length!==V.length)return!1;for(let K=0,wt=lt.length;K<wt;K++)if(lt[K]!==V[K])return!1;return!0}function Ft(lt=new Date){return[lt.getUTCFullYear().toString(),(lt.getUTCMonth()+1).toString().padStart(2,"0"),lt.getUTCDate().toString().padStart(2,"0"),lt.getUTCHours().toString().padStart(2,"0"),lt.getUTCMinutes().toString().padStart(2,"0"),lt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Dt{constructor(){W(this,Ut,!1);this.promise=new Promise((V,K)=>{this.resolve=wt=>{rt(this,Ut,!0),V(wt)},this.reject=wt=>{rt(this,Ut,!0),K(wt)}})}get settled(){return t(this,Ut)}}Ut=new WeakMap,u.PromiseCapability=Dt;let Wt=null,It=null;function Xt(lt){return Wt||(Wt=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,It=new Map([["\uFB05","\u017Ft"]])),lt.replaceAll(Wt,(V,K,wt)=>K?K.normalize("NFKC"):It.get(wt))}function zt(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const lt=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(lt);else for(let V=0;V<32;V++)lt[V]=Math.floor(Math.random()*255);return Y(lt)}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var bt,nt,h,R,ae,J,be,B,T,p,O,U,w,y,v,f,Pe,E,k,xe,n,o;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(b){var Dt,Wt;if(typeof b=="string"||b instanceof URL?b={url:b}:(0,_util.isArrayBuffer)(b)&&(b={data:b}),typeof b!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!b.url&&!b.data&&!b.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const s=new PDFDocumentLoadingTask,{docId:l}=s,r=b.url?getUrlProp(b.url):null,M=b.data?getDataProp(b.data):null,L=b.httpHeaders||null,q=b.withCredentials===!0,_=(Dt=b.password)!=null?Dt:null,G=b.range instanceof PDFDataRangeTransport?b.range:null,D=Number.isInteger(b.rangeChunkSize)&&b.rangeChunkSize>0?b.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let x=b.worker instanceof PDFWorker?b.worker:null;const $=b.verbosity,et=typeof b.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(b.docBaseUrl)?b.docBaseUrl:null,pt=typeof b.cMapUrl=="string"?b.cMapUrl:null,_t=b.cMapPacked!==!1,I=b.CMapReaderFactory||DefaultCMapReaderFactory,i=typeof b.standardFontDataUrl=="string"?b.standardFontDataUrl:null,e=b.StandardFontDataFactory||DefaultStandardFontDataFactory,m=b.stopAtErrors!==!0,N=Number.isInteger(b.maxImageSize)&&b.maxImageSize>-1?b.maxImageSize:-1,P=b.isEvalSupported!==!1,H=typeof b.isOffscreenCanvasSupported=="boolean"?b.isOffscreenCanvasSupported:!_util.isNodeJS,z=Number.isInteger(b.canvasMaxAreaInBytes)?b.canvasMaxAreaInBytes:-1,Y=typeof b.disableFontFace=="boolean"?b.disableFontFace:_util.isNodeJS,dt=b.fontExtraProperties===!0,at=b.enableXfa===!0,ht=b.ownerDocument||globalThis.document,ft=b.disableRange===!0,Ct=b.disableStream===!0,At=b.disableAutoFetch===!0,Rt=b.pdfBug===!0,Ht=G?G.length:(Wt=b.length)!=null?Wt:NaN,St=typeof b.useSystemFonts=="boolean"?b.useSystemFonts:!_util.isNodeJS&&!Y,Nt=typeof b.useWorkerFetch=="boolean"?b.useWorkerFetch:I===_display_utils.DOMCMapReaderFactory&&e===_display_utils.DOMStandardFontDataFactory&&pt&&i&&(0,_display_utils.isValidFetchUrl)(pt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(i,document.baseURI),vt=b.canvasFactory||new DefaultCanvasFactory({ownerDocument:ht}),st=b.filterFactory||new DefaultFilterFactory({docId:l,ownerDocument:ht}),tt=null;(0,_util.setVerbosityLevel)($);const gt={canvasFactory:vt,filterFactory:st};if(Nt||(gt.cMapReaderFactory=new I({baseUrl:pt,isCompressed:_t}),gt.standardFontDataFactory=new e({baseUrl:i})),!x){const It={verbosity:$,port:_worker_options.GlobalWorkerOptions.workerPort};x=It.port?PDFWorker.fromPort(It):new PDFWorker(It),s._worker=x}const yt={docId:l,apiVersion:"3.9.179",data:M,password:_,disableAutoFetch:At,rangeChunkSize:D,length:Ht,docBaseUrl:et,enableXfa:at,evaluatorOptions:{maxImageSize:N,disableFontFace:Y,ignoreErrors:m,isEvalSupported:P,isOffscreenCanvasSupported:H,canvasMaxAreaInBytes:z,fontExtraProperties:dt,useSystemFonts:St,cMapUrl:Nt?pt:null,standardFontDataUrl:Nt?i:null}},Ft={ignoreErrors:m,isEvalSupported:P,disableFontFace:Y,fontExtraProperties:dt,enableXfa:at,ownerDocument:ht,disableAutoFetch:At,pdfBug:Rt,styleElement:tt};return x.promise.then(function(){if(s.destroyed)throw new Error("Loading aborted");const It=_fetchDocument(x,yt),Xt=new Promise(function(zt){let Ut;G?Ut=new _transport_stream.PDFDataTransportStream({length:Ht,initialData:G.initialData,progressiveDone:G.progressiveDone,contentDispositionFilename:G.contentDispositionFilename,disableRange:ft,disableStream:Ct},G):M||(Ut=(V=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(V):(0,_display_utils.isValidFetchUrl)(V.url)?new _displayFetch_stream.PDFFetchStream(V):new _displayNetwork.PDFNetworkStream(V))({url:r,length:Ht,httpHeaders:L,withCredentials:q,rangeChunkSize:D,disableRange:ft,disableStream:Ct})),zt(Ut)});return Promise.all([It,Xt]).then(function([zt,Ut]){if(s.destroyed)throw new Error("Loading aborted");const lt=new _message_handler.MessageHandler(l,zt,x.port),V=new WorkerTransport(lt,s,Ut,Ft,gt);s._transport=V,lt.send("Ready",null)})}).catch(s._capability.reject),s}async function _fetchDocument(b,s){if(b.destroyed)throw new Error("Worker was destroyed");const l=await b.messageHandler.sendWithPromise("GetDocRequest",s,s.data?[s.data.buffer]:null);if(b.destroyed)throw new Error("Worker was destroyed");return l}function getUrlProp(b){if(b instanceof URL)return b.href;try{return new URL(b,window.location).href}catch{if(_util.isNodeJS&&typeof b=="string")return b}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(b){if(_util.isNodeJS&&typeof Buffer<"u"&&b instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(b instanceof Uint8Array&&b.byteLength===b.buffer.byteLength)return b;if(typeof b=="string")return(0,_util.stringToBytes)(b);if(typeof b=="object"&&!isNaN(b==null?void 0:b.length)||(0,_util.isArrayBuffer)(b))return new Uint8Array(b);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const u=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${ie(u,bt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var s;this.destroyed=!0,await((s=this._transport)==null?void 0:s.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=u;bt=new WeakMap,W(PDFDocumentLoadingTask,bt,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(s,l,r=!1,M=null){this.length=s,this.initialData=l,this.progressiveDone=r,this.contentDispositionFilename=M,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(s){this._rangeListeners.push(s)}addProgressListener(s){this._progressListeners.push(s)}addProgressiveReadListener(s){this._progressiveReadListeners.push(s)}addProgressiveDoneListener(s){this._progressiveDoneListeners.push(s)}onDataRange(s,l){for(const r of this._rangeListeners)r(s,l)}onDataProgress(s,l){this._readyCapability.promise.then(()=>{for(const r of this._progressListeners)r(s,l)})}onDataProgressiveRead(s){this._readyCapability.promise.then(()=>{for(const l of this._progressiveReadListeners)l(s)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const s of this._progressiveDoneListeners)s()})}transportReady(){this._readyCapability.resolve()}requestDataRange(s,l){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(s,l){this._pdfInfo=s,this._transport=l}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(s){return this._transport.getPage(s)}getPageIndex(s){return this._transport.getPageIndex(s)}getDestinations(){return this._transport.getDestinations()}getDestination(s){return this._transport.getDestination(s)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(s=!1){return this._transport.startCleanup(s||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(s,l,r,M=!1){W(this,R);W(this,J);W(this,nt,null);W(this,h,!1);this._pageIndex=s,this._pageInfo=l,this._transport=r,this._stats=M?new _display_utils.StatTimer:null,this._pdfBug=M,this.commonObjs=r.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:s,rotation:l=this.rotate,offsetX:r=0,offsetY:M=0,dontFlip:L=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:s,rotation:l,offsetX:r,offsetY:M,dontFlip:L})}getAnnotations({intent:s="display"}={}){const l=this._transport.getRenderingIntent(s);return this._transport.getAnnotations(this._pageIndex,l.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var s;return((s=this._transport._htmlForXfa)==null?void 0:s.children[this._pageIndex])||null}render({canvasContext:s,viewport:l,intent:r="display",annotationMode:M=_util.AnnotationMode.ENABLE,transform:L=null,background:q=null,optionalContentConfigPromise:_=null,annotationCanvasMap:G=null,pageColors:D=null,printAnnotationStorage:x=null}){var e,m;(e=this._stats)==null||e.time("Overall");const $=this._transport.getRenderingIntent(r,M,x);rt(this,h,!1),Q(this,J,be).call(this),_||(_=this._transport.getOptionalContentConfig());let et=this._intentStates.get($.cacheKey);et||(et=Object.create(null),this._intentStates.set($.cacheKey,et)),et.streamReaderCancelTimeout&&(clearTimeout(et.streamReaderCancelTimeout),et.streamReaderCancelTimeout=null);const pt=!!($.renderingIntent&_util.RenderingIntentFlag.PRINT);et.displayReadyCapability||(et.displayReadyCapability=new _util.PromiseCapability,et.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(m=this._stats)==null||m.time("Page Request"),this._pumpOperatorList($));const _t=N=>{var P,H;et.renderTasks.delete(I),(this._maybeCleanupAfterRender||pt)&&rt(this,h,!0),Q(this,R,ae).call(this,!pt),N?(I.capability.reject(N),this._abortOperatorList({intentState:et,reason:N instanceof Error?N:new Error(N)})):I.capability.resolve(),(P=this._stats)==null||P.timeEnd("Rendering"),(H=this._stats)==null||H.timeEnd("Overall")},I=new InternalRenderTask({callback:_t,params:{canvasContext:s,viewport:l,transform:L,background:q},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:G,operatorList:et.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!pt,pdfBug:this._pdfBug,pageColors:D});(et.renderTasks||(et.renderTasks=new Set)).add(I);const i=I.task;return Promise.all([et.displayReadyCapability.promise,_]).then(([N,P])=>{var H;if(this.destroyed){_t();return}(H=this._stats)==null||H.time("Rendering"),I.initializeGraphics({transparency:N,optionalContentConfig:P}),I.operatorListChanged()}).catch(_t),i}getOperatorList({intent:s="display",annotationMode:l=_util.AnnotationMode.ENABLE,printAnnotationStorage:r=null}={}){var G;function M(){q.operatorList.lastChunk&&(q.opListReadCapability.resolve(q.operatorList),q.renderTasks.delete(_))}const L=this._transport.getRenderingIntent(s,l,r,!0);let q=this._intentStates.get(L.cacheKey);q||(q=Object.create(null),this._intentStates.set(L.cacheKey,q));let _;return q.opListReadCapability||(_=Object.create(null),_.operatorListChanged=M,q.opListReadCapability=new _util.PromiseCapability,(q.renderTasks||(q.renderTasks=new Set)).add(_),q.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(G=this._stats)==null||G.time("Page Request"),this._pumpOperatorList(L)),q.opListReadCapability.promise}streamTextContent({includeMarkedContent:s=!1,disableNormalization:l=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:s===!0,disableNormalization:l===!0},{highWaterMark:100,size(M){return M.items.length}})}getTextContent(s={}){if(this._transport._htmlForXfa)return this.getXfa().then(r=>_xfa_text.XfaText.textContent(r));const l=this.streamTextContent(s);return new Promise(function(r,M){function L(){q.read().then(function({value:G,done:D}){if(D){r(_);return}Object.assign(_.styles,G.styles),_.items.push(...G.items),L()},M)}const q=l.getReader(),_={items:[],styles:Object.create(null)};L()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const s=[];for(const l of this._intentStates.values())if(this._abortOperatorList({intentState:l,reason:new Error("Page was destroyed."),force:!0}),!l.opListReadCapability)for(const r of l.renderTasks)s.push(r.completed),r.cancel();return this.objs.clear(),rt(this,h,!1),Q(this,J,be).call(this),Promise.all(s)}cleanup(s=!1){rt(this,h,!0);const l=Q(this,R,ae).call(this,!1);return s&&l&&this._stats&&(this._stats=new _display_utils.StatTimer),l}_startRenderPage(s,l){var M,L;const r=this._intentStates.get(l);!r||((M=this._stats)==null||M.timeEnd("Page Request"),(L=r.displayReadyCapability)==null||L.resolve(s))}_renderPageChunk(s,l){for(let r=0,M=s.length;r<M;r++)l.operatorList.fnArray.push(s.fnArray[r]),l.operatorList.argsArray.push(s.argsArray[r]);l.operatorList.lastChunk=s.lastChunk,l.operatorList.separateAnnots=s.separateAnnots;for(const r of l.renderTasks)r.operatorListChanged();s.lastChunk&&Q(this,R,ae).call(this,!0)}_pumpOperatorList({renderingIntent:s,cacheKey:l,annotationStorageSerializable:r}){const{map:M,transfers:L}=r,_=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:s,cacheKey:l,annotationStorage:M},L).getReader(),G=this._intentStates.get(l);G.streamReader=_;const D=()=>{_.read().then(({value:x,done:$})=>{if($){G.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(x,G),D())},x=>{if(G.streamReader=null,!this._transport.destroyed){if(G.operatorList){G.operatorList.lastChunk=!0;for(const $ of G.renderTasks)$.operatorListChanged();Q(this,R,ae).call(this,!0)}if(G.displayReadyCapability)G.displayReadyCapability.reject(x);else if(G.opListReadCapability)G.opListReadCapability.reject(x);else throw x}})};D()}_abortOperatorList({intentState:s,reason:l,force:r=!1}){if(!!s.streamReader){if(s.streamReaderCancelTimeout&&(clearTimeout(s.streamReaderCancelTimeout),s.streamReaderCancelTimeout=null),!r){if(s.renderTasks.size>0)return;if(l instanceof _display_utils.RenderingCancelledException){let M=RENDERING_CANCELLED_TIMEOUT;l.extraDelay>0&&l.extraDelay<1e3&&(M+=l.extraDelay),s.streamReaderCancelTimeout=setTimeout(()=>{s.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:s,reason:l,force:!0})},M);return}}if(s.streamReader.cancel(new _util.AbortException(l.message)).catch(()=>{}),s.streamReader=null,!this._transport.destroyed){for(const[M,L]of this._intentStates)if(L===s){this._intentStates.delete(M);break}this.cleanup()}}}get stats(){return this._stats}}nt=new WeakMap,h=new WeakMap,R=new WeakSet,ae=function(s=!1){if(Q(this,J,be).call(this),!t(this,h)||this.destroyed)return!1;if(s)return rt(this,nt,setTimeout(()=>{rt(this,nt,null),Q(this,R,ae).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:l,operatorList:r}of this._intentStates.values())if(l.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),rt(this,h,!1),!0},J=new WeakSet,be=function(){t(this,nt)&&(clearTimeout(t(this,nt)),rt(this,nt,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){W(this,B,new Set);W(this,T,Promise.resolve())}postMessage(s,l){const r={data:structuredClone(s,l?{transfer:l}:null)};t(this,T).then(()=>{for(const M of t(this,B))M.call(this,r)})}addEventListener(s,l){t(this,B).add(l)}removeEventListener(s,l){t(this,B).delete(l)}terminate(){t(this,B).clear()}}B=new WeakMap,T=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const b=(p=document==null?void 0:document.currentScript)==null?void 0:p.src;b&&(PDFWorkerUtil.fallbackWorkerSrc=b.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(b,s){let l;try{if(l=new URL(b),!l.origin||l.origin==="null")return!1}catch{return!1}const r=new URL(s,l);return l.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(b){const s=`importScripts("${b}");`;return URL.createObjectURL(new Blob([s]))}}const _PDFWorker=class{constructor({name:b=null,port:s=null,verbosity:l=(0,_util.getVerbosityLevel)()}={}){if(s&&t(_PDFWorker,O).has(s))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=b,this.destroyed=!1,this.verbosity=l,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,s){t(_PDFWorker,O).set(s,this),this._initializeFromPort(s);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(b){this._port=b,this._messageHandler=new _message_handler.MessageHandler("main","worker",b),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:b}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,b)||(b=PDFWorkerUtil.createCDNWrapper(new URL(b,window.location).href));const s=new Worker(b),l=new _message_handler.MessageHandler("main","worker",s),r=()=>{s.removeEventListener("error",M),l.destroy(),s.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},M=()=>{this._webWorker||r()};s.addEventListener("error",M),l.on("test",q=>{if(s.removeEventListener("error",M),this.destroyed){r();return}q?(this._messageHandler=l,this._port=s,this._webWorker=s,this._readyCapability.resolve(),l.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),l.destroy(),s.terminate())}),l.on("ready",q=>{if(s.removeEventListener("error",M),this.destroyed){r();return}try{L()}catch{this._setupFakeWorker()}});const L=()=>{const q=new Uint8Array;l.send("test",q,[q.buffer])};L();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(b=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const s=new LoopbackPort;this._port=s;const l=`fake${PDFWorkerUtil.fakeWorkerId++}`,r=new _message_handler.MessageHandler(l+"_worker",l,s);b.setup(r,s);const M=new _message_handler.MessageHandler(l,l+"_worker",s);this._messageHandler=M,this._readyCapability.resolve(),M.send("configure",{verbosity:this.verbosity})}).catch(b=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${b.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),t(_PDFWorker,O).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(b){if(!(b!=null&&b.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return t(this,O).has(b.port)?t(this,O).get(b.port):new _PDFWorker(b)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var b;try{return((b=globalThis.pdfjsWorker)==null?void 0:b.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;O=new WeakMap,W(PDFWorker,O,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(s,l,r,M,L){W(this,f);W(this,U,new Map);W(this,w,new Map);W(this,y,new Map);W(this,v,null);this.messageHandler=s,this.loadingTask=l,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:M.ownerDocument,styleElement:M.styleElement}),this._params=M,this.canvasFactory=L.canvasFactory,this.filterFactory=L.filterFactory,this.cMapReaderFactory=L.cMapReaderFactory,this.standardFontDataFactory=L.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=r,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(s,l=_util.AnnotationMode.ENABLE,r=null,M=!1){let L=_util.RenderingIntentFlag.DISPLAY,q=_annotation_storage.SerializableEmpty;switch(s){case"any":L=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":L=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${s}`)}switch(l){case _util.AnnotationMode.DISABLE:L+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:L+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:L+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,q=(L&_util.RenderingIntentFlag.PRINT&&r instanceof _annotation_storage.PrintAnnotationStorage?r:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${l}`)}return M&&(L+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:L,cacheKey:`${L}_${q.hash}`,annotationStorageSerializable:q}}destroy(){var r;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(r=t(this,v))==null||r.reject(new Error("Worker was destroyed during onPassword callback"));const s=[];for(const M of t(this,w).values())s.push(M._destroy());t(this,w).clear(),t(this,y).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const l=this.messageHandler.sendWithPromise("Terminate",null);return s.push(l),Promise.all(s).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),t(this,U).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:s,loadingTask:l}=this;s.on("GetReader",(r,M)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=L=>{this._lastProgress={loaded:L.loaded,total:L.total}},M.onPull=()=>{this._fullReader.read().then(function({value:L,done:q}){if(q){M.close();return}(0,_util.assert)(L instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),M.enqueue(new Uint8Array(L),1,[L])}).catch(L=>{M.error(L)})},M.onCancel=L=>{this._fullReader.cancel(L),M.ready.catch(q=>{if(!this.destroyed)throw q})}}),s.on("ReaderHeadersReady",r=>{const M=new _util.PromiseCapability,L=this._fullReader;return L.headersReady.then(()=>{var q;(!L.isStreamingSupported||!L.isRangeSupported)&&(this._lastProgress&&((q=l.onProgress)==null||q.call(l,this._lastProgress)),L.onProgress=_=>{var G;(G=l.onProgress)==null||G.call(l,{loaded:_.loaded,total:_.total})}),M.resolve({isStreamingSupported:L.isStreamingSupported,isRangeSupported:L.isRangeSupported,contentLength:L.contentLength})},M.reject),M.promise}),s.on("GetRangeReader",(r,M)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const L=this._networkStream.getRangeReader(r.begin,r.end);if(!L){M.close();return}M.onPull=()=>{L.read().then(function({value:q,done:_}){if(_){M.close();return}(0,_util.assert)(q instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),M.enqueue(new Uint8Array(q),1,[q])}).catch(q=>{M.error(q)})},M.onCancel=q=>{L.cancel(q),M.ready.catch(_=>{if(!this.destroyed)throw _})}}),s.on("GetDoc",({pdfInfo:r})=>{this._numPages=r.numPages,this._htmlForXfa=r.htmlForXfa,delete r.htmlForXfa,l._capability.resolve(new PDFDocumentProxy(r,this))}),s.on("DocException",function(r){let M;switch(r.name){case"PasswordException":M=new _util.PasswordException(r.message,r.code);break;case"InvalidPDFException":M=new _util.InvalidPDFException(r.message);break;case"MissingPDFException":M=new _util.MissingPDFException(r.message);break;case"UnexpectedResponseException":M=new _util.UnexpectedResponseException(r.message,r.status);break;case"UnknownErrorException":M=new _util.UnknownErrorException(r.message,r.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}l._capability.reject(M)}),s.on("PasswordRequest",r=>{if(rt(this,v,new _util.PromiseCapability),l.onPassword){const M=L=>{L instanceof Error?t(this,v).reject(L):t(this,v).resolve({password:L})};try{l.onPassword(M,r.code)}catch(L){t(this,v).reject(L)}}else t(this,v).reject(new _util.PasswordException(r.message,r.code));return t(this,v).promise}),s.on("DataLoaded",r=>{var M;(M=l.onProgress)==null||M.call(l,{loaded:r.length,total:r.length}),this.downloadInfoCapability.resolve(r)}),s.on("StartRenderPage",r=>{if(this.destroyed)return;t(this,w).get(r.pageIndex)._startRenderPage(r.transparency,r.cacheKey)}),s.on("commonobj",([r,M,L])=>{var q;if(!this.destroyed&&!this.commonObjs.has(r))switch(M){case"Font":const _=this._params;if("error"in L){const x=L.error;(0,_util.warn)(`Error during font loading: ${x}`),this.commonObjs.resolve(r,x);break}const G=_.pdfBug&&((q=globalThis.FontInspector)==null?void 0:q.enabled)?(x,$)=>globalThis.FontInspector.fontAdded(x,$):null,D=new _font_loader.FontFaceObject(L,{isEvalSupported:_.isEvalSupported,disableFontFace:_.disableFontFace,ignoreErrors:_.ignoreErrors,inspectFont:G});this.fontLoader.bind(D).catch(x=>s.sendWithPromise("FontFallback",{id:r})).finally(()=>{!_.fontExtraProperties&&D.data&&(D.data=null),this.commonObjs.resolve(r,D)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,L);break;default:throw new Error(`Got unknown common object type ${M}`)}}),s.on("obj",([r,M,L,q])=>{var G;if(this.destroyed)return;const _=t(this,w).get(M);if(!_.objs.has(r))switch(L){case"Image":if(_.objs.resolve(r,q),q){let D;if(q.bitmap){const{width:x,height:$}=q;D=x*$*4}else D=((G=q.data)==null?void 0:G.length)||0;D>_util.MAX_IMAGE_SIZE_TO_CACHE&&(_._maybeCleanupAfterRender=!0)}break;case"Pattern":_.objs.resolve(r,q);break;default:throw new Error(`Got unknown object type ${L}`)}}),s.on("DocProgress",r=>{var M;this.destroyed||(M=l.onProgress)==null||M.call(l,{loaded:r.loaded,total:r.total})}),s.on("FetchBuiltInCMap",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(r):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),s.on("FetchStandardFontData",r=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(r):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var r,M;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:s,transfers:l}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:s,filename:(M=(r=this._fullReader)==null?void 0:r.filename)!=null?M:null},l).finally(()=>{this.annotationStorage.resetModified()})}getPage(s){if(!Number.isInteger(s)||s<=0||s>this._numPages)return Promise.reject(new Error("Invalid page request."));const l=s-1,r=t(this,y).get(l);if(r)return r;const M=this.messageHandler.sendWithPromise("GetPage",{pageIndex:l}).then(L=>{if(this.destroyed)throw new Error("Transport destroyed");const q=new PDFPageProxy(l,L,this,this._params.pdfBug);return t(this,w).set(l,q),q});return t(this,y).set(l,M),M}getPageIndex(s){return typeof s!="object"||s===null||!Number.isInteger(s.num)||s.num<0||!Number.isInteger(s.gen)||s.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:s.num,gen:s.gen})}getAnnotations(s,l){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:s,intent:l})}getFieldObjects(){return Q(this,f,Pe).call(this,"GetFieldObjects")}hasJSActions(){return Q(this,f,Pe).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(s){return typeof s!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:s})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(s){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:s})}getStructTree(s){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:s})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(s=>new _optional_content_config.OptionalContentConfig(s))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const s="GetMetadata",l=t(this,U).get(s);if(l)return l;const r=this.messageHandler.sendWithPromise(s,null).then(M=>{var L,q,_,G;return{info:M[0],metadata:M[1]?new _metadata.Metadata(M[1]):null,contentDispositionFilename:(q=(L=this._fullReader)==null?void 0:L.filename)!=null?q:null,contentLength:(G=(_=this._fullReader)==null?void 0:_.contentLength)!=null?G:null}});return t(this,U).set(s,r),r}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(s=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const l of t(this,w).values())if(!l.cleanup())throw new Error(`startCleanup: Page ${l.pageNumber} is currently rendering.`);this.commonObjs.clear(),s||this.fontLoader.clear(),t(this,U).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:s,enableXfa:l}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:s,enableXfa:l})}}U=new WeakMap,w=new WeakMap,y=new WeakMap,v=new WeakMap,f=new WeakSet,Pe=function(s,l=null){const r=t(this,U).get(s);if(r)return r;const M=this.messageHandler.sendWithPromise(s,l);return t(this,U).set(s,M),M};class PDFObjects{constructor(){W(this,k);W(this,E,Object.create(null))}get(s,l=null){if(l){const M=Q(this,k,xe).call(this,s);return M.capability.promise.then(()=>l(M.data)),null}const r=t(this,E)[s];if(!(r!=null&&r.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${s}.`);return r.data}has(s){const l=t(this,E)[s];return(l==null?void 0:l.capability.settled)||!1}resolve(s,l=null){const r=Q(this,k,xe).call(this,s);r.data=l,r.capability.resolve()}clear(){var s;for(const l in t(this,E)){const{data:r}=t(this,E)[l];(s=r==null?void 0:r.bitmap)==null||s.close()}rt(this,E,Object.create(null))}}E=new WeakMap,k=new WeakSet,xe=function(s){const l=t(this,E)[s];return l||(t(this,E)[s]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(s){W(this,n,null);rt(this,n,s),this.onContinue=null}get promise(){return t(this,n).capability.promise}cancel(s=0){t(this,n).cancel(null,s)}get separateAnnots(){const{separateAnnots:s}=t(this,n).operatorList;if(!s)return!1;const{annotationCanvasMap:l}=t(this,n);return s.form||s.canvas&&(l==null?void 0:l.size)>0}}n=new WeakMap,exports.RenderTask=RenderTask;const F=class{constructor({callback:s,params:l,objs:r,commonObjs:M,annotationCanvasMap:L,operatorList:q,pageIndex:_,canvasFactory:G,filterFactory:D,useRequestAnimationFrame:x=!1,pdfBug:$=!1,pageColors:et=null}){this.callback=s,this.params=l,this.objs=r,this.commonObjs=M,this.annotationCanvasMap=L,this.operatorListIdx=null,this.operatorList=q,this._pageIndex=_,this.canvasFactory=G,this.filterFactory=D,this._pdfBug=$,this.pageColors=et,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=x===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=l.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:s=!1,optionalContentConfig:l}){var _,G;if(this.cancelled)return;if(this._canvas){if(t(F,o).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");t(F,o).add(this._canvas)}this._pdfBug&&((_=globalThis.StepperManager)==null?void 0:_.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:r,viewport:M,transform:L,background:q}=this.params;this.gfx=new _canvas.CanvasGraphics(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:l},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:L,viewport:M,transparency:s,background:q}),this.operatorListIdx=0,this.graphicsReady=!0,(G=this.graphicsReadyCallback)==null||G.call(this)}cancel(s=null,l=0){var r;this.running=!1,this.cancelled=!0,(r=this.gfx)==null||r.endDrawing(),this._canvas&&t(F,o).delete(this._canvas),this.callback(s||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,l))}operatorListChanged(){var s;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(s=this.stepper)==null||s.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&t(F,o).delete(this._canvas),this.callback())))}};let InternalRenderTask=F;o=new WeakMap,W(InternalRenderTask,o,new WeakSet);const version="3.9.179";exports.version=version;const build="1ef6fbc52";exports.build=build},(bt,u,nt)=>{var T,p,O,si,w;Object.defineProperty(u,"__esModule",{value:!0}),u.SerializableEmpty=u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var h=nt(1),R=nt(4),it=nt(8);const J=Object.freeze({map:null,hash:"",transfers:void 0});u.SerializableEmpty=J;class ct{constructor(){W(this,O);W(this,T,!1);W(this,p,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,f){const A=t(this,p).get(v);return A===void 0?f:Object.assign(f,A)}getRawValue(v){return t(this,p).get(v)}remove(v){if(t(this,p).delete(v),t(this,p).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const f of t(this,p).values())if(f instanceof R.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,f){const A=t(this,p).get(v);let E=!1;if(A!==void 0)for(const[k,g]of Object.entries(f))A[k]!==g&&(E=!0,A[k]=g);else E=!0,t(this,p).set(v,f);E&&Q(this,O,si).call(this),f instanceof R.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(f.constructor._type)}has(v){return t(this,p).has(v)}getAll(){return t(this,p).size>0?(0,h.objectFromMap)(t(this,p)):null}setAll(v){for(const[f,A]of Object.entries(v))this.setValue(f,A)}get size(){return t(this,p).size}resetModified(){t(this,T)&&(rt(this,T,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new B(this)}get serializable(){if(t(this,p).size===0)return J;const v=new Map,f=new it.MurmurHash3_64,A=[],E=Object.create(null);let k=!1;for(const[g,n]of t(this,p)){const o=n instanceof R.AnnotationEditor?n.serialize(!1,E):n;o&&(v.set(g,o),f.update(`${g}:${JSON.stringify(o)}`),k||(k=!!o.bitmap))}if(k)for(const g of v.values())g.bitmap&&A.push(g.bitmap);return v.size>0?{map:v,hash:f.hexdigest(),transfers:A}:J}}T=new WeakMap,p=new WeakMap,O=new WeakSet,si=function(){t(this,T)||(rt(this,T,!0),typeof this.onSetModified=="function"&&this.onSetModified())},u.AnnotationStorage=ct;class B extends ct{constructor(f){super();W(this,w,void 0);const{map:A,hash:E,transfers:k}=f.serializable,g=structuredClone(A,k?{transfer:k}:null);rt(this,w,{map:g,hash:E,transfers:k})}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return t(this,w)}}w=new WeakMap,u.PrintAnnotationStorage=B},(bt,u,nt)=>{var ct,B,T,p,O,U,w,y,v,f,ke,E,ni,g,ri,o,ai;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var h=nt(1),R=nt(5);const b=class{constructor(l){W(this,f);W(this,E);W(this,g);W(this,o);W(this,ct,!1);W(this,B,null);W(this,T,null);W(this,p,this.focusin.bind(this));W(this,O,this.focusout.bind(this));W(this,U,!1);W(this,w,!1);W(this,y,!1);Yt(this,"_uiManager",null);W(this,v,b._zIndex++);this.constructor===b&&(0,h.unreachable)("Cannot initialize AnnotationEditor."),this.parent=l.parent,this.id=l.id,this.width=this.height=null,this.pageIndex=l.parent.pageIndex,this.name=l.name,this.div=null,this._uiManager=l.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1;const{rotation:r,rawDims:{pageWidth:M,pageHeight:L,pageX:q,pageY:_}}=this.parent.viewport;this.rotation=r,this.pageRotation=(360+r-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[M,L],this.pageTranslation=[q,_];const[G,D]=this.parentDimensions;this.x=l.x/G,this.y=l.y/D,this.isAttachedToDOM=!1,this.deleted=!1}static get _defaultLineColor(){return(0,h.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(l){const r=new J({id:l.parent.getNextId(),parent:l.parent,uiManager:l._uiManager});r.annotationElementId=l.annotationElementId,r.deleted=!0,r._uiManager.addToAnnotationStorage(r)}static initialize(l){}static updateDefaultParams(l,r){}static get defaultPropertiesToUpdate(){return[]}get propertiesToUpdate(){return[]}addCommands(l){this._uiManager.addCommands(l)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=t(this,v)}setParent(l){l!==null&&(this.pageIndex=l.pageIndex,this.pageDimensions=l.pageDimensions),this.parent=l}focusin(l){t(this,U)?rt(this,U,!1):this.parent.setSelected(this)}focusout(l){var M;if(!this.isAttachedToDOM)return;const r=l.relatedTarget;r!=null&&r.closest(`#${this.id}`)||(l.preventDefault(),(M=this.parent)!=null&&M.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(l){const r=this.parent.div.getBoundingClientRect();this.startX=l.clientX-r.x,this.startY=l.clientY-r.y,l.dataTransfer.setData("text/plain",this.id),l.dataTransfer.effectAllowed="move"}setAt(l,r,M,L){const[q,_]=this.parentDimensions;[M,L]=this.screenToPageTranslation(M,L),this.x=(l+M)/q,this.y=(r+L)/_,this.fixAndSetPosition()}translate(l,r){Q(this,f,ke).call(this,this.parentDimensions,l,r)}translateInPage(l,r){Q(this,f,ke).call(this,this.pageDimensions,l,r),this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[l,r]=this.pageDimensions;let{x:M,y:L,width:q,height:_}=this;switch(q*=l,_*=r,M*=l,L*=r,this.rotation){case 0:M=Math.max(0,Math.min(l-q,M)),L=Math.max(0,Math.min(r-_,L));break;case 90:M=Math.max(0,Math.min(l-_,M)),L=Math.min(r,Math.max(q,L));break;case 180:M=Math.min(l,Math.max(q,M)),L=Math.min(r,Math.max(_,L));break;case 270:M=Math.min(l,Math.max(_,M)),L=Math.max(0,Math.min(r-q,L));break}this.x=M/l,this.y=L/r,this.div.style.left=`${(100*this.x).toFixed(2)}%`,this.div.style.top=`${(100*this.y).toFixed(2)}%`}screenToPageTranslation(l,r){switch(this.parentRotation){case 90:return[r,-l];case 180:return[-l,-r];case 270:return[-r,l];default:return[l,r]}}pageTranslationToScreen(l,r){switch(this.parentRotation){case 90:return[-r,l];case 180:return[-l,-r];case 270:return[r,-l];default:return[l,r]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:l}=this._uiManager.viewParameters,[r,M]=this.pageDimensions;return[r*l,M*l]}setDims(l,r){const[M,L]=this.parentDimensions;this.div.style.width=`${(100*l/M).toFixed(2)}%`,t(this,ct)||(this.div.style.height=`${(100*r/L).toFixed(2)}%`)}fixDims(){const{style:l}=this.div,{height:r,width:M}=l,L=M.endsWith("%"),q=!t(this,ct)&&r.endsWith("%");if(L&&q)return;const[_,G]=this.parentDimensions;L||(l.width=`${(100*parseFloat(M)/_).toFixed(2)}%`),!t(this,ct)&&!q&&(l.height=`${(100*parseFloat(r)/G).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",t(this,p)),this.div.addEventListener("focusout",t(this,O));const[l,r]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*r/l).toFixed(2)}%`,this.div.style.maxHeight=`${(100*l/r).toFixed(2)}%`);const[M,L]=this.getInitialTranslation();return this.translate(M,L),(0,R.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(l){const{isMac:r}=h.FeatureTest.platform;if(l.button!==0||l.ctrlKey&&r){l.preventDefault();return}l.ctrlKey&&!r||l.shiftKey||l.metaKey&&r?this.parent.toggleSelected(this):this.parent.setSelected(this),rt(this,U,!0)}getRect(l,r){const M=this.parentScale,[L,q]=this.pageDimensions,[_,G]=this.pageTranslation,D=l/M,x=r/M,$=this.x*L,et=this.y*q,pt=this.width*L,_t=this.height*q;switch(this.rotation){case 0:return[$+D+_,q-et-x-_t+G,$+D+pt+_,q-et-x+G];case 90:return[$+x+_,q-et+D+G,$+x+_t+_,q-et+D+pt+G];case 180:return[$-D-pt+_,q-et+x+G,$-D+_,q-et+x+_t+G];case 270:return[$-x-_t+_,q-et-D-pt+G,$-x+_,q-et-D+G];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(l,r){const[M,L,q,_]=l,G=q-M,D=_-L;switch(this.rotation){case 0:return[M,r-_,G,D];case 90:return[M,r-L,D,G];case 180:return[q,r-L,G,D];case 270:return[q,r-_,D,G];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){rt(this,y,!0)}disableEditMode(){rt(this,y,!1)}isInEditMode(){return t(this,y)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var l,r;(l=this.div)==null||l.addEventListener("focusin",t(this,p)),(r=this.div)==null||r.addEventListener("focusout",t(this,O))}serialize(l=!1,r=null){(0,h.unreachable)("An editor must be serializable")}static deserialize(l,r,M){const L=new this.prototype.constructor({parent:r,id:r.getNextId(),uiManager:M});L.rotation=l.rotation;const[q,_]=L.pageDimensions,[G,D,x,$]=L.getRectInCurrentCoords(l.rect,_);return L.x=G/q,L.y=D/_,L.width=x/q,L.height=$/_,L}remove(){this.div.removeEventListener("focusin",t(this,p)),this.div.removeEventListener("focusout",t(this,O)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Q(this,E,ni).call(this),t(this,B).classList.remove("hidden"))}select(){var l;this.makeResizable(),(l=this.div)==null||l.classList.add("selectedEditor")}unselect(){var l,r,M;(l=t(this,B))==null||l.classList.add("hidden"),(r=this.div)==null||r.classList.remove("selectedEditor"),(M=this.div)!=null&&M.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(l,r){}disableEditing(){}enableEditing(){}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return t(this,w)}set isEditing(l){rt(this,w,l),this.parent&&(l?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(l,r){rt(this,ct,!0);const M=l/r,{style:L}=this.div;L.aspectRatio=M,L.height="auto"}static get MIN_SIZE(){return 16}};let it=b;ct=new WeakMap,B=new WeakMap,T=new WeakMap,p=new WeakMap,O=new WeakMap,U=new WeakMap,w=new WeakMap,y=new WeakMap,v=new WeakMap,f=new WeakSet,ke=function([l,r],M,L){[M,L]=this.screenToPageTranslation(M,L),this.x+=M/l,this.y+=L/r,this.fixAndSetPosition()},E=new WeakSet,ni=function(){if(t(this,B))return;rt(this,B,document.createElement("div")),t(this,B).classList.add("resizers");const l=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||l.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const r of l){const M=document.createElement("div");t(this,B).append(M),M.classList.add("resizer",r),M.addEventListener("pointerdown",Q(this,g,ri).bind(this,r))}this.div.prepend(t(this,B))},g=new WeakSet,ri=function(l,r){r.preventDefault(),rt(this,T,[r.clientX,r.clientY]);const M=Q(this,o,ai).bind(this,l),L=this.div.draggable;this.div.draggable=!1;const q=`resizing${l.charAt(0).toUpperCase()}${l.slice(1)}`;this.parent.div.classList.add(q);const _={passive:!0,capture:!0};window.addEventListener("pointermove",M,_);const G=()=>{this._uiManager.stopUndoAccumulation(),this.div.draggable=L,this.parent.div.classList.remove(q),window.removeEventListener("pointermove",M,_)};window.addEventListener("pointerup",G,{once:!0})},o=new WeakSet,ai=function(l,r){const{clientX:M,clientY:L}=r,q=M-t(this,T)[0],_=L-t(this,T)[1];t(this,T)[0]=M,t(this,T)[1]=L;const[G,D]=this.parentDimensions,x=this.x,$=this.y,et=this.width,pt=this.height,_t=b.MIN_SIZE/G,I=b.MIN_SIZE/D;let i;const e=P=>Math.round(P*1e4)/1e4,m=(P,H)=>{const[z,Y]=this.parentDimensions;this.setDims(z*P,Y*H),this.fixAndSetPosition()},N=()=>{this.width=et,this.height=pt,this.x=x,this.y=$,m(et,pt)};switch(l){case"topLeft":{if(Math.sign(q)*Math.sign(_)<0)return;const P=Math.hypot(q,_),H=Math.hypot(et*G,pt*D),z=e(x+et),Y=e($+pt),dt=Math.max(Math.min(1-Math.sign(q)*(P/H),1/et,1/pt),_t/et,I/pt),at=e(et*dt),ht=e(pt*dt),ft=z-at,Ct=Y-ht;i=()=>{this.width=at,this.height=ht,this.x=ft,this.y=Ct,m(at,ht)};break}case"topMiddle":{const P=e(this.y+pt),H=e(Math.max(I,Math.min(1,pt-_/D))),z=P-H;i=()=>{this.height=H,this.y=z,m(et,H)};break}case"topRight":{if(Math.sign(q)*Math.sign(_)>0)return;const P=Math.hypot(q,_),H=Math.hypot(this.width*G,this.height*D),z=e($+this.height),Y=Math.max(Math.min(1+Math.sign(q)*(P/H),1/et,1/pt),_t/et,I/pt),dt=e(et*Y),at=e(pt*Y),ht=z-at;i=()=>{this.width=dt,this.height=at,this.y=ht,m(dt,at)};break}case"middleRight":{const P=e(Math.max(_t,Math.min(1,et+q/G)));i=()=>{this.width=P,m(P,pt)};break}case"bottomRight":{if(Math.sign(q)*Math.sign(_)<0)return;const P=Math.hypot(q,_),H=Math.hypot(this.width*G,this.height*D),z=Math.max(Math.min(1+Math.sign(q)*(P/H),1/et,1/pt),_t/et,I/pt),Y=e(et*z),dt=e(pt*z);i=()=>{this.width=Y,this.height=dt,m(Y,dt)};break}case"bottomMiddle":{const P=e(Math.max(I,Math.min(1,pt+_/D)));i=()=>{this.height=P,m(et,P)};break}case"bottomLeft":{if(Math.sign(q)*Math.sign(_)>0)return;const P=Math.hypot(q,_),H=Math.hypot(this.width*G,this.height*D),z=e(x+this.width),Y=Math.max(Math.min(1-Math.sign(q)*(P/H),1/et,1/pt),_t/et,I/pt),dt=e(et*Y),at=e(pt*Y),ht=z-dt;i=()=>{this.width=dt,this.height=at,this.x=ht,m(dt,at)};break}case"middleLeft":{const P=e(x+et),H=e(Math.max(_t,Math.min(1,et-q/G))),z=P-H;i=()=>{this.width=H,this.x=z,m(H,pt)};break}}this.addCommands({cmd:i,undo:N,mustExec:!0,type:h.AnnotationEditorParamsType.RESIZE,overwriteIfSameType:!0,keepUndo:!0})},Yt(it,"_colorManager",new R.ColorManager),Yt(it,"_zIndex",1),u.AnnotationEditor=it;class J extends it{constructor(l){super(l),this.annotationElementId=l.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(bt,u,nt)=>{var w,y,v,f,A,Fe,k,g,n,o,F,oi,l,r,M,L,q,_,G,D,x,$,et,pt,_t,I,i,e,m,N,P,H,z,Y,dt,at,ht,ft,Ct,At,Rt,li,St,Re,vt,ci,tt,hi,yt,ee,Dt,de,It,di,zt,ui,lt,Me,K,ue,jt,De;Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=it,u.opacityToHex=J;var h=nt(1),R=nt(6);function it(Kt,c,X){for(const ut of X)c.addEventListener(ut,Kt[ut].bind(Kt))}function J(Kt){return Math.round(Math.min(255,Math.max(1,255*Kt))).toString(16).padStart(2,"0")}class ct{constructor(){W(this,w,0)}getId(){return`${h.AnnotationEditorPrefix}${ie(this,w)._++}`}}w=new WeakMap;class B{constructor(){W(this,A);W(this,y,(0,h.getUuid)());W(this,v,0);W(this,f,null)}async getFromFile(c){const{lastModified:X,name:ut,size:ot,type:d}=c;return Q(this,A,Fe).call(this,`${X}_${ut}_${ot}_${d}`,c)}async getFromUrl(c){return Q(this,A,Fe).call(this,c,c)}async getFromId(c){t(this,f)||rt(this,f,new Map);const X=t(this,f).get(c);return X?X.bitmap?(X.refCounter+=1,X):X.file?this.getFromFile(X.file):this.getFromUrl(X.url):null}getSvgUrl(c){const X=t(this,f).get(c);return X!=null&&X.isSvg?X.svgUrl:null}deleteId(c){t(this,f)||rt(this,f,new Map);const X=t(this,f).get(c);!X||(X.refCounter-=1,X.refCounter===0&&(X.bitmap=null))}isValidId(c){return c.startsWith(`image_${t(this,y)}_`)}}y=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakSet,Fe=async function(c,X){t(this,f)||rt(this,f,new Map);let ut=t(this,f).get(c);if(ut===null)return null;if(ut!=null&&ut.bitmap)return ut.refCounter+=1,ut;try{ut||(ut={bitmap:null,id:`image_${t(this,y)}_${ie(this,v)._++}`,refCounter:0,isSvg:!1});let ot;if(typeof X=="string"){ut.url=X;const d=await fetch(X);if(!d.ok)throw new Error(d.statusText);ot=await d.blob()}else ot=ut.file=X;if(ot.type==="image/svg+xml"){const d=new FileReader,a=new Image,C=new Promise((S,j)=>{a.onload=()=>{ut.bitmap=a,ut.isSvg=!0,S()},d.onload=()=>{a.src=ut.svgUrl=d.result},a.onerror=d.onerror=j});d.readAsDataURL(ot),await C}else ut.bitmap=await createImageBitmap(ot);ut.refCounter=1}catch(ot){console.error(ot),ut=null}return t(this,f).set(c,ut),ut&&t(this,f).set(ut.id,ut),ut};class T{constructor(c=128){W(this,k,[]);W(this,g,!1);W(this,n,void 0);W(this,o,-1);rt(this,n,c)}add({cmd:c,undo:X,mustExec:ut,type:ot=NaN,overwriteIfSameType:d=!1,keepUndo:a=!1}){if(ut&&c(),t(this,g))return;const C={cmd:c,undo:X,type:ot};if(t(this,o)===-1){t(this,k).length>0&&(t(this,k).length=0),rt(this,o,0),t(this,k).push(C);return}if(d&&t(this,k)[t(this,o)].type===ot){a&&(C.undo=t(this,k)[t(this,o)].undo),t(this,k)[t(this,o)]=C;return}const S=t(this,o)+1;S===t(this,n)?t(this,k).splice(0,1):(rt(this,o,S),S<t(this,k).length&&t(this,k).splice(S)),t(this,k).push(C)}stopUndoAccumulation(){t(this,o)!==-1&&(t(this,k)[t(this,o)].type=NaN)}undo(){t(this,o)!==-1&&(rt(this,g,!0),t(this,k)[t(this,o)].undo(),rt(this,g,!1),rt(this,o,t(this,o)-1))}redo(){t(this,o)<t(this,k).length-1&&(rt(this,o,t(this,o)+1),rt(this,g,!0),t(this,k)[t(this,o)].cmd(),rt(this,g,!1))}hasSomethingToUndo(){return t(this,o)!==-1}hasSomethingToRedo(){return t(this,o)<t(this,k).length-1}destroy(){rt(this,k,null)}}k=new WeakMap,g=new WeakMap,n=new WeakMap,o=new WeakMap,u.CommandManager=T;class p{constructor(c){W(this,F);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:X}=h.FeatureTest.platform;for(const[ut,ot,d={}]of c)for(const a of ut){const C=a.startsWith("mac+");X&&C?(this.callbacks.set(a.slice(4),{callback:ot,options:d}),this.allKeys.add(a.split("+").at(-1))):!X&&!C&&(this.callbacks.set(a,{callback:ot,options:d}),this.allKeys.add(a.split("+").at(-1)))}}exec(c,X){if(!this.allKeys.has(X.key))return;const ut=this.callbacks.get(Q(this,F,oi).call(this,X));if(!ut)return;const{callback:ot,options:{bubbles:d=!1,args:a=[],checker:C=null}}=ut;C&&!C(c,X)||(ot.bind(c,...a)(),d||(X.stopPropagation(),X.preventDefault()))}}F=new WeakSet,oi=function(c){c.altKey&&this.buffer.push("alt"),c.ctrlKey&&this.buffer.push("ctrl"),c.metaKey&&this.buffer.push("meta"),c.shiftKey&&this.buffer.push("shift"),this.buffer.push(c.key);const X=this.buffer.join("+");return this.buffer.length=0,X},u.KeyboardManager=p;const s=class{get _colors(){const c=new Map([["CanvasText",null],["Canvas",null]]);return(0,R.getColorValues)(c),(0,h.shadow)(this,"_colors",c)}convert(c){const X=(0,R.getRGB)(c);if(!window.matchMedia("(forced-colors: active)").matches)return X;for(const[ut,ot]of this._colors)if(ot.every((d,a)=>d===X[a]))return s._colorsMapping.get(ut);return X}getHexCode(c){const X=this._colors.get(c);return X?h.Util.makeHexColor(...X):c}};let O=s;Yt(O,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),u.ColorManager=O;const qt=class{constructor(c,X,ut,ot){W(this,Rt);W(this,St);W(this,vt);W(this,tt);W(this,yt);W(this,Dt);W(this,It);W(this,zt);W(this,lt);W(this,K);W(this,jt);W(this,l,null);W(this,r,new Map);W(this,M,new Map);W(this,L,null);W(this,q,new T);W(this,_,0);W(this,G,new Set);W(this,D,null);W(this,x,new Set);W(this,$,null);W(this,et,null);W(this,pt,new ct);W(this,_t,!1);W(this,I,h.AnnotationEditorType.NONE);W(this,i,new Set);W(this,e,null);W(this,m,this.copy.bind(this));W(this,N,this.cut.bind(this));W(this,P,this.paste.bind(this));W(this,H,this.keydown.bind(this));W(this,z,this.onEditingAction.bind(this));W(this,Y,this.onPageChanging.bind(this));W(this,dt,this.onScaleChanging.bind(this));W(this,at,this.onRotationChanging.bind(this));W(this,ht,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});W(this,ft,[0,0]);W(this,Ct,null);W(this,At,null);rt(this,At,c),rt(this,$,X),t(this,$)._on("editingaction",t(this,z)),t(this,$)._on("pagechanging",t(this,Y)),t(this,$)._on("scalechanging",t(this,dt)),t(this,$)._on("rotationchanging",t(this,at)),rt(this,L,ut.annotationStorage),rt(this,et,ut.filterFactory),rt(this,e,ot),this.viewParameters={realScale:R.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const c=qt.prototype,X=d=>{const{activeElement:a}=document;return a&&t(d,At).contains(a)&&d.hasSomethingToControl()},ut=this.TRANSLATE_SMALL,ot=this.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new p([[["ctrl+a","mac+meta+a"],c.selectAll],[["ctrl+z","mac+meta+z"],c.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],c.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],c.delete],[["Escape","mac+Escape"],c.unselectAll],[["ArrowLeft","mac+ArrowLeft"],c.translateSelectedEditors,{args:[-ut,0],checker:X}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],c.translateSelectedEditors,{args:[-ot,0],checker:X}],[["ArrowRight","mac+ArrowRight"],c.translateSelectedEditors,{args:[ut,0],checker:X}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],c.translateSelectedEditors,{args:[ot,0],checker:X}],[["ArrowUp","mac+ArrowUp"],c.translateSelectedEditors,{args:[0,-ut],checker:X}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],c.translateSelectedEditors,{args:[0,-ot],checker:X}],[["ArrowDown","mac+ArrowDown"],c.translateSelectedEditors,{args:[0,ut],checker:X}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],c.translateSelectedEditors,{args:[0,ot],checker:X}]]))}destroy(){Q(this,St,Re).call(this),t(this,$)._off("editingaction",t(this,z)),t(this,$)._off("pagechanging",t(this,Y)),t(this,$)._off("scalechanging",t(this,dt)),t(this,$)._off("rotationchanging",t(this,at));for(const c of t(this,M).values())c.destroy();t(this,M).clear(),t(this,r).clear(),t(this,x).clear(),rt(this,l,null),t(this,i).clear(),t(this,q).destroy()}get hcmFilter(){return(0,h.shadow)(this,"hcmFilter",t(this,e)?t(this,et).addHCMFilter(t(this,e).foreground,t(this,e).background):"none")}onPageChanging({pageNumber:c}){rt(this,_,c-1)}focusMainContainer(){t(this,At).focus()}addShouldRescale(c){t(this,x).add(c)}removeShouldRescale(c){t(this,x).delete(c)}onScaleChanging({scale:c}){this.commitOrRemove(),this.viewParameters.realScale=c*R.PixelsPerInch.PDF_TO_CSS_UNITS;for(const X of t(this,x))X.onScaleChanging()}onRotationChanging({pagesRotation:c}){this.commitOrRemove(),this.viewParameters.rotation=c}addToAnnotationStorage(c){!c.isEmpty()&&t(this,L)&&!t(this,L).has(c.id)&&t(this,L).setValue(c.id,c)}copy(c){if(c.preventDefault(),t(this,l)&&t(this,l).commitOrRemove(),!this.hasSelection)return;const X=[];for(const ut of t(this,i)){const ot=ut.serialize(!0);ot&&X.push(ot)}X.length!==0&&c.clipboardData.setData("application/pdfjs",JSON.stringify(X))}cut(c){this.copy(c),this.delete()}paste(c){c.preventDefault();let X=c.clipboardData.getData("application/pdfjs");if(!X)return;try{X=JSON.parse(X)}catch(ot){(0,h.warn)(`paste: "${ot.message}".`);return}if(!Array.isArray(X))return;this.unselectAll();const ut=this.currentLayer;try{const ot=[];for(const C of X){const S=ut.deserialize(C);if(!S)return;ot.push(S)}const d=()=>{for(const C of ot)Q(this,lt,Me).call(this,C);Q(this,jt,De).call(this,ot)},a=()=>{for(const C of ot)C.remove()};this.addCommands({cmd:d,undo:a,mustExec:!0})}catch(ot){(0,h.warn)(`paste: "${ot.message}".`)}}keydown(c){var X;(X=this.getActive())!=null&&X.shouldGetKeyboardEvents()||qt._keyboardManager.exec(this,c)}onEditingAction(c){["undo","redo","delete","selectAll"].includes(c.name)&&this[c.name]()}setEditingState(c){c?(Q(this,Rt,li).call(this),Q(this,vt,ci).call(this),Q(this,yt,ee).call(this,{isEditing:t(this,I)!==h.AnnotationEditorType.NONE,isEmpty:Q(this,K,ue).call(this),hasSomethingToUndo:t(this,q).hasSomethingToUndo(),hasSomethingToRedo:t(this,q).hasSomethingToRedo(),hasSelectedEditor:!1})):(Q(this,St,Re).call(this),Q(this,tt,hi).call(this),Q(this,yt,ee).call(this,{isEditing:!1}))}registerEditorTypes(c){if(!t(this,D)){rt(this,D,c);for(const X of t(this,D))Q(this,Dt,de).call(this,X.defaultPropertiesToUpdate)}}getId(){return t(this,pt).getId()}get currentLayer(){return t(this,M).get(t(this,_))}get currentPageIndex(){return t(this,_)}addLayer(c){t(this,M).set(c.pageIndex,c),t(this,_t)?c.enable():c.disable()}removeLayer(c){t(this,M).delete(c.pageIndex)}updateMode(c,X=null){if(rt(this,I,c),c===h.AnnotationEditorType.NONE){this.setEditingState(!1),Q(this,zt,ui).call(this);return}this.setEditingState(!0),Q(this,It,di).call(this);for(const ut of t(this,M).values())ut.updateMode(c);if(!!X){for(const ut of t(this,r).values())if(ut.annotationElementId===X){this.setSelected(ut),ut.enterInEditMode();break}}}updateToolbar(c){c!==t(this,I)&&t(this,$).dispatch("switchannotationeditormode",{source:this,mode:c})}updateParams(c,X){if(!!t(this,D)){for(const ut of t(this,i))ut.updateParams(c,X);for(const ut of t(this,D))ut.updateDefaultParams(c,X)}}getEditors(c){const X=[];for(const ut of t(this,r).values())ut.pageIndex===c&&X.push(ut);return X}getEditor(c){return t(this,r).get(c)}addEditor(c){t(this,r).set(c.id,c)}removeEditor(c){var X;t(this,r).delete(c.id),this.unselect(c),(!c.annotationElementId||!t(this,G).has(c.annotationElementId))&&((X=t(this,L))==null||X.remove(c.id))}addDeletedAnnotationElement(c){t(this,G).add(c.annotationElementId),c.deleted=!0}isDeletedAnnotationElement(c){return t(this,G).has(c)}removeDeletedAnnotationElement(c){t(this,G).delete(c.annotationElementId),c.deleted=!1}setActiveEditor(c){t(this,l)!==c&&(rt(this,l,c),c&&Q(this,Dt,de).call(this,c.propertiesToUpdate))}toggleSelected(c){if(t(this,i).has(c)){t(this,i).delete(c),c.unselect(),Q(this,yt,ee).call(this,{hasSelectedEditor:this.hasSelection});return}t(this,i).add(c),c.select(),Q(this,Dt,de).call(this,c.propertiesToUpdate),Q(this,yt,ee).call(this,{hasSelectedEditor:!0})}setSelected(c){for(const X of t(this,i))X!==c&&X.unselect();t(this,i).clear(),t(this,i).add(c),c.select(),Q(this,Dt,de).call(this,c.propertiesToUpdate),Q(this,yt,ee).call(this,{hasSelectedEditor:!0})}isSelected(c){return t(this,i).has(c)}unselect(c){c.unselect(),t(this,i).delete(c),Q(this,yt,ee).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return t(this,i).size!==0}stopUndoAccumulation(){t(this,q).stopUndoAccumulation()}undo(){t(this,q).undo(),Q(this,yt,ee).call(this,{hasSomethingToUndo:t(this,q).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Q(this,K,ue).call(this)})}redo(){t(this,q).redo(),Q(this,yt,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:t(this,q).hasSomethingToRedo(),isEmpty:Q(this,K,ue).call(this)})}addCommands(c){t(this,q).add(c),Q(this,yt,ee).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Q(this,K,ue).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const c=[...t(this,i)],X=()=>{for(const ot of c)ot.remove()},ut=()=>{for(const ot of c)Q(this,lt,Me).call(this,ot)};this.addCommands({cmd:X,undo:ut,mustExec:!0})}commitOrRemove(){var c;(c=t(this,l))==null||c.commitOrRemove()}hasSomethingToControl(){return t(this,l)||this.hasSelection}selectAll(){for(const c of t(this,i))c.commit();Q(this,jt,De).call(this,t(this,r).values())}unselectAll(){if(t(this,l)){t(this,l).commitOrRemove();return}if(!!this.hasSelection){for(const c of t(this,i))c.unselect();t(this,i).clear(),Q(this,yt,ee).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(c,X,ut=!1){if(ut||this.commitOrRemove(),!this.hasSelection)return;t(this,ft)[0]+=c,t(this,ft)[1]+=X;const[ot,d]=t(this,ft),a=[...t(this,i)],C=1e3;t(this,Ct)&&clearTimeout(t(this,Ct)),rt(this,Ct,setTimeout(()=>{rt(this,Ct,null),t(this,ft)[0]=t(this,ft)[1]=0,this.addCommands({cmd:()=>{for(const S of a)t(this,r).has(S.id)&&S.translateInPage(ot,d)},undo:()=>{for(const S of a)t(this,r).has(S.id)&&S.translateInPage(-ot,-d)},mustExec:!1})},C));for(const S of a)S.translateInPage(c,X)}isActive(c){return t(this,l)===c}getActive(){return t(this,l)}getMode(){return t(this,I)}get imageManager(){return(0,h.shadow)(this,"imageManager",new B)}};let U=qt;l=new WeakMap,r=new WeakMap,M=new WeakMap,L=new WeakMap,q=new WeakMap,_=new WeakMap,G=new WeakMap,D=new WeakMap,x=new WeakMap,$=new WeakMap,et=new WeakMap,pt=new WeakMap,_t=new WeakMap,I=new WeakMap,i=new WeakMap,e=new WeakMap,m=new WeakMap,N=new WeakMap,P=new WeakMap,H=new WeakMap,z=new WeakMap,Y=new WeakMap,dt=new WeakMap,at=new WeakMap,ht=new WeakMap,ft=new WeakMap,Ct=new WeakMap,At=new WeakMap,Rt=new WeakSet,li=function(){window.addEventListener("keydown",t(this,H),{capture:!0})},St=new WeakSet,Re=function(){window.removeEventListener("keydown",t(this,H),{capture:!0})},vt=new WeakSet,ci=function(){document.addEventListener("copy",t(this,m)),document.addEventListener("cut",t(this,N)),document.addEventListener("paste",t(this,P))},tt=new WeakSet,hi=function(){document.removeEventListener("copy",t(this,m)),document.removeEventListener("cut",t(this,N)),document.removeEventListener("paste",t(this,P))},yt=new WeakSet,ee=function(c){Object.entries(c).some(([ut,ot])=>t(this,ht)[ut]!==ot)&&t(this,$).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(t(this,ht),c)})},Dt=new WeakSet,de=function(c){t(this,$).dispatch("annotationeditorparamschanged",{source:this,details:c})},It=new WeakSet,di=function(){if(!t(this,_t)){rt(this,_t,!0);for(const c of t(this,M).values())c.enable()}},zt=new WeakSet,ui=function(){if(this.unselectAll(),t(this,_t)){rt(this,_t,!1);for(const c of t(this,M).values())c.disable()}},lt=new WeakSet,Me=function(c){const X=t(this,M).get(c.pageIndex);X?X.addOrRebuild(c):this.addEditor(c)},K=new WeakSet,ue=function(){if(t(this,r).size===0)return!0;if(t(this,r).size===1)for(const c of t(this,r).values())return c.isEmpty();return!1},jt=new WeakSet,De=function(c){t(this,i).clear();for(const X of c)X.isEmpty()||(t(this,i).add(X),X.select());Q(this,yt,ee).call(this,{hasSelectedEditor:!0})},Yt(U,"TRANSLATE_SMALL",1),Yt(U,"TRANSLATE_BIG",10),u.AnnotationEditorUIManager=U},(bt,u,nt)=>{var D,x,$,et,pt,_t,I,i,e,m,N,P,oe,z,le,dt,Ie,ht,_e,Ct,Ae,Rt,fe,St,pe;Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMFilterFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=u.AnnotationPrefix=void 0,u.deprecated=F,u.getColorValues=M,u.getCurrentTransform=L,u.getCurrentTransformInverse=q,u.getFilenameFromUrl=E,u.getPdfFilenameFromUrl=k,u.getRGB=r,u.getXfaPageViewport=l,u.isDataScheme=f,u.isPdfFile=A,u.isValidFetchUrl=n,u.loadScript=o,u.setLayerDimensions=_;var h=nt(7),R=nt(1);const it="http://www.w3.org/2000/svg",J="pdfjs_internal_id_";u.AnnotationPrefix=J;const G=class{};let ct=G;Yt(ct,"CSS",96),Yt(ct,"PDF",72),Yt(ct,"PDF_TO_CSS_UNITS",G.CSS/G.PDF),u.PixelsPerInch=ct;class B extends h.BaseFilterFactory{constructor({docId:tt,ownerDocument:gt=globalThis.document}={}){super();W(this,P);W(this,z);W(this,dt);W(this,ht);W(this,Ct);W(this,Rt);W(this,St);W(this,D,void 0);W(this,x,void 0);W(this,$,void 0);W(this,et,void 0);W(this,pt,void 0);W(this,_t,void 0);W(this,I,void 0);W(this,i,void 0);W(this,e,void 0);W(this,m,void 0);W(this,N,0);rt(this,$,tt),rt(this,et,gt)}addFilter(tt){if(!tt)return"none";let gt=t(this,P,oe).get(tt);if(gt)return gt;let yt,Ft,Dt,Wt;if(tt.length===1){const Ut=tt[0],lt=new Array(256);for(let V=0;V<256;V++)lt[V]=Ut[V]/255;Wt=yt=Ft=Dt=lt.join(",")}else{const[Ut,lt,V]=tt,K=new Array(256),wt=new Array(256),jt=new Array(256);for(let Ot=0;Ot<256;Ot++)K[Ot]=Ut[Ot]/255,wt[Ot]=lt[Ot]/255,jt[Ot]=V[Ot]/255;yt=K.join(","),Ft=wt.join(","),Dt=jt.join(","),Wt=`${yt}${Ft}${Dt}`}if(gt=t(this,P,oe).get(Wt),gt)return t(this,P,oe).set(tt,gt),gt;const It=`g_${t(this,$)}_transfer_map_${ie(this,N)._++}`,Xt=`url(#${It})`;t(this,P,oe).set(tt,Xt),t(this,P,oe).set(Wt,Xt);const zt=Q(this,ht,_e).call(this,It);return Q(this,Rt,fe).call(this,yt,Ft,Dt,zt),Xt}addHCMFilter(tt,gt){var lt;const yt=`${tt}-${gt}`;if(t(this,_t)===yt)return t(this,I);if(rt(this,_t,yt),rt(this,I,"none"),(lt=t(this,pt))==null||lt.remove(),!tt||!gt)return t(this,I);const Ft=Q(this,St,pe).call(this,tt);tt=R.Util.makeHexColor(...Ft);const Dt=Q(this,St,pe).call(this,gt);if(gt=R.Util.makeHexColor(...Dt),t(this,z,le).style.color="",tt==="#000000"&&gt==="#ffffff"||tt===gt)return t(this,I);const Wt=new Array(256);for(let V=0;V<=255;V++){const K=V/255;Wt[V]=K<=.03928?K/12.92:((K+.055)/1.055)**2.4}const It=Wt.join(","),Xt=`g_${t(this,$)}_hcm_filter`,zt=rt(this,i,Q(this,ht,_e).call(this,Xt));Q(this,Rt,fe).call(this,It,It,It,zt),Q(this,dt,Ie).call(this,zt);const Ut=(V,K)=>{const wt=Ft[V]/255,jt=Dt[V]/255,Ot=new Array(K+1);for(let qt=0;qt<=K;qt++)Ot[qt]=wt+qt/K*(jt-wt);return Ot.join(",")};return Q(this,Rt,fe).call(this,Ut(0,5),Ut(1,5),Ut(2,5),zt),rt(this,I,`url(#${Xt})`),t(this,I)}addHighlightHCMFilter(tt,gt,yt,Ft){var jt;const Dt=`${tt}-${gt}-${yt}-${Ft}`;if(t(this,e)===Dt)return t(this,m);if(rt(this,e,Dt),rt(this,m,"none"),(jt=t(this,i))==null||jt.remove(),!tt||!gt)return t(this,m);const[Wt,It]=[tt,gt].map(Q(this,St,pe).bind(this));let Xt=Math.round(.2126*Wt[0]+.7152*Wt[1]+.0722*Wt[2]),zt=Math.round(.2126*It[0]+.7152*It[1]+.0722*It[2]),[Ut,lt]=[yt,Ft].map(Q(this,St,pe).bind(this));zt<Xt&&([Xt,zt,Ut,lt]=[zt,Xt,lt,Ut]),t(this,z,le).style.color="";const V=(Ot,qt,Kt)=>{const c=new Array(256),X=(zt-Xt)/Kt,ut=Ot/255,ot=(qt-Ot)/(255*Kt);let d=0;for(let a=0;a<=Kt;a++){const C=Math.round(Xt+a*X),S=ut+a*ot;for(let j=d;j<=C;j++)c[j]=S;d=C+1}for(let a=d;a<256;a++)c[a]=c[d-1];return c.join(",")},K=`g_${t(this,$)}_hcm_highlight_filter`,wt=rt(this,i,Q(this,ht,_e).call(this,K));return Q(this,dt,Ie).call(this,wt),Q(this,Rt,fe).call(this,V(Ut[0],lt[0],5),V(Ut[1],lt[1],5),V(Ut[2],lt[2],5),wt),rt(this,m,`url(#${K})`),t(this,m)}destroy(tt=!1){tt&&(t(this,I)||t(this,m))||(t(this,x)&&(t(this,x).parentNode.parentNode.remove(),rt(this,x,null)),t(this,D)&&(t(this,D).clear(),rt(this,D,null)),rt(this,N,0))}}D=new WeakMap,x=new WeakMap,$=new WeakMap,et=new WeakMap,pt=new WeakMap,_t=new WeakMap,I=new WeakMap,i=new WeakMap,e=new WeakMap,m=new WeakMap,N=new WeakMap,P=new WeakSet,oe=function(){return t(this,D)||rt(this,D,new Map)},z=new WeakSet,le=function(){if(!t(this,x)){const tt=t(this,et).createElement("div"),{style:gt}=tt;gt.visibility="hidden",gt.contain="strict",gt.width=gt.height=0,gt.position="absolute",gt.top=gt.left=0,gt.zIndex=-1;const yt=t(this,et).createElementNS(it,"svg");yt.setAttribute("width",0),yt.setAttribute("height",0),rt(this,x,t(this,et).createElementNS(it,"defs")),tt.append(yt),yt.append(t(this,x)),t(this,et).body.append(tt)}return t(this,x)},dt=new WeakSet,Ie=function(tt){const gt=t(this,et).createElementNS(it,"feColorMatrix");gt.setAttribute("type","matrix"),gt.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),tt.append(gt)},ht=new WeakSet,_e=function(tt){const gt=t(this,et).createElementNS(it,"filter");return gt.setAttribute("color-interpolation-filters","sRGB"),gt.setAttribute("id",tt),t(this,z,le).append(gt),gt},Ct=new WeakSet,Ae=function(tt,gt,yt){const Ft=t(this,et).createElementNS(it,gt);Ft.setAttribute("type","discrete"),Ft.setAttribute("tableValues",yt),tt.append(Ft)},Rt=new WeakSet,fe=function(tt,gt,yt,Ft){const Dt=t(this,et).createElementNS(it,"feComponentTransfer");Ft.append(Dt),Q(this,Ct,Ae).call(this,Dt,"feFuncR",tt),Q(this,Ct,Ae).call(this,Dt,"feFuncG",gt),Q(this,Ct,Ae).call(this,Dt,"feFuncB",yt)},St=new WeakSet,pe=function(tt){return t(this,z,le).style.color=tt,r(getComputedStyle(t(this,z,le)).getPropertyValue("color"))},u.DOMFilterFactory=B;class T extends h.BaseCanvasFactory{constructor({ownerDocument:st=globalThis.document}={}){super(),this._document=st}_createCanvas(st,tt){const gt=this._document.createElement("canvas");return gt.width=st,gt.height=tt,gt}}u.DOMCanvasFactory=T;async function p(vt,st=!1){if(n(vt,document.baseURI)){const tt=await fetch(vt);if(!tt.ok)throw new Error(tt.statusText);return st?new Uint8Array(await tt.arrayBuffer()):(0,R.stringToBytes)(await tt.text())}return new Promise((tt,gt)=>{const yt=new XMLHttpRequest;yt.open("GET",vt,!0),st&&(yt.responseType="arraybuffer"),yt.onreadystatechange=()=>{if(yt.readyState===XMLHttpRequest.DONE){if(yt.status===200||yt.status===0){let Ft;if(st&&yt.response?Ft=new Uint8Array(yt.response):!st&&yt.responseText&&(Ft=(0,R.stringToBytes)(yt.responseText)),Ft){tt(Ft);return}}gt(new Error(yt.statusText))}},yt.send(null)})}class O extends h.BaseCMapReaderFactory{_fetchData(st,tt){return p(st,this.isCompressed).then(gt=>({cMapData:gt,compressionType:tt}))}}u.DOMCMapReaderFactory=O;class U extends h.BaseStandardFontDataFactory{_fetchData(st){return p(st,!0)}}u.DOMStandardFontDataFactory=U;class w extends h.BaseSVGFactory{_createSVG(st){return document.createElementNS(it,st)}}u.DOMSVGFactory=w;class y{constructor({viewBox:st,scale:tt,rotation:gt,offsetX:yt=0,offsetY:Ft=0,dontFlip:Dt=!1}){this.viewBox=st,this.scale=tt,this.rotation=gt,this.offsetX=yt,this.offsetY=Ft;const Wt=(st[2]+st[0])/2,It=(st[3]+st[1])/2;let Xt,zt,Ut,lt;switch(gt%=360,gt<0&&(gt+=360),gt){case 180:Xt=-1,zt=0,Ut=0,lt=1;break;case 90:Xt=0,zt=1,Ut=1,lt=0;break;case 270:Xt=0,zt=-1,Ut=-1,lt=0;break;case 0:Xt=1,zt=0,Ut=0,lt=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Dt&&(Ut=-Ut,lt=-lt);let V,K,wt,jt;Xt===0?(V=Math.abs(It-st[1])*tt+yt,K=Math.abs(Wt-st[0])*tt+Ft,wt=(st[3]-st[1])*tt,jt=(st[2]-st[0])*tt):(V=Math.abs(Wt-st[0])*tt+yt,K=Math.abs(It-st[1])*tt+Ft,wt=(st[2]-st[0])*tt,jt=(st[3]-st[1])*tt),this.transform=[Xt*tt,zt*tt,Ut*tt,lt*tt,V-Xt*tt*Wt-Ut*tt*It,K-zt*tt*Wt-lt*tt*It],this.width=wt,this.height=jt}get rawDims(){const{viewBox:st}=this;return(0,R.shadow)(this,"rawDims",{pageWidth:st[2]-st[0],pageHeight:st[3]-st[1],pageX:st[0],pageY:st[1]})}clone({scale:st=this.scale,rotation:tt=this.rotation,offsetX:gt=this.offsetX,offsetY:yt=this.offsetY,dontFlip:Ft=!1}={}){return new y({viewBox:this.viewBox.slice(),scale:st,rotation:tt,offsetX:gt,offsetY:yt,dontFlip:Ft})}convertToViewportPoint(st,tt){return R.Util.applyTransform([st,tt],this.transform)}convertToViewportRectangle(st){const tt=R.Util.applyTransform([st[0],st[1]],this.transform),gt=R.Util.applyTransform([st[2],st[3]],this.transform);return[tt[0],tt[1],gt[0],gt[1]]}convertToPdfPoint(st,tt){return R.Util.applyInverseTransform([st,tt],this.transform)}}u.PageViewport=y;class v extends R.BaseException{constructor(st,tt=0){super(st,"RenderingCancelledException"),this.extraDelay=tt}}u.RenderingCancelledException=v;function f(vt){const st=vt.length;let tt=0;for(;tt<st&&vt[tt].trim()==="";)tt++;return vt.substring(tt,tt+5).toLowerCase()==="data:"}function A(vt){return typeof vt=="string"&&/\.pdf$/i.test(vt)}function E(vt,st=!1){return st||([vt]=vt.split(/[#?]/,1)),vt.substring(vt.lastIndexOf("/")+1)}function k(vt,st="document.pdf"){if(typeof vt!="string")return st;if(f(vt))return(0,R.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),st;const tt=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,gt=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,yt=tt.exec(vt);let Ft=gt.exec(yt[1])||gt.exec(yt[2])||gt.exec(yt[3]);if(Ft&&(Ft=Ft[0],Ft.includes("%")))try{Ft=gt.exec(decodeURIComponent(Ft))[0]}catch{}return Ft||st}class g{constructor(){Yt(this,"started",Object.create(null));Yt(this,"times",[])}time(st){st in this.started&&(0,R.warn)(`Timer is already running for ${st}`),this.started[st]=Date.now()}timeEnd(st){st in this.started||(0,R.warn)(`Timer has not been started for ${st}`),this.times.push({name:st,start:this.started[st],end:Date.now()}),delete this.started[st]}toString(){const st=[];let tt=0;for(const{name:gt}of this.times)tt=Math.max(gt.length,tt);for(const{name:gt,start:yt,end:Ft}of this.times)st.push(`${gt.padEnd(tt)} ${Ft-yt}ms
`);return st.join("")}}u.StatTimer=g;function n(vt,st){try{const{protocol:tt}=st?new URL(vt,st):new URL(vt);return tt==="http:"||tt==="https:"}catch{return!1}}function o(vt,st=!1){return new Promise((tt,gt)=>{const yt=document.createElement("script");yt.src=vt,yt.onload=function(Ft){st&&yt.remove(),tt(Ft)},yt.onerror=function(){gt(new Error(`Cannot load script at: ${yt.src}`))},(document.head||document.documentElement).append(yt)})}function F(vt){console.log("Deprecated API usage: "+vt)}let b;class s{static toDateObject(st){if(!st||typeof st!="string")return null;b||(b=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const tt=b.exec(st);if(!tt)return null;const gt=parseInt(tt[1],10);let yt=parseInt(tt[2],10);yt=yt>=1&&yt<=12?yt-1:0;let Ft=parseInt(tt[3],10);Ft=Ft>=1&&Ft<=31?Ft:1;let Dt=parseInt(tt[4],10);Dt=Dt>=0&&Dt<=23?Dt:0;let Wt=parseInt(tt[5],10);Wt=Wt>=0&&Wt<=59?Wt:0;let It=parseInt(tt[6],10);It=It>=0&&It<=59?It:0;const Xt=tt[7]||"Z";let zt=parseInt(tt[8],10);zt=zt>=0&&zt<=23?zt:0;let Ut=parseInt(tt[9],10)||0;return Ut=Ut>=0&&Ut<=59?Ut:0,Xt==="-"?(Dt+=zt,Wt+=Ut):Xt==="+"&&(Dt-=zt,Wt-=Ut),new Date(Date.UTC(gt,yt,Ft,Dt,Wt,It))}}u.PDFDateString=s;function l(vt,{scale:st=1,rotation:tt=0}){const{width:gt,height:yt}=vt.attributes.style,Ft=[0,0,parseInt(gt),parseInt(yt)];return new y({viewBox:Ft,scale:st,rotation:tt})}function r(vt){if(vt.startsWith("#")){const st=parseInt(vt.slice(1),16);return[(st&16711680)>>16,(st&65280)>>8,st&255]}return vt.startsWith("rgb(")?vt.slice(4,-1).split(",").map(st=>parseInt(st)):vt.startsWith("rgba(")?vt.slice(5,-1).split(",").map(st=>parseInt(st)).slice(0,3):((0,R.warn)(`Not a valid color format: "${vt}"`),[0,0,0])}function M(vt){const st=document.createElement("span");st.style.visibility="hidden",document.body.append(st);for(const tt of vt.keys()){st.style.color=tt;const gt=window.getComputedStyle(st).color;vt.set(tt,r(gt))}st.remove()}function L(vt){const{a:st,b:tt,c:gt,d:yt,e:Ft,f:Dt}=vt.getTransform();return[st,tt,gt,yt,Ft,Dt]}function q(vt){const{a:st,b:tt,c:gt,d:yt,e:Ft,f:Dt}=vt.getTransform().invertSelf();return[st,tt,gt,yt,Ft,Dt]}function _(vt,st,tt=!1,gt=!0){if(st instanceof y){const{pageWidth:yt,pageHeight:Ft}=st.rawDims,{style:Dt}=vt,Wt=`calc(var(--scale-factor) * ${yt}px)`,It=`calc(var(--scale-factor) * ${Ft}px)`;!tt||st.rotation%180===0?(Dt.width=Wt,Dt.height=It):(Dt.width=It,Dt.height=Wt)}gt&&vt.setAttribute("data-main-rotation",st.rotation)}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseFilterFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var h=nt(1);class R{constructor(){this.constructor===R&&(0,h.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(p){return"none"}addHCMFilter(p,O){return"none"}addHighlightHCMFilter(p,O,U,w){return"none"}destroy(p=!1){}}u.BaseFilterFactory=R;class it{constructor(){this.constructor===it&&(0,h.unreachable)("Cannot initialize BaseCanvasFactory.")}create(p,O){if(p<=0||O<=0)throw new Error("Invalid canvas size");const U=this._createCanvas(p,O);return{canvas:U,context:U.getContext("2d")}}reset(p,O,U){if(!p.canvas)throw new Error("Canvas is not specified");if(O<=0||U<=0)throw new Error("Invalid canvas size");p.canvas.width=O,p.canvas.height=U}destroy(p){if(!p.canvas)throw new Error("Canvas is not specified");p.canvas.width=0,p.canvas.height=0,p.canvas=null,p.context=null}_createCanvas(p,O){(0,h.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=it;class J{constructor({baseUrl:p=null,isCompressed:O=!0}){this.constructor===J&&(0,h.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=p,this.isCompressed=O}async fetch({name:p}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!p)throw new Error("CMap name must be specified.");const O=this.baseUrl+p+(this.isCompressed?".bcmap":""),U=this.isCompressed?h.CMapCompressionType.BINARY:h.CMapCompressionType.NONE;return this._fetchData(O,U).catch(w=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${O}`)})}_fetchData(p,O){(0,h.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=J;class ct{constructor({baseUrl:p=null}){this.constructor===ct&&(0,h.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=p}async fetch({filename:p}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!p)throw new Error("Font filename must be specified.");const O=`${this.baseUrl}${p}`;return this._fetchData(O).catch(U=>{throw new Error(`Unable to load font data at: ${O}`)})}_fetchData(p){(0,h.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=ct;class B{constructor(){this.constructor===B&&(0,h.unreachable)("Cannot initialize BaseSVGFactory.")}create(p,O,U=!1){if(p<=0||O<=0)throw new Error("Invalid SVG dimensions");const w=this._createSVG("svg:svg");return w.setAttribute("version","1.1"),U||(w.setAttribute("width",`${p}px`),w.setAttribute("height",`${O}px`)),w.setAttribute("preserveAspectRatio","none"),w.setAttribute("viewBox",`0 0 ${p} ${O}`),w}createElement(p){if(typeof p!="string")throw new Error("Invalid SVG element type");return this._createSVG(p)}_createSVG(p){(0,h.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=B},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var h=nt(1);const R=3285377520,it=4294901760,J=65535;class ct{constructor(T){this.h1=T?T&4294967295:R,this.h2=T?T&4294967295:R}update(T){let p,O;if(typeof T=="string"){p=new Uint8Array(T.length*2),O=0;for(let F=0,b=T.length;F<b;F++){const s=T.charCodeAt(F);s<=255?p[O++]=s:(p[O++]=s>>>8,p[O++]=s&255)}}else if((0,h.isArrayBuffer)(T))p=T.slice(),O=p.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const U=O>>2,w=O-U*4,y=new Uint32Array(p.buffer,0,U);let v=0,f=0,A=this.h1,E=this.h2;const k=3432918353,g=461845907,n=k&J,o=g&J;for(let F=0;F<U;F++)F&1?(v=y[F],v=v*k&it|v*n&J,v=v<<15|v>>>17,v=v*g&it|v*o&J,A^=v,A=A<<13|A>>>19,A=A*5+3864292196):(f=y[F],f=f*k&it|f*n&J,f=f<<15|f>>>17,f=f*g&it|f*o&J,E^=f,E=E<<13|E>>>19,E=E*5+3864292196);switch(v=0,w){case 3:v^=p[U*4+2]<<16;case 2:v^=p[U*4+1]<<8;case 1:v^=p[U*4],v=v*k&it|v*n&J,v=v<<15|v>>>17,v=v*g&it|v*o&J,U&1?A^=v:E^=v}this.h1=A,this.h2=E}hexdigest(){let T=this.h1,p=this.h2;return T^=p>>>1,T=T*3981806797&it|T*36045&J,p=p*4283543511&it|((p<<16|T>>>16)*2950163797&it)>>>16,T^=p>>>1,T=T*444984403&it|T*60499&J,p=p*3301882366&it|((p<<16|T>>>16)*3120437893&it)>>>16,T^=p>>>1,(T>>>0).toString(16).padStart(8,"0")+(p>>>0).toString(16).padStart(8,"0")}}u.MurmurHash3_64=ct},(bt,u,nt)=>{var J;Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var h=nt(1);class R{constructor({ownerDocument:B=globalThis.document,styleElement:T=null}){W(this,J,new Set);this._document=B,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(B){this.nativeFontFaces.add(B),this._document.fonts.add(B)}removeNativeFontFace(B){this.nativeFontFaces.delete(B),this._document.fonts.delete(B)}insertRule(B){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const T=this.styleElement.sheet;T.insertRule(B,T.cssRules.length)}clear(){for(const B of this.nativeFontFaces)this._document.fonts.delete(B);this.nativeFontFaces.clear(),t(this,J).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(B){if(!(!B||t(this,J).has(B.loadedName))){if((0,h.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:T,src:p,style:O}=B,U=new FontFace(T,p,O);this.addNativeFontFace(U);try{await U.load(),t(this,J).add(T)}catch{(0,h.warn)(`Cannot load system font: ${B.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(U)}return}(0,h.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(B){if(B.attached||B.missingFile&&!B.systemFontInfo)return;if(B.attached=!0,B.systemFontInfo){await this.loadSystemFont(B.systemFontInfo);return}if(this.isFontLoadingAPISupported){const p=B.createNativeFontFace();if(p){this.addNativeFontFace(p);try{await p.loaded}catch(O){throw(0,h.warn)(`Failed to load font '${p.family}': '${O}'.`),B.disableFontFace=!0,O}}return}const T=B.createFontFaceRule();if(T){if(this.insertRule(T),this.isSyncFontLoadingSupported)return;await new Promise(p=>{const O=this._queueLoadingCallback(p);this._prepareFontLoadEvent(B,O)})}}get isFontLoadingAPISupported(){var T;const B=!!((T=this._document)!=null&&T.fonts);return(0,h.shadow)(this,"isFontLoadingAPISupported",B)}get isSyncFontLoadingSupported(){let B=!1;return(h.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(B=!0),(0,h.shadow)(this,"isSyncFontLoadingSupported",B)}_queueLoadingCallback(B){function T(){for((0,h.assert)(!O.done,"completeRequest() cannot be called twice."),O.done=!0;p.length>0&&p[0].done;){const U=p.shift();setTimeout(U.callback,0)}}const{loadingRequests:p}=this,O={done:!1,complete:T,callback:B};return p.push(O),O}get _loadTestFont(){const B=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,h.shadow)(this,"_loadTestFont",B)}_prepareFontLoadEvent(B,T){function p(r,M){return r.charCodeAt(M)<<24|r.charCodeAt(M+1)<<16|r.charCodeAt(M+2)<<8|r.charCodeAt(M+3)&255}function O(r,M,L,q){const _=r.substring(0,M),G=r.substring(M+L);return _+q+G}let U,w;const y=this._document.createElement("canvas");y.width=1,y.height=1;const v=y.getContext("2d");let f=0;function A(r,M){if(++f>30){(0,h.warn)("Load test font never loaded."),M();return}if(v.font="30px "+r,v.fillText(".",0,20),v.getImageData(0,0,1,1).data[3]>0){M();return}setTimeout(A.bind(null,r,M))}const E=`lt${Date.now()}${this.loadTestFontId++}`;let k=this._loadTestFont;k=O(k,976,E.length,E);const n=16,o=1482184792;let F=p(k,n);for(U=0,w=E.length-3;U<w;U+=4)F=F-o+p(E,U)|0;U<E.length&&(F=F-o+p(E+"XXX",U)|0),k=O(k,n,4,(0,h.string32)(F));const b=`url(data:font/opentype;base64,${btoa(k)});`,s=`@font-face {font-family:"${E}";src:${b}}`;this.insertRule(s);const l=this._document.createElement("div");l.style.visibility="hidden",l.style.width=l.style.height="10px",l.style.position="absolute",l.style.top=l.style.left="0px";for(const r of[B.loadedName,E]){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=r,l.append(M)}this._document.body.append(l),A(E,()=>{l.remove(),T.complete()})}}J=new WeakMap,u.FontLoader=R;class it{constructor(B,{isEvalSupported:T=!0,disableFontFace:p=!1,ignoreErrors:O=!1,inspectFont:U=null}){this.compiledGlyphs=Object.create(null);for(const w in B)this[w]=B[w];this.isEvalSupported=T!==!1,this.disableFontFace=p===!0,this.ignoreErrors=O===!0,this._inspectFont=U}createNativeFontFace(){var T;if(!this.data||this.disableFontFace)return null;let B;if(!this.cssFontInfo)B=new FontFace(this.loadedName,this.data,{});else{const p={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(p.style=`oblique ${this.cssFontInfo.italicAngle}deg`),B=new FontFace(this.cssFontInfo.fontFamily,this.data,p)}return(T=this._inspectFont)==null||T.call(this,this),B}createFontFaceRule(){var O;if(!this.data||this.disableFontFace)return null;const B=(0,h.bytesToString)(this.data),T=`url(data:${this.mimetype};base64,${btoa(B)});`;let p;if(!this.cssFontInfo)p=`@font-face {font-family:"${this.loadedName}";src:${T}}`;else{let U=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(U+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),p=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${U}src:${T}}`}return(O=this._inspectFont)==null||O.call(this,this,T),p}getPathGenerator(B,T){if(this.compiledGlyphs[T]!==void 0)return this.compiledGlyphs[T];let p;try{p=B.get(this.loadedName+"_path_"+T)}catch(O){if(!this.ignoreErrors)throw O;return(0,h.warn)(`getPathGenerator - ignoring character: "${O}".`),this.compiledGlyphs[T]=function(U,w){}}if(this.isEvalSupported&&h.FeatureTest.isEvalSupported){const O=[];for(const U of p){const w=U.args!==void 0?U.args.join(","):"";O.push("c.",U.cmd,"(",w,`);
`)}return this.compiledGlyphs[T]=new Function("c","size",O.join(""))}return this.compiledGlyphs[T]=function(O,U){for(const w of p)w.cmd==="scale"&&(w.args=[U,-U]),O[w.cmd].apply(O,w.args)}}}u.FontFaceObject=it},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeFilterFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var h=nt(7);nt(1);const R=function(T){return new Promise((p,O)=>{require$$5.readFile(T,(w,y)=>{if(w||!y){O(new Error(w));return}p(new Uint8Array(y))})})};class it extends h.BaseFilterFactory{}u.NodeFilterFactory=it;class J extends h.BaseCanvasFactory{_createCanvas(p,O){return require$$5.createCanvas(p,O)}}u.NodeCanvasFactory=J;class ct extends h.BaseCMapReaderFactory{_fetchData(p,O){return R(p).then(U=>({cMapData:U,compressionType:O}))}}u.NodeCMapReaderFactory=ct;class B extends h.BaseStandardFontDataFactory{_fetchData(p){return R(p)}}u.NodeStandardFontDataFactory=B},(bt,u,nt)=>{var x,Le,et,Oe;Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var h=nt(1),R=nt(6),it=nt(12),J=nt(13);const ct=16,B=100,T=4096,p=15,O=10,U=1e3,w=16;function y(I,i){if(I._removeMirroring)throw new Error("Context is already forwarding operations.");I.__originalSave=I.save,I.__originalRestore=I.restore,I.__originalRotate=I.rotate,I.__originalScale=I.scale,I.__originalTranslate=I.translate,I.__originalTransform=I.transform,I.__originalSetTransform=I.setTransform,I.__originalResetTransform=I.resetTransform,I.__originalClip=I.clip,I.__originalMoveTo=I.moveTo,I.__originalLineTo=I.lineTo,I.__originalBezierCurveTo=I.bezierCurveTo,I.__originalRect=I.rect,I.__originalClosePath=I.closePath,I.__originalBeginPath=I.beginPath,I._removeMirroring=()=>{I.save=I.__originalSave,I.restore=I.__originalRestore,I.rotate=I.__originalRotate,I.scale=I.__originalScale,I.translate=I.__originalTranslate,I.transform=I.__originalTransform,I.setTransform=I.__originalSetTransform,I.resetTransform=I.__originalResetTransform,I.clip=I.__originalClip,I.moveTo=I.__originalMoveTo,I.lineTo=I.__originalLineTo,I.bezierCurveTo=I.__originalBezierCurveTo,I.rect=I.__originalRect,I.closePath=I.__originalClosePath,I.beginPath=I.__originalBeginPath,delete I._removeMirroring},I.save=function(){i.save(),this.__originalSave()},I.restore=function(){i.restore(),this.__originalRestore()},I.translate=function(m,N){i.translate(m,N),this.__originalTranslate(m,N)},I.scale=function(m,N){i.scale(m,N),this.__originalScale(m,N)},I.transform=function(m,N,P,H,z,Y){i.transform(m,N,P,H,z,Y),this.__originalTransform(m,N,P,H,z,Y)},I.setTransform=function(m,N,P,H,z,Y){i.setTransform(m,N,P,H,z,Y),this.__originalSetTransform(m,N,P,H,z,Y)},I.resetTransform=function(){i.resetTransform(),this.__originalResetTransform()},I.rotate=function(m){i.rotate(m),this.__originalRotate(m)},I.clip=function(m){i.clip(m),this.__originalClip(m)},I.moveTo=function(e,m){i.moveTo(e,m),this.__originalMoveTo(e,m)},I.lineTo=function(e,m){i.lineTo(e,m),this.__originalLineTo(e,m)},I.bezierCurveTo=function(e,m,N,P,H,z){i.bezierCurveTo(e,m,N,P,H,z),this.__originalBezierCurveTo(e,m,N,P,H,z)},I.rect=function(e,m,N,P){i.rect(e,m,N,P),this.__originalRect(e,m,N,P)},I.closePath=function(){i.closePath(),this.__originalClosePath()},I.beginPath=function(){i.beginPath(),this.__originalBeginPath()}}class v{constructor(i){this.canvasFactory=i,this.cache=Object.create(null)}getCanvas(i,e,m){let N;return this.cache[i]!==void 0?(N=this.cache[i],this.canvasFactory.reset(N,e,m)):(N=this.canvasFactory.create(e,m),this.cache[i]=N),N}delete(i){delete this.cache[i]}clear(){for(const i in this.cache){const e=this.cache[i];this.canvasFactory.destroy(e),delete this.cache[i]}}}function f(I,i,e,m,N,P,H,z,Y,dt){const[at,ht,ft,Ct,At,Rt]=(0,R.getCurrentTransform)(I);if(ht===0&&ft===0){const Nt=H*at+At,vt=Math.round(Nt),st=z*Ct+Rt,tt=Math.round(st),gt=(H+Y)*at+At,yt=Math.abs(Math.round(gt)-vt)||1,Ft=(z+dt)*Ct+Rt,Dt=Math.abs(Math.round(Ft)-tt)||1;return I.setTransform(Math.sign(at),0,0,Math.sign(Ct),vt,tt),I.drawImage(i,e,m,N,P,0,0,yt,Dt),I.setTransform(at,ht,ft,Ct,At,Rt),[yt,Dt]}if(at===0&&Ct===0){const Nt=z*ft+At,vt=Math.round(Nt),st=H*ht+Rt,tt=Math.round(st),gt=(z+dt)*ft+At,yt=Math.abs(Math.round(gt)-vt)||1,Ft=(H+Y)*ht+Rt,Dt=Math.abs(Math.round(Ft)-tt)||1;return I.setTransform(0,Math.sign(ht),Math.sign(ft),0,vt,tt),I.drawImage(i,e,m,N,P,0,0,Dt,yt),I.setTransform(at,ht,ft,Ct,At,Rt),[Dt,yt]}I.drawImage(i,e,m,N,P,H,z,Y,dt);const Ht=Math.hypot(at,ht),St=Math.hypot(ft,Ct);return[Ht*Y,St*dt]}function A(I){const{width:i,height:e}=I;if(i>U||e>U)return null;const m=1e3,N=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),P=i+1;let H=new Uint8Array(P*(e+1)),z,Y,dt;const at=i+7&-8;let ht=new Uint8Array(at*e),ft=0;for(const St of I.data){let Nt=128;for(;Nt>0;)ht[ft++]=St&Nt?0:255,Nt>>=1}let Ct=0;for(ft=0,ht[ft]!==0&&(H[0]=1,++Ct),Y=1;Y<i;Y++)ht[ft]!==ht[ft+1]&&(H[Y]=ht[ft]?2:1,++Ct),ft++;for(ht[ft]!==0&&(H[Y]=2,++Ct),z=1;z<e;z++){ft=z*at,dt=z*P,ht[ft-at]!==ht[ft]&&(H[dt]=ht[ft]?1:8,++Ct);let St=(ht[ft]?4:0)+(ht[ft-at]?8:0);for(Y=1;Y<i;Y++)St=(St>>2)+(ht[ft+1]?4:0)+(ht[ft-at+1]?8:0),N[St]&&(H[dt+Y]=N[St],++Ct),ft++;if(ht[ft-at]!==ht[ft]&&(H[dt+Y]=ht[ft]?2:4,++Ct),Ct>m)return null}for(ft=at*(e-1),dt=z*P,ht[ft]!==0&&(H[dt]=8,++Ct),Y=1;Y<i;Y++)ht[ft]!==ht[ft+1]&&(H[dt+Y]=ht[ft]?4:8,++Ct),ft++;if(ht[ft]!==0&&(H[dt+Y]=4,++Ct),Ct>m)return null;const At=new Int32Array([0,P,-1,0,-P,0,0,0,1]),Rt=new Path2D;for(z=0;Ct&&z<=e;z++){let St=z*P;const Nt=St+i;for(;St<Nt&&!H[St];)St++;if(St===Nt)continue;Rt.moveTo(St%P,z);const vt=St;let st=H[St];do{const tt=At[st];do St+=tt;while(!H[St]);const gt=H[St];gt!==5&&gt!==10?(st=gt,H[St]=0):(st=gt&51*st>>4,H[St]&=st>>2|st<<2),Rt.lineTo(St%P,St/P|0),H[St]||--Ct}while(vt!==St);--z}return ht=null,H=null,function(St){St.save(),St.scale(1/i,-1/e),St.translate(0,-e),St.fill(Rt),St.beginPath(),St.restore()}}class E{constructor(i,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=h.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=h.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=h.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,i,e])}clone(){const i=Object.create(this);return i.clipBox=this.clipBox.slice(),i}setCurrentPoint(i,e){this.x=i,this.y=e}updatePathMinMax(i,e,m){[e,m]=h.Util.applyTransform([e,m],i),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,m),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,m)}updateRectMinMax(i,e){const m=h.Util.applyTransform(e,i),N=h.Util.applyTransform(e.slice(2),i);this.minX=Math.min(this.minX,m[0],N[0]),this.minY=Math.min(this.minY,m[1],N[1]),this.maxX=Math.max(this.maxX,m[0],N[0]),this.maxY=Math.max(this.maxY,m[1],N[1])}updateScalingPathMinMax(i,e){h.Util.scaleMinMax(i,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(i,e,m,N,P,H,z,Y,dt,at){const ht=h.Util.bezierBoundingBox(e,m,N,P,H,z,Y,dt);if(at){at[0]=Math.min(at[0],ht[0],ht[2]),at[1]=Math.max(at[1],ht[0],ht[2]),at[2]=Math.min(at[2],ht[1],ht[3]),at[3]=Math.max(at[3],ht[1],ht[3]);return}this.updateRectMinMax(i,ht)}getPathBoundingBox(i=it.PathType.FILL,e=null){const m=[this.minX,this.minY,this.maxX,this.maxY];if(i===it.PathType.STROKE){e||(0,h.unreachable)("Stroke bounding box must include transform.");const N=h.Util.singularValueDecompose2dScale(e),P=N[0]*this.lineWidth/2,H=N[1]*this.lineWidth/2;m[0]-=P,m[1]-=H,m[2]+=P,m[3]+=H}return m}updateClipFromPath(){const i=h.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(i||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(i){this.clipBox=i,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(i=it.PathType.FILL,e=null){return h.Util.intersect(this.clipBox,this.getPathBoundingBox(i,e))}}function k(I,i){if(typeof ImageData<"u"&&i instanceof ImageData){I.putImageData(i,0,0);return}const e=i.height,m=i.width,N=e%w,P=(e-N)/w,H=N===0?P:P+1,z=I.createImageData(m,w);let Y=0,dt;const at=i.data,ht=z.data;let ft,Ct,At,Rt;if(i.kind===h.ImageKind.GRAYSCALE_1BPP){const Ht=at.byteLength,St=new Uint32Array(ht.buffer,0,ht.byteLength>>2),Nt=St.length,vt=m+7>>3,st=4294967295,tt=h.FeatureTest.isLittleEndian?4278190080:255;for(ft=0;ft<H;ft++){for(At=ft<P?w:N,dt=0,Ct=0;Ct<At;Ct++){const gt=Ht-Y;let yt=0;const Ft=gt>vt?m:gt*8-7,Dt=Ft&-8;let Wt=0,It=0;for(;yt<Dt;yt+=8)It=at[Y++],St[dt++]=It&128?st:tt,St[dt++]=It&64?st:tt,St[dt++]=It&32?st:tt,St[dt++]=It&16?st:tt,St[dt++]=It&8?st:tt,St[dt++]=It&4?st:tt,St[dt++]=It&2?st:tt,St[dt++]=It&1?st:tt;for(;yt<Ft;yt++)Wt===0&&(It=at[Y++],Wt=128),St[dt++]=It&Wt?st:tt,Wt>>=1}for(;dt<Nt;)St[dt++]=0;I.putImageData(z,0,ft*w)}}else if(i.kind===h.ImageKind.RGBA_32BPP){for(Ct=0,Rt=m*w*4,ft=0;ft<P;ft++)ht.set(at.subarray(Y,Y+Rt)),Y+=Rt,I.putImageData(z,0,Ct),Ct+=w;ft<H&&(Rt=m*N*4,ht.set(at.subarray(Y,Y+Rt)),I.putImageData(z,0,Ct))}else if(i.kind===h.ImageKind.RGB_24BPP)for(At=w,Rt=m*At,ft=0;ft<H;ft++){for(ft>=P&&(At=N,Rt=m*At),dt=0,Ct=Rt;Ct--;)ht[dt++]=at[Y++],ht[dt++]=at[Y++],ht[dt++]=at[Y++],ht[dt++]=255;I.putImageData(z,0,ft*w)}else throw new Error(`bad image kind: ${i.kind}`)}function g(I,i){if(i.bitmap){I.drawImage(i.bitmap,0,0);return}const e=i.height,m=i.width,N=e%w,P=(e-N)/w,H=N===0?P:P+1,z=I.createImageData(m,w);let Y=0;const dt=i.data,at=z.data;for(let ht=0;ht<H;ht++){const ft=ht<P?w:N;({srcPos:Y}=(0,J.convertBlackAndWhiteToRGBA)({src:dt,srcPos:Y,dest:at,width:m,height:ft,nonBlackColor:0})),I.putImageData(z,0,ht*w)}}function n(I,i){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const m of e)I[m]!==void 0&&(i[m]=I[m]);I.setLineDash!==void 0&&(i.setLineDash(I.getLineDash()),i.lineDashOffset=I.lineDashOffset)}function o(I){if(I.strokeStyle=I.fillStyle="#000000",I.fillRule="nonzero",I.globalAlpha=1,I.lineWidth=1,I.lineCap="butt",I.lineJoin="miter",I.miterLimit=10,I.globalCompositeOperation="source-over",I.font="10px sans-serif",I.setLineDash!==void 0&&(I.setLineDash([]),I.lineDashOffset=0),!h.isNodeJS){const{filter:i}=I;i!=="none"&&i!==""&&(I.filter="none")}}function F(I,i,e,m){const N=I.length;for(let P=3;P<N;P+=4){const H=I[P];if(H===0)I[P-3]=i,I[P-2]=e,I[P-1]=m;else if(H<255){const z=255-H;I[P-3]=I[P-3]*H+i*z>>8,I[P-2]=I[P-2]*H+e*z>>8,I[P-1]=I[P-1]*H+m*z>>8}}}function b(I,i,e){const m=I.length,N=1/255;for(let P=3;P<m;P+=4){const H=e?e[I[P]]:I[P];i[P]=i[P]*H*N|0}}function s(I,i,e){const m=I.length;for(let N=3;N<m;N+=4){const P=I[N-3]*77+I[N-2]*152+I[N-1]*28;i[N]=e?i[N]*e[P>>8]>>8:i[N]*P>>16}}function l(I,i,e,m,N,P,H,z,Y,dt,at){const ht=!!P,ft=ht?P[0]:0,Ct=ht?P[1]:0,At=ht?P[2]:0,Rt=N==="Luminosity"?s:b,St=Math.min(m,Math.ceil(1048576/e));for(let Nt=0;Nt<m;Nt+=St){const vt=Math.min(St,m-Nt),st=I.getImageData(z-dt,Nt+(Y-at),e,vt),tt=i.getImageData(z,Nt+Y,e,vt);ht&&F(st.data,ft,Ct,At),Rt(st.data,tt.data,H),i.putImageData(tt,z,Nt+Y)}}function r(I,i,e,m){const N=m[0],P=m[1],H=m[2]-N,z=m[3]-P;H===0||z===0||(l(i.context,e,H,z,i.subtype,i.backdrop,i.transferMap,N,P,i.offsetX,i.offsetY),I.save(),I.globalAlpha=1,I.globalCompositeOperation="source-over",I.setTransform(1,0,0,1,0,0),I.drawImage(e.canvas,0,0),I.restore())}function M(I,i){const e=h.Util.singularValueDecompose2dScale(I);e[0]=Math.fround(e[0]),e[1]=Math.fround(e[1]);const m=Math.fround((globalThis.devicePixelRatio||1)*R.PixelsPerInch.PDF_TO_CSS_UNITS);return i!==void 0?i:e[0]<=m||e[1]<=m}const L=["butt","round","square"],q=["miter","round","bevel"],_={},G={},_t=class{constructor(i,e,m,N,P,{optionalContentConfig:H,markedContentStack:z=null},Y,dt){W(this,x);W(this,et);this.ctx=i,this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=m,this.canvasFactory=N,this.filterFactory=P,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=z||[],this.optionalContentConfig=H,this.cachedCanvases=new v(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Y,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=dt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(i,e=null){return typeof i=="string"?i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i):e}beginDrawing({transform:i,viewport:e,transparency:m=!1,background:N=null}){const P=this.ctx.canvas.width,H=this.ctx.canvas.height,z=this.ctx.fillStyle;if(this.ctx.fillStyle=N||"#ffffff",this.ctx.fillRect(0,0,P,H),this.ctx.fillStyle=z,m){const Y=this.cachedCanvases.getCanvas("transparent",P,H);this.compositeCtx=this.ctx,this.transparentCanvas=Y.canvas,this.ctx=Y.context,this.ctx.save(),this.ctx.transform(...(0,R.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),o(this.ctx),i&&(this.ctx.transform(...i),this.outputScaleX=i[0],this.outputScaleY=i[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=(0,R.getCurrentTransform)(this.ctx)}executeOperatorList(i,e,m,N){const P=i.argsArray,H=i.fnArray;let z=e||0;const Y=P.length;if(Y===z)return z;const dt=Y-z>O&&typeof m=="function",at=dt?Date.now()+p:0;let ht=0;const ft=this.commonObjs,Ct=this.objs;let At;for(;;){if(N!==void 0&&z===N.nextBreakPoint)return N.breakIt(z,m),z;if(At=H[z],At!==h.OPS.dependency)this[At].apply(this,P[z]);else for(const Rt of P[z]){const Ht=Rt.startsWith("g_")?ft:Ct;if(!Ht.has(Rt))return Ht.get(Rt,m),z}if(z++,z===Y)return z;if(dt&&++ht>O){if(Date.now()>at)return m(),z;ht=0}}}endDrawing(){Q(this,x,Le).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const i of this._cachedBitmapsMap.values()){for(const e of i.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);i.clear()}this._cachedBitmapsMap.clear(),Q(this,et,Oe).call(this)}_scaleImage(i,e){const m=i.width,N=i.height;let P=Math.max(Math.hypot(e[0],e[1]),1),H=Math.max(Math.hypot(e[2],e[3]),1),z=m,Y=N,dt="prescale1",at,ht;for(;P>2&&z>1||H>2&&Y>1;){let ft=z,Ct=Y;P>2&&z>1&&(ft=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z/2),P/=z/ft),H>2&&Y>1&&(Ct=Y>=16384?Math.floor(Y/2)-1||1:Math.ceil(Y)/2,H/=Y/Ct),at=this.cachedCanvases.getCanvas(dt,ft,Ct),ht=at.context,ht.clearRect(0,0,ft,Ct),ht.drawImage(i,0,0,z,Y,0,0,ft,Ct),i=at.canvas,z=ft,Y=Ct,dt=dt==="prescale1"?"prescale2":"prescale1"}return{img:i,paintWidth:z,paintHeight:Y}}_createMaskCanvas(i){const e=this.ctx,{width:m,height:N}=i,P=this.current.fillColor,H=this.current.patternFill,z=(0,R.getCurrentTransform)(e);let Y,dt,at,ht;if((i.bitmap||i.data)&&i.count>1){const yt=i.bitmap||i.data.buffer;dt=JSON.stringify(H?z:[z.slice(0,4),P]),Y=this._cachedBitmapsMap.get(yt),Y||(Y=new Map,this._cachedBitmapsMap.set(yt,Y));const Ft=Y.get(dt);if(Ft&&!H){const Dt=Math.round(Math.min(z[0],z[2])+z[4]),Wt=Math.round(Math.min(z[1],z[3])+z[5]);return{canvas:Ft,offsetX:Dt,offsetY:Wt}}at=Ft}at||(ht=this.cachedCanvases.getCanvas("maskCanvas",m,N),g(ht.context,i));let ft=h.Util.transform(z,[1/m,0,0,-1/N,0,0]);ft=h.Util.transform(ft,[1,0,0,1,0,-N]);const Ct=h.Util.applyTransform([0,0],ft),At=h.Util.applyTransform([m,N],ft),Rt=h.Util.normalizeRect([Ct[0],Ct[1],At[0],At[1]]),Ht=Math.round(Rt[2]-Rt[0])||1,St=Math.round(Rt[3]-Rt[1])||1,Nt=this.cachedCanvases.getCanvas("fillCanvas",Ht,St),vt=Nt.context,st=Math.min(Ct[0],At[0]),tt=Math.min(Ct[1],At[1]);vt.translate(-st,-tt),vt.transform(...ft),at||(at=this._scaleImage(ht.canvas,(0,R.getCurrentTransformInverse)(vt)),at=at.img,Y&&H&&Y.set(dt,at)),vt.imageSmoothingEnabled=M((0,R.getCurrentTransform)(vt),i.interpolate),f(vt,at,0,0,at.width,at.height,0,0,m,N),vt.globalCompositeOperation="source-in";const gt=h.Util.transform((0,R.getCurrentTransformInverse)(vt),[1,0,0,1,-st,-tt]);return vt.fillStyle=H?P.getPattern(e,this,gt,it.PathType.FILL):P,vt.fillRect(0,0,m,N),Y&&!H&&(this.cachedCanvases.delete("fillCanvas"),Y.set(dt,Nt.canvas)),{canvas:Nt.canvas,offsetX:Math.round(st),offsetY:Math.round(tt)}}setLineWidth(i){i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(i){this.ctx.lineCap=L[i]}setLineJoin(i){this.ctx.lineJoin=q[i]}setMiterLimit(i){this.ctx.miterLimit=i}setDash(i,e){const m=this.ctx;m.setLineDash!==void 0&&(m.setLineDash(i),m.lineDashOffset=e)}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[e,m]of i)switch(e){case"LW":this.setLineWidth(m);break;case"LC":this.setLineCap(m);break;case"LJ":this.setLineJoin(m);break;case"ML":this.setMiterLimit(m);break;case"D":this.setDash(m[0],m[1]);break;case"RI":this.setRenderingIntent(m);break;case"FL":this.setFlatness(m);break;case"Font":this.setFont(m[0],m[1]);break;case"CA":this.current.strokeAlpha=m;break;case"ca":this.current.fillAlpha=m,this.ctx.globalAlpha=m;break;case"BM":this.ctx.globalCompositeOperation=m;break;case"SMask":this.current.activeSMask=m?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(m);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const i=this.inSMaskMode;this.current.activeSMask&&!i?this.beginSMaskMode():!this.current.activeSMask&&i&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,e=this.ctx.canvas.height,m="smaskGroupAt"+this.groupLevel,N=this.cachedCanvases.getCanvas(m,i,e);this.suspendedCtx=this.ctx,this.ctx=N.context;const P=this.ctx;P.setTransform(...(0,R.getCurrentTransform)(this.suspendedCtx)),n(this.suspendedCtx,P),y(P,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),n(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(i){if(!this.current.activeSMask)return;i?(i[0]=Math.floor(i[0]),i[1]=Math.floor(i[1]),i[2]=Math.ceil(i[2]),i[3]=Math.ceil(i[3])):i=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,m=this.suspendedCtx;r(m,e,this.ctx,i),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(n(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),n(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(i,e,m,N,P,H){this.ctx.transform(i,e,m,N,P,H),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(i,e,m){const N=this.ctx,P=this.current;let H=P.x,z=P.y,Y,dt;const at=(0,R.getCurrentTransform)(N),ht=at[0]===0&&at[3]===0||at[1]===0&&at[2]===0,ft=ht?m.slice(0):null;for(let Ct=0,At=0,Rt=i.length;Ct<Rt;Ct++)switch(i[Ct]|0){case h.OPS.rectangle:H=e[At++],z=e[At++];const Ht=e[At++],St=e[At++],Nt=H+Ht,vt=z+St;N.moveTo(H,z),Ht===0||St===0?N.lineTo(Nt,vt):(N.lineTo(Nt,z),N.lineTo(Nt,vt),N.lineTo(H,vt)),ht||P.updateRectMinMax(at,[H,z,Nt,vt]),N.closePath();break;case h.OPS.moveTo:H=e[At++],z=e[At++],N.moveTo(H,z),ht||P.updatePathMinMax(at,H,z);break;case h.OPS.lineTo:H=e[At++],z=e[At++],N.lineTo(H,z),ht||P.updatePathMinMax(at,H,z);break;case h.OPS.curveTo:Y=H,dt=z,H=e[At+4],z=e[At+5],N.bezierCurveTo(e[At],e[At+1],e[At+2],e[At+3],H,z),P.updateCurvePathMinMax(at,Y,dt,e[At],e[At+1],e[At+2],e[At+3],H,z,ft),At+=6;break;case h.OPS.curveTo2:Y=H,dt=z,N.bezierCurveTo(H,z,e[At],e[At+1],e[At+2],e[At+3]),P.updateCurvePathMinMax(at,Y,dt,H,z,e[At],e[At+1],e[At+2],e[At+3],ft),H=e[At+2],z=e[At+3],At+=4;break;case h.OPS.curveTo3:Y=H,dt=z,H=e[At+2],z=e[At+3],N.bezierCurveTo(e[At],e[At+1],H,z,H,z),P.updateCurvePathMinMax(at,Y,dt,e[At],e[At+1],H,z,H,z,ft),At+=4;break;case h.OPS.closePath:N.closePath();break}ht&&P.updateScalingPathMinMax(at,ft),P.setCurrentPoint(H,z)}closePath(){this.ctx.closePath()}stroke(i=!0){const e=this.ctx,m=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof m=="object"&&(m==null?void 0:m.getPattern)?(e.save(),e.strokeStyle=m.getPattern(e,this,(0,R.getCurrentTransformInverse)(e),it.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),i&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(i=!0){const e=this.ctx,m=this.current.fillColor,N=this.current.patternFill;let P=!1;N&&(e.save(),e.fillStyle=m.getPattern(e,this,(0,R.getCurrentTransformInverse)(e),it.PathType.FILL),P=!0);const H=this.current.getClippedPathBoundingBox();this.contentVisible&&H!==null&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),P&&e.restore(),i&&this.consumePath(H)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=_}eoClip(){this.pendingClip=G}beginText(){this.current.textMatrix=h.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const i=this.pendingTextPaths,e=this.ctx;if(i===void 0){e.beginPath();return}e.save(),e.beginPath();for(const m of i)e.setTransform(...m.transform),e.translate(m.x,m.y),m.addToPath(e,m.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}setCharSpacing(i){this.current.charSpacing=i}setWordSpacing(i){this.current.wordSpacing=i}setHScale(i){this.current.textHScale=i/100}setLeading(i){this.current.leading=-i}setFont(i,e){var at;const m=this.commonObjs.get(i),N=this.current;if(!m)throw new Error(`Can't find font for ${i}`);if(N.fontMatrix=m.fontMatrix||h.FONT_IDENTITY_MATRIX,(N.fontMatrix[0]===0||N.fontMatrix[3]===0)&&(0,h.warn)("Invalid font matrix for font "+i),e<0?(e=-e,N.fontDirection=-1):N.fontDirection=1,this.current.font=m,this.current.fontSize=e,m.isType3Font)return;const P=m.loadedName||"sans-serif",H=((at=m.systemFontInfo)==null?void 0:at.css)||`"${P}", ${m.fallbackName}`;let z="normal";m.black?z="900":m.bold&&(z="bold");const Y=m.italic?"italic":"normal";let dt=e;e<ct?dt=ct:e>B&&(dt=B),this.current.fontSizeScale=e/dt,this.ctx.font=`${Y} ${z} ${dt}px ${H}`}setTextRenderingMode(i){this.current.textRenderingMode=i}setTextRise(i){this.current.textRise=i}moveText(i,e){this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=e}setLeadingMoveText(i,e){this.setLeading(-e),this.moveText(i,e)}setTextMatrix(i,e,m,N,P,H){this.current.textMatrix=[i,e,m,N,P,H],this.current.textMatrixScale=Math.hypot(i,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(i,e,m,N){const P=this.ctx,H=this.current,z=H.font,Y=H.textRenderingMode,dt=H.fontSize/H.fontSizeScale,at=Y&h.TextRenderingMode.FILL_STROKE_MASK,ht=!!(Y&h.TextRenderingMode.ADD_TO_PATH_FLAG),ft=H.patternFill&&!z.missingFile;let Ct;(z.disableFontFace||ht||ft)&&(Ct=z.getPathGenerator(this.commonObjs,i)),z.disableFontFace||ft?(P.save(),P.translate(e,m),P.beginPath(),Ct(P,dt),N&&P.setTransform(...N),(at===h.TextRenderingMode.FILL||at===h.TextRenderingMode.FILL_STROKE)&&P.fill(),(at===h.TextRenderingMode.STROKE||at===h.TextRenderingMode.FILL_STROKE)&&P.stroke(),P.restore()):((at===h.TextRenderingMode.FILL||at===h.TextRenderingMode.FILL_STROKE)&&P.fillText(i,e,m),(at===h.TextRenderingMode.STROKE||at===h.TextRenderingMode.FILL_STROKE)&&P.strokeText(i,e,m)),ht&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,R.getCurrentTransform)(P),x:e,y:m,fontSize:dt,addToPath:Ct})}get isFontSubpixelAAEnabled(){const{context:i}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);i.scale(1.5,1),i.fillText("I",0,10);const e=i.getImageData(0,0,10,10).data;let m=!1;for(let N=3;N<e.length;N+=4)if(e[N]>0&&e[N]<255){m=!0;break}return(0,h.shadow)(this,"isFontSubpixelAAEnabled",m)}showText(i){const e=this.current,m=e.font;if(m.isType3Font)return this.showType3Text(i);const N=e.fontSize;if(N===0)return;const P=this.ctx,H=e.fontSizeScale,z=e.charSpacing,Y=e.wordSpacing,dt=e.fontDirection,at=e.textHScale*dt,ht=i.length,ft=m.vertical,Ct=ft?1:-1,At=m.defaultVMetrics,Rt=N*e.fontMatrix[0],Ht=e.textRenderingMode===h.TextRenderingMode.FILL&&!m.disableFontFace&&!e.patternFill;P.save(),P.transform(...e.textMatrix),P.translate(e.x,e.y+e.textRise),dt>0?P.scale(at,-1):P.scale(at,1);let St;if(e.patternFill){P.save();const gt=e.fillColor.getPattern(P,this,(0,R.getCurrentTransformInverse)(P),it.PathType.FILL);St=(0,R.getCurrentTransform)(P),P.restore(),P.fillStyle=gt}let Nt=e.lineWidth;const vt=e.textMatrixScale;if(vt===0||Nt===0){const gt=e.textRenderingMode&h.TextRenderingMode.FILL_STROKE_MASK;(gt===h.TextRenderingMode.STROKE||gt===h.TextRenderingMode.FILL_STROKE)&&(Nt=this.getSinglePixelWidth())}else Nt/=vt;if(H!==1&&(P.scale(H,H),Nt/=H),P.lineWidth=Nt,m.isInvalidPDFjsFont){const gt=[];let yt=0;for(const Ft of i)gt.push(Ft.unicode),yt+=Ft.width;P.fillText(gt.join(""),0,0),e.x+=yt*Rt*at,P.restore(),this.compose();return}let st=0,tt;for(tt=0;tt<ht;++tt){const gt=i[tt];if(typeof gt=="number"){st+=Ct*gt*N/1e3;continue}let yt=!1;const Ft=(gt.isSpace?Y:0)+z,Dt=gt.fontChar,Wt=gt.accent;let It,Xt,zt=gt.width;if(ft){const lt=gt.vmetric||At,V=-(gt.vmetric?lt[1]:zt*.5)*Rt,K=lt[2]*Rt;zt=lt?-lt[0]:zt,It=V/H,Xt=(st+K)/H}else It=st/H,Xt=0;if(m.remeasure&&zt>0){const lt=P.measureText(Dt).width*1e3/N*H;if(zt<lt&&this.isFontSubpixelAAEnabled){const V=zt/lt;yt=!0,P.save(),P.scale(V,1),It/=V}else zt!==lt&&(It+=(zt-lt)/2e3*N/H)}if(this.contentVisible&&(gt.isInFont||m.missingFile)){if(Ht&&!Wt)P.fillText(Dt,It,Xt);else if(this.paintChar(Dt,It,Xt,St),Wt){const lt=It+N*Wt.offset.x/H,V=Xt-N*Wt.offset.y/H;this.paintChar(Wt.fontChar,lt,V,St)}}const Ut=ft?zt*Rt-Ft*dt:zt*Rt+Ft*dt;st+=Ut,yt&&P.restore()}ft?e.y-=st:e.x+=st*at,P.restore(),this.compose()}showType3Text(i){const e=this.ctx,m=this.current,N=m.font,P=m.fontSize,H=m.fontDirection,z=N.vertical?1:-1,Y=m.charSpacing,dt=m.wordSpacing,at=m.textHScale*H,ht=m.fontMatrix||h.FONT_IDENTITY_MATRIX,ft=i.length,Ct=m.textRenderingMode===h.TextRenderingMode.INVISIBLE;let At,Rt,Ht,St;if(!(Ct||P===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...m.textMatrix),e.translate(m.x,m.y),e.scale(at,H),At=0;At<ft;++At){if(Rt=i[At],typeof Rt=="number"){St=z*Rt*P/1e3,this.ctx.translate(St,0),m.x+=St*at;continue}const Nt=(Rt.isSpace?dt:0)+Y,vt=N.charProcOperatorList[Rt.operatorListId];if(!vt){(0,h.warn)(`Type3 character "${Rt.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Rt,this.save(),e.scale(P,P),e.transform(...ht),this.executeOperatorList(vt),this.restore()),Ht=h.Util.applyTransform([Rt.width,0],ht)[0]*P+Nt,e.translate(Ht,0),m.x+=Ht*at}e.restore(),this.processingType3=null}}setCharWidth(i,e){}setCharWidthAndBounds(i,e,m,N,P,H){this.ctx.rect(m,N,P-m,H-N),this.ctx.clip(),this.endPath()}getColorN_Pattern(i){let e;if(i[0]==="TilingPattern"){const m=i[1],N=this.baseTransform||(0,R.getCurrentTransform)(this.ctx),P={createCanvasGraphics:H=>new _t(H,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new it.TilingPattern(i,m,this.ctx,P,N)}else e=this._getPattern(i[1],i[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(i,e,m){const N=h.Util.makeHexColor(i,e,m);this.ctx.strokeStyle=N,this.current.strokeColor=N}setFillRGBColor(i,e,m){const N=h.Util.makeHexColor(i,e,m);this.ctx.fillStyle=N,this.current.fillColor=N,this.current.patternFill=!1}_getPattern(i,e=null){let m;return this.cachedPatterns.has(i)?m=this.cachedPatterns.get(i):(m=(0,it.getShadingPattern)(this.getObject(i)),this.cachedPatterns.set(i,m)),e&&(m.matrix=e),m}shadingFill(i){if(!this.contentVisible)return;const e=this.ctx;this.save();const m=this._getPattern(i);e.fillStyle=m.getPattern(e,this,(0,R.getCurrentTransformInverse)(e),it.PathType.SHADING);const N=(0,R.getCurrentTransformInverse)(e);if(N){const{width:P,height:H}=e.canvas,[z,Y,dt,at]=h.Util.getAxialAlignedBoundingBox([0,0,P,H],N);this.ctx.fillRect(z,Y,dt-z,at-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,h.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,h.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(i,e){if(!!this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(i)&&i.length===6&&this.transform(...i),this.baseTransform=(0,R.getCurrentTransform)(this.ctx),e)){const m=e[2]-e[0],N=e[3]-e[1];this.ctx.rect(e[0],e[1],m,N),this.current.updateRectMinMax((0,R.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(i){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;i.isolated||(0,h.info)("TODO: Support non-isolated groups."),i.knockout&&(0,h.warn)("Knockout groups not supported.");const m=(0,R.getCurrentTransform)(e);if(i.matrix&&e.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let N=h.Util.getAxialAlignedBoundingBox(i.bbox,(0,R.getCurrentTransform)(e));const P=[0,0,e.canvas.width,e.canvas.height];N=h.Util.intersect(N,P)||[0,0,0,0];const H=Math.floor(N[0]),z=Math.floor(N[1]);let Y=Math.max(Math.ceil(N[2])-H,1),dt=Math.max(Math.ceil(N[3])-z,1),at=1,ht=1;Y>T&&(at=Y/T,Y=T),dt>T&&(ht=dt/T,dt=T),this.current.startNewPathAndClipBox([0,0,Y,dt]);let ft="groupAt"+this.groupLevel;i.smask&&(ft+="_smask_"+this.smaskCounter++%2);const Ct=this.cachedCanvases.getCanvas(ft,Y,dt),At=Ct.context;At.scale(1/at,1/ht),At.translate(-H,-z),At.transform(...m),i.smask?this.smaskStack.push({canvas:Ct.canvas,context:At,offsetX:H,offsetY:z,scaleX:at,scaleY:ht,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(H,z),e.scale(at,ht),e.save()),n(e,At),this.ctx=At,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(i){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,m=this.groupStack.pop();if(this.ctx=m,this.ctx.imageSmoothingEnabled=!1,i.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const N=(0,R.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...N);const P=h.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],N);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(P)}}beginAnnotation(i,e,m,N,P){if(Q(this,x,Le).call(this),o(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&e.length===4){const H=e[2]-e[0],z=e[3]-e[1];if(P&&this.annotationCanvasMap){m=m.slice(),m[4]-=e[0],m[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=H,e[3]=z;const[Y,dt]=h.Util.singularValueDecompose2dScale((0,R.getCurrentTransform)(this.ctx)),{viewportScale:at}=this,ht=Math.ceil(H*this.outputScaleX*at),ft=Math.ceil(z*this.outputScaleY*at);this.annotationCanvas=this.canvasFactory.create(ht,ft);const{canvas:Ct,context:At}=this.annotationCanvas;this.annotationCanvasMap.set(i,Ct),this.annotationCanvas.savedCtx=this.ctx,this.ctx=At,this.ctx.save(),this.ctx.setTransform(Y,0,0,-dt,0,z*dt),o(this.ctx)}else o(this.ctx),this.ctx.rect(e[0],e[1],H,z),this.ctx.clip(),this.endPath()}this.current=new E(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...m),this.transform(...N)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Q(this,et,Oe).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(i){if(!this.contentVisible)return;const e=i.count;i=this.getObject(i.data,i),i.count=e;const m=this.ctx,N=this.processingType3;if(N&&(N.compiled===void 0&&(N.compiled=A(i)),N.compiled)){N.compiled(m);return}const P=this._createMaskCanvas(i),H=P.canvas;m.save(),m.setTransform(1,0,0,1,0,0),m.drawImage(H,P.offsetX,P.offsetY),m.restore(),this.compose()}paintImageMaskXObjectRepeat(i,e,m=0,N=0,P,H){if(!this.contentVisible)return;i=this.getObject(i.data,i);const z=this.ctx;z.save();const Y=(0,R.getCurrentTransform)(z);z.transform(e,m,N,P,0,0);const dt=this._createMaskCanvas(i);z.setTransform(1,0,0,1,dt.offsetX-Y[4],dt.offsetY-Y[5]);for(let at=0,ht=H.length;at<ht;at+=2){const ft=h.Util.transform(Y,[e,m,N,P,H[at],H[at+1]]),[Ct,At]=h.Util.applyTransform([0,0],ft);z.drawImage(dt.canvas,Ct,At)}z.restore(),this.compose()}paintImageMaskXObjectGroup(i){if(!this.contentVisible)return;const e=this.ctx,m=this.current.fillColor,N=this.current.patternFill;for(const P of i){const{data:H,width:z,height:Y,transform:dt}=P,at=this.cachedCanvases.getCanvas("maskCanvas",z,Y),ht=at.context;ht.save();const ft=this.getObject(H,P);g(ht,ft),ht.globalCompositeOperation="source-in",ht.fillStyle=N?m.getPattern(ht,this,(0,R.getCurrentTransformInverse)(e),it.PathType.FILL):m,ht.fillRect(0,0,z,Y),ht.restore(),e.save(),e.transform(...dt),e.scale(1,-1),f(e,at.canvas,0,0,z,Y,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(i){if(!this.contentVisible)return;const e=this.getObject(i);if(!e){(0,h.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(i,e,m,N){if(!this.contentVisible)return;const P=this.getObject(i);if(!P){(0,h.warn)("Dependent image isn't ready yet");return}const H=P.width,z=P.height,Y=[];for(let dt=0,at=N.length;dt<at;dt+=2)Y.push({transform:[e,0,0,m,N[dt],N[dt+1]],x:0,y:0,w:H,h:z});this.paintInlineImageXObjectGroup(P,Y)}applyTransferMapsToCanvas(i){return this.current.transferMaps!=="none"&&(i.filter=this.current.transferMaps,i.drawImage(i.canvas,0,0),i.filter="none"),i.canvas}applyTransferMapsToBitmap(i){if(this.current.transferMaps==="none")return i.bitmap;const{bitmap:e,width:m,height:N}=i,P=this.cachedCanvases.getCanvas("inlineImage",m,N),H=P.context;return H.filter=this.current.transferMaps,H.drawImage(e,0,0),H.filter="none",P.canvas}paintInlineImageXObject(i){if(!this.contentVisible)return;const e=i.width,m=i.height,N=this.ctx;if(this.save(),!h.isNodeJS){const{filter:z}=N;z!=="none"&&z!==""&&(N.filter="none")}N.scale(1/e,-1/m);let P;if(i.bitmap)P=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)P=i;else{const Y=this.cachedCanvases.getCanvas("inlineImage",e,m).context;k(Y,i),P=this.applyTransferMapsToCanvas(Y)}const H=this._scaleImage(P,(0,R.getCurrentTransformInverse)(N));N.imageSmoothingEnabled=M((0,R.getCurrentTransform)(N),i.interpolate),f(N,H.img,0,0,H.paintWidth,H.paintHeight,0,-m,e,m),this.compose(),this.restore()}paintInlineImageXObjectGroup(i,e){if(!this.contentVisible)return;const m=this.ctx;let N;if(i.bitmap)N=i.bitmap;else{const P=i.width,H=i.height,Y=this.cachedCanvases.getCanvas("inlineImage",P,H).context;k(Y,i),N=this.applyTransferMapsToCanvas(Y)}for(const P of e)m.save(),m.transform(...P.transform),m.scale(1,-1),f(m,N,P.x,P.y,P.w,P.h,0,-1,1,1),m.restore();this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(i){}markPointProps(i,e){}beginMarkedContent(i){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(i,e){i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(i){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const m=this.ctx;this.pendingClip&&(e||(this.pendingClip===G?m.clip("evenodd"):m.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),m.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const i=(0,R.getCurrentTransform)(this.ctx);if(i[1]===0&&i[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(i[0]),Math.abs(i[3]));else{const e=Math.abs(i[0]*i[3]-i[2]*i[1]),m=Math.hypot(i[0],i[2]),N=Math.hypot(i[1],i[3]);this._cachedGetSinglePixelWidth=Math.max(m,N)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:i}=this.current,{a:e,b:m,c:N,d:P}=this.ctx.getTransform();let H,z;if(m===0&&N===0){const Y=Math.abs(e),dt=Math.abs(P);if(Y===dt)if(i===0)H=z=1/Y;else{const at=Y*i;H=z=at<1?1/at:1}else if(i===0)H=1/Y,z=1/dt;else{const at=Y*i,ht=dt*i;H=at<1?1/at:1,z=ht<1?1/ht:1}}else{const Y=Math.abs(e*P-m*N),dt=Math.hypot(e,m),at=Math.hypot(N,P);if(i===0)H=at/Y,z=dt/Y;else{const ht=i*Y;H=at>ht?at/ht:1,z=dt>ht?dt/ht:1}}this._cachedScaleForStroking[0]=H,this._cachedScaleForStroking[1]=z}return this._cachedScaleForStroking}rescaleAndStroke(i){const{ctx:e}=this,{lineWidth:m}=this.current,[N,P]=this.getScaleForStroking();if(e.lineWidth=m||1,N===1&&P===1){e.stroke();return}const H=e.getLineDash();if(i&&e.save(),e.scale(N,P),H.length>0){const z=Math.max(N,P);e.setLineDash(H.map(Y=>Y/z)),e.lineDashOffset/=z}e.stroke(),i&&e.restore()}isContentVisible(){for(let i=this.markedContentStack.length-1;i>=0;i--)if(!this.markedContentStack[i].visible)return!1;return!0}};let D=_t;x=new WeakSet,Le=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},et=new WeakSet,Oe=function(){if(this.pageColors){const i=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(i!=="none"){const e=this.ctx.filter;this.ctx.filter=i,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},u.CanvasGraphics=D;for(const I in h.OPS)D.prototype[I]!==void 0&&(D.prototype[h.OPS[I]]=D.prototype[I])},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=w;var h=nt(1),R=nt(6);const it={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};u.PathType=it;function J(A,E){if(!E)return;const k=E[2]-E[0],g=E[3]-E[1],n=new Path2D;n.rect(E[0],E[1],k,g),A.clip(n)}class ct{constructor(){this.constructor===ct&&(0,h.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,h.unreachable)("Abstract method `getPattern` called.")}}class B extends ct{constructor(E){super(),this._type=E[1],this._bbox=E[2],this._colorStops=E[3],this._p0=E[4],this._p1=E[5],this._r0=E[6],this._r1=E[7],this.matrix=null}_createGradient(E){let k;this._type==="axial"?k=E.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(k=E.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const g of this._colorStops)k.addColorStop(g[0],g[1]);return k}getPattern(E,k,g,n){let o;if(n===it.STROKE||n===it.FILL){const F=k.current.getClippedPathBoundingBox(n,(0,R.getCurrentTransform)(E))||[0,0,0,0],b=Math.ceil(F[2]-F[0])||1,s=Math.ceil(F[3]-F[1])||1,l=k.cachedCanvases.getCanvas("pattern",b,s,!0),r=l.context;r.clearRect(0,0,r.canvas.width,r.canvas.height),r.beginPath(),r.rect(0,0,r.canvas.width,r.canvas.height),r.translate(-F[0],-F[1]),g=h.Util.transform(g,[1,0,0,1,F[0],F[1]]),r.transform(...k.baseTransform),this.matrix&&r.transform(...this.matrix),J(r,this._bbox),r.fillStyle=this._createGradient(r),r.fill(),o=E.createPattern(l.canvas,"no-repeat");const M=new DOMMatrix(g);o.setTransform(M)}else J(E,this._bbox),o=this._createGradient(E);return o}}function T(A,E,k,g,n,o,F,b){const s=E.coords,l=E.colors,r=A.data,M=A.width*4;let L;s[k+1]>s[g+1]&&(L=k,k=g,g=L,L=o,o=F,F=L),s[g+1]>s[n+1]&&(L=g,g=n,n=L,L=F,F=b,b=L),s[k+1]>s[g+1]&&(L=k,k=g,g=L,L=o,o=F,F=L);const q=(s[k]+E.offsetX)*E.scaleX,_=(s[k+1]+E.offsetY)*E.scaleY,G=(s[g]+E.offsetX)*E.scaleX,D=(s[g+1]+E.offsetY)*E.scaleY,x=(s[n]+E.offsetX)*E.scaleX,$=(s[n+1]+E.offsetY)*E.scaleY;if(_>=$)return;const et=l[o],pt=l[o+1],_t=l[o+2],I=l[F],i=l[F+1],e=l[F+2],m=l[b],N=l[b+1],P=l[b+2],H=Math.round(_),z=Math.round($);let Y,dt,at,ht,ft,Ct,At,Rt;for(let Ht=H;Ht<=z;Ht++){if(Ht<D){const tt=Ht<_?0:(_-Ht)/(_-D);Y=q-(q-G)*tt,dt=et-(et-I)*tt,at=pt-(pt-i)*tt,ht=_t-(_t-e)*tt}else{let tt;Ht>$?tt=1:D===$?tt=0:tt=(D-Ht)/(D-$),Y=G-(G-x)*tt,dt=I-(I-m)*tt,at=i-(i-N)*tt,ht=e-(e-P)*tt}let St;Ht<_?St=0:Ht>$?St=1:St=(_-Ht)/(_-$),ft=q-(q-x)*St,Ct=et-(et-m)*St,At=pt-(pt-N)*St,Rt=_t-(_t-P)*St;const Nt=Math.round(Math.min(Y,ft)),vt=Math.round(Math.max(Y,ft));let st=M*Ht+Nt*4;for(let tt=Nt;tt<=vt;tt++)St=(Y-tt)/(Y-ft),St<0?St=0:St>1&&(St=1),r[st++]=dt-(dt-Ct)*St|0,r[st++]=at-(at-At)*St|0,r[st++]=ht-(ht-Rt)*St|0,r[st++]=255}}function p(A,E,k){const g=E.coords,n=E.colors;let o,F;switch(E.type){case"lattice":const b=E.verticesPerRow,s=Math.floor(g.length/b)-1,l=b-1;for(o=0;o<s;o++){let r=o*b;for(let M=0;M<l;M++,r++)T(A,k,g[r],g[r+1],g[r+b],n[r],n[r+1],n[r+b]),T(A,k,g[r+b+1],g[r+1],g[r+b],n[r+b+1],n[r+1],n[r+b])}break;case"triangles":for(o=0,F=g.length;o<F;o+=3)T(A,k,g[o],g[o+1],g[o+2],n[o],n[o+1],n[o+2]);break;default:throw new Error("illegal figure")}}class O extends ct{constructor(E){super(),this._coords=E[2],this._colors=E[3],this._figures=E[4],this._bounds=E[5],this._bbox=E[7],this._background=E[8],this.matrix=null}_createMeshCanvas(E,k,g){const b=Math.floor(this._bounds[0]),s=Math.floor(this._bounds[1]),l=Math.ceil(this._bounds[2])-b,r=Math.ceil(this._bounds[3])-s,M=Math.min(Math.ceil(Math.abs(l*E[0]*1.1)),3e3),L=Math.min(Math.ceil(Math.abs(r*E[1]*1.1)),3e3),q=l/M,_=r/L,G={coords:this._coords,colors:this._colors,offsetX:-b,offsetY:-s,scaleX:1/q,scaleY:1/_},D=M+2*2,x=L+2*2,$=g.getCanvas("mesh",D,x,!1),et=$.context,pt=et.createImageData(M,L);if(k){const I=pt.data;for(let i=0,e=I.length;i<e;i+=4)I[i]=k[0],I[i+1]=k[1],I[i+2]=k[2],I[i+3]=255}for(const I of this._figures)p(pt,I,G);return et.putImageData(pt,2,2),{canvas:$.canvas,offsetX:b-2*q,offsetY:s-2*_,scaleX:q,scaleY:_}}getPattern(E,k,g,n){J(E,this._bbox);let o;if(n===it.SHADING)o=h.Util.singularValueDecompose2dScale((0,R.getCurrentTransform)(E));else if(o=h.Util.singularValueDecompose2dScale(k.baseTransform),this.matrix){const b=h.Util.singularValueDecompose2dScale(this.matrix);o=[o[0]*b[0],o[1]*b[1]]}const F=this._createMeshCanvas(o,n===it.SHADING?null:this._background,k.cachedCanvases);return n!==it.SHADING&&(E.setTransform(...k.baseTransform),this.matrix&&E.transform(...this.matrix)),E.translate(F.offsetX,F.offsetY),E.scale(F.scaleX,F.scaleY),E.createPattern(F.canvas,"no-repeat")}}class U extends ct{getPattern(){return"hotpink"}}function w(A){switch(A[0]){case"RadialAxial":return new B(A);case"Mesh":return new O(A);case"Dummy":return new U}throw new Error(`Unknown IR type: ${A[0]}`)}const y={COLORED:1,UNCOLORED:2},f=class{constructor(E,k,g,n,o){this.operatorList=E[2],this.matrix=E[3]||[1,0,0,1,0,0],this.bbox=E[4],this.xstep=E[5],this.ystep=E[6],this.paintType=E[7],this.tilingType=E[8],this.color=k,this.ctx=g,this.canvasGraphicsFactory=n,this.baseTransform=o}createPatternCanvas(E){const k=this.operatorList,g=this.bbox,n=this.xstep,o=this.ystep,F=this.paintType,b=this.tilingType,s=this.color,l=this.canvasGraphicsFactory;(0,h.info)("TilingType: "+b);const r=g[0],M=g[1],L=g[2],q=g[3],_=h.Util.singularValueDecompose2dScale(this.matrix),G=h.Util.singularValueDecompose2dScale(this.baseTransform),D=[_[0]*G[0],_[1]*G[1]],x=this.getSizeAndScale(n,this.ctx.canvas.width,D[0]),$=this.getSizeAndScale(o,this.ctx.canvas.height,D[1]),et=E.cachedCanvases.getCanvas("pattern",x.size,$.size,!0),pt=et.context,_t=l.createCanvasGraphics(pt);_t.groupLevel=E.groupLevel,this.setFillAndStrokeStyleToContext(_t,F,s);let I=r,i=M,e=L,m=q;return r<0&&(I=0,e+=Math.abs(r)),M<0&&(i=0,m+=Math.abs(M)),pt.translate(-(x.scale*I),-($.scale*i)),_t.transform(x.scale,0,0,$.scale,0,0),pt.save(),this.clipBbox(_t,I,i,e,m),_t.baseTransform=(0,R.getCurrentTransform)(_t.ctx),_t.executeOperatorList(k),_t.endDrawing(),{canvas:et.canvas,scaleX:x.scale,scaleY:$.scale,offsetX:I,offsetY:i}}getSizeAndScale(E,k,g){E=Math.abs(E);const n=Math.max(f.MAX_PATTERN_SIZE,k);let o=Math.ceil(E*g);return o>=n?o=n:g=o/E,{scale:g,size:o}}clipBbox(E,k,g,n,o){const F=n-k,b=o-g;E.ctx.rect(k,g,F,b),E.current.updateRectMinMax((0,R.getCurrentTransform)(E.ctx),[k,g,n,o]),E.clip(),E.endPath()}setFillAndStrokeStyleToContext(E,k,g){const n=E.ctx,o=E.current;switch(k){case y.COLORED:const F=this.ctx;n.fillStyle=F.fillStyle,n.strokeStyle=F.strokeStyle,o.fillColor=F.fillStyle,o.strokeColor=F.strokeStyle;break;case y.UNCOLORED:const b=h.Util.makeHexColor(g[0],g[1],g[2]);n.fillStyle=b,n.strokeStyle=b,o.fillColor=b,o.strokeColor=b;break;default:throw new h.FormatError(`Unsupported paint type: ${k}`)}}getPattern(E,k,g,n){let o=g;n!==it.SHADING&&(o=h.Util.transform(o,k.baseTransform),this.matrix&&(o=h.Util.transform(o,this.matrix)));const F=this.createPatternCanvas(k);let b=new DOMMatrix(o);b=b.translate(F.offsetX,F.offsetY),b=b.scale(1/F.scaleX,1/F.scaleY);const s=E.createPattern(F.canvas,"repeat");return s.setTransform(b),s}};let v=f;Yt(v,"MAX_PATTERN_SIZE",3e3),u.TilingPattern=v},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.convertBlackAndWhiteToRGBA=it,u.convertToRGBA=R,u.grayToRGBA=ct;var h=nt(1);function R(B){switch(B.kind){case h.ImageKind.GRAYSCALE_1BPP:return it(B);case h.ImageKind.RGB_24BPP:return J(B)}return null}function it({src:B,srcPos:T=0,dest:p,width:O,height:U,nonBlackColor:w=4294967295,inverseDecode:y=!1}){const v=h.FeatureTest.isLittleEndian?4278190080:255,[f,A]=y?[w,v]:[v,w],E=O>>3,k=O&7,g=B.length;p=new Uint32Array(p.buffer);let n=0;for(let o=0;o<U;o++){for(const b=T+E;T<b;T++){const s=T<g?B[T]:255;p[n++]=s&128?A:f,p[n++]=s&64?A:f,p[n++]=s&32?A:f,p[n++]=s&16?A:f,p[n++]=s&8?A:f,p[n++]=s&4?A:f,p[n++]=s&2?A:f,p[n++]=s&1?A:f}if(k===0)continue;const F=T<g?B[T++]:255;for(let b=0;b<k;b++)p[n++]=F&1<<7-b?A:f}return{srcPos:T,destPos:n}}function J({src:B,srcPos:T=0,dest:p,destPos:O=0,width:U,height:w}){let y=0;const v=B.length>>2,f=new Uint32Array(B.buffer,T,v);if(h.FeatureTest.isLittleEndian){for(;y<v-2;y+=3,O+=4){const A=f[y],E=f[y+1],k=f[y+2];p[O]=A|4278190080,p[O+1]=A>>>24|E<<8|4278190080,p[O+2]=E>>>16|k<<16|4278190080,p[O+3]=k>>>8|4278190080}for(let A=y*4,E=B.length;A<E;A+=3)p[O++]=B[A]|B[A+1]<<8|B[A+2]<<16|4278190080}else{for(;y<v-2;y+=3,O+=4){const A=f[y],E=f[y+1],k=f[y+2];p[O]=A|255,p[O+1]=A<<24|E>>>8|255,p[O+2]=E<<16|k>>>16|255,p[O+3]=k<<8|255}for(let A=y*4,E=B.length;A<E;A+=3)p[O++]=B[A]<<24|B[A+1]<<16|B[A+2]<<8|255}return{srcPos:T,destPos:O}}function ct(B,T){if(h.FeatureTest.isLittleEndian)for(let p=0,O=B.length;p<O;p++)T[p]=B[p]*65793|4278190080;else for(let p=0,O=B.length;p<O;p++)T[p]=B[p]*16843008|255}},(bt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const nt=Object.create(null);u.GlobalWorkerOptions=nt,nt.workerPort=null,nt.workerSrc=""},(bt,u,nt)=>{var B,fi,p,pi,U,ye;Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var h=nt(1);const R={UNKNOWN:0,DATA:1,ERROR:2},it={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function J(y){switch(y instanceof Error||typeof y=="object"&&y!==null||(0,h.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),y.name){case"AbortException":return new h.AbortException(y.message);case"MissingPDFException":return new h.MissingPDFException(y.message);case"PasswordException":return new h.PasswordException(y.message,y.code);case"UnexpectedResponseException":return new h.UnexpectedResponseException(y.message,y.status);case"UnknownErrorException":return new h.UnknownErrorException(y.message,y.details);default:return new h.UnknownErrorException(y.message,y.toString())}}class ct{constructor(v,f,A){W(this,B);W(this,p);W(this,U);this.sourceName=v,this.targetName=f,this.comObj=A,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=E=>{const k=E.data;if(k.targetName!==this.sourceName)return;if(k.stream){Q(this,p,pi).call(this,k);return}if(k.callback){const n=k.callbackId,o=this.callbackCapabilities[n];if(!o)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],k.callback===R.DATA)o.resolve(k.data);else if(k.callback===R.ERROR)o.reject(J(k.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[k.action];if(!g)throw new Error(`Unknown action from worker: ${k.action}`);if(k.callbackId){const n=this.sourceName,o=k.sourceName;new Promise(function(F){F(g(k.data))}).then(function(F){A.postMessage({sourceName:n,targetName:o,callback:R.DATA,callbackId:k.callbackId,data:F})},function(F){A.postMessage({sourceName:n,targetName:o,callback:R.ERROR,callbackId:k.callbackId,reason:J(F)})});return}if(k.streamId){Q(this,B,fi).call(this,k);return}g(k.data)},A.addEventListener("message",this._onComObjOnMessage)}on(v,f){const A=this.actionHandler;if(A[v])throw new Error(`There is already an actionName called "${v}"`);A[v]=f}send(v,f,A){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,data:f},A)}sendWithPromise(v,f,A){const E=this.callbackId++,k=new h.PromiseCapability;this.callbackCapabilities[E]=k;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:v,callbackId:E,data:f},A)}catch(g){k.reject(g)}return k.promise}sendWithStream(v,f,A,E){const k=this.streamId++,g=this.sourceName,n=this.targetName,o=this.comObj;return new ReadableStream({start:F=>{const b=new h.PromiseCapability;return this.streamControllers[k]={controller:F,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:g,targetName:n,action:v,streamId:k,data:f,desiredSize:F.desiredSize},E),b.promise},pull:F=>{const b=new h.PromiseCapability;return this.streamControllers[k].pullCall=b,o.postMessage({sourceName:g,targetName:n,stream:it.PULL,streamId:k,desiredSize:F.desiredSize}),b.promise},cancel:F=>{(0,h.assert)(F instanceof Error,"cancel must have a valid reason");const b=new h.PromiseCapability;return this.streamControllers[k].cancelCall=b,this.streamControllers[k].isClosed=!0,o.postMessage({sourceName:g,targetName:n,stream:it.CANCEL,streamId:k,reason:J(F)}),b.promise}},A)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}B=new WeakSet,fi=function(v){const f=v.streamId,A=this.sourceName,E=v.sourceName,k=this.comObj,g=this,n=this.actionHandler[v.action],o={enqueue(F,b=1,s){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=b,l>0&&this.desiredSize<=0&&(this.sinkCapability=new h.PromiseCapability,this.ready=this.sinkCapability.promise),k.postMessage({sourceName:A,targetName:E,stream:it.ENQUEUE,streamId:f,chunk:F},s)},close(){this.isCancelled||(this.isCancelled=!0,k.postMessage({sourceName:A,targetName:E,stream:it.CLOSE,streamId:f}),delete g.streamSinks[f])},error(F){(0,h.assert)(F instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,k.postMessage({sourceName:A,targetName:E,stream:it.ERROR,streamId:f,reason:J(F)}))},sinkCapability:new h.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:v.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[f]=o,new Promise(function(F){F(n(v.data,o))}).then(function(){k.postMessage({sourceName:A,targetName:E,stream:it.START_COMPLETE,streamId:f,success:!0})},function(F){k.postMessage({sourceName:A,targetName:E,stream:it.START_COMPLETE,streamId:f,reason:J(F)})})},p=new WeakSet,pi=function(v){const f=v.streamId,A=this.sourceName,E=v.sourceName,k=this.comObj,g=this.streamControllers[f],n=this.streamSinks[f];switch(v.stream){case it.START_COMPLETE:v.success?g.startCall.resolve():g.startCall.reject(J(v.reason));break;case it.PULL_COMPLETE:v.success?g.pullCall.resolve():g.pullCall.reject(J(v.reason));break;case it.PULL:if(!n){k.postMessage({sourceName:A,targetName:E,stream:it.PULL_COMPLETE,streamId:f,success:!0});break}n.desiredSize<=0&&v.desiredSize>0&&n.sinkCapability.resolve(),n.desiredSize=v.desiredSize,new Promise(function(o){var F;o((F=n.onPull)==null?void 0:F.call(n))}).then(function(){k.postMessage({sourceName:A,targetName:E,stream:it.PULL_COMPLETE,streamId:f,success:!0})},function(o){k.postMessage({sourceName:A,targetName:E,stream:it.PULL_COMPLETE,streamId:f,reason:J(o)})});break;case it.ENQUEUE:if((0,h.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(v.chunk);break;case it.CLOSE:if((0,h.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),Q(this,U,ye).call(this,g,f);break;case it.ERROR:(0,h.assert)(g,"error should have stream controller"),g.controller.error(J(v.reason)),Q(this,U,ye).call(this,g,f);break;case it.CANCEL_COMPLETE:v.success?g.cancelCall.resolve():g.cancelCall.reject(J(v.reason)),Q(this,U,ye).call(this,g,f);break;case it.CANCEL:if(!n)break;new Promise(function(o){var F;o((F=n.onCancel)==null?void 0:F.call(n,J(v.reason)))}).then(function(){k.postMessage({sourceName:A,targetName:E,stream:it.CANCEL_COMPLETE,streamId:f,success:!0})},function(o){k.postMessage({sourceName:A,targetName:E,stream:it.CANCEL_COMPLETE,streamId:f,reason:J(o)})}),n.sinkCapability.reject(J(v.reason)),n.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}},U=new WeakSet,ye=async function(v,f){var A,E,k;await Promise.allSettled([(A=v.startCall)==null?void 0:A.promise,(E=v.pullCall)==null?void 0:E.promise,(k=v.cancelCall)==null?void 0:k.promise]),delete this.streamControllers[f]},u.MessageHandler=ct},(bt,u,nt)=>{var it,J;Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var h=nt(1);class R{constructor({parsedData:B,rawData:T}){W(this,it,void 0);W(this,J,void 0);rt(this,it,B),rt(this,J,T)}getRaw(){return t(this,J)}get(B){var T;return(T=t(this,it).get(B))!=null?T:null}getAll(){return(0,h.objectFromMap)(t(this,it))}has(B){return t(this,it).has(B)}}it=new WeakMap,J=new WeakMap,u.Metadata=R},(bt,u,nt)=>{var B,T,p,O,U,w,Ne;Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var h=nt(1),R=nt(8);const it=Symbol("INTERNAL");class J{constructor(f,A){W(this,B,!0);this.name=f,this.intent=A}get visible(){return t(this,B)}_setVisible(f,A){f!==it&&(0,h.unreachable)("Internal method `_setVisible` called."),rt(this,B,A)}}B=new WeakMap;class ct{constructor(f){W(this,w);W(this,T,null);W(this,p,new Map);W(this,O,null);W(this,U,null);if(this.name=null,this.creator=null,f!==null){this.name=f.name,this.creator=f.creator,rt(this,U,f.order);for(const A of f.groups)t(this,p).set(A.id,new J(A.name,A.intent));if(f.baseState==="OFF")for(const A of t(this,p).values())A._setVisible(it,!1);for(const A of f.on)t(this,p).get(A)._setVisible(it,!0);for(const A of f.off)t(this,p).get(A)._setVisible(it,!1);rt(this,O,this.getHash())}}isVisible(f){if(t(this,p).size===0)return!0;if(!f)return(0,h.warn)("Optional content group not defined."),!0;if(f.type==="OCG")return t(this,p).has(f.id)?t(this,p).get(f.id).visible:((0,h.warn)(`Optional content group not found: ${f.id}`),!0);if(f.type==="OCMD"){if(f.expression)return Q(this,w,Ne).call(this,f.expression);if(!f.policy||f.policy==="AnyOn"){for(const A of f.ids){if(!t(this,p).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(t(this,p).get(A).visible)return!0}return!1}else if(f.policy==="AllOn"){for(const A of f.ids){if(!t(this,p).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(!t(this,p).get(A).visible)return!1}return!0}else if(f.policy==="AnyOff"){for(const A of f.ids){if(!t(this,p).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(!t(this,p).get(A).visible)return!0}return!1}else if(f.policy==="AllOff"){for(const A of f.ids){if(!t(this,p).has(A))return(0,h.warn)(`Optional content group not found: ${A}`),!0;if(t(this,p).get(A).visible)return!1}return!0}return(0,h.warn)(`Unknown optional content policy ${f.policy}.`),!0}return(0,h.warn)(`Unknown group type ${f.type}.`),!0}setVisibility(f,A=!0){if(!t(this,p).has(f)){(0,h.warn)(`Optional content group not found: ${f}`);return}t(this,p).get(f)._setVisible(it,!!A),rt(this,T,null)}get hasInitialVisibility(){return this.getHash()===t(this,O)}getOrder(){return t(this,p).size?t(this,U)?t(this,U).slice():[...t(this,p).keys()]:null}getGroups(){return t(this,p).size>0?(0,h.objectFromMap)(t(this,p)):null}getGroup(f){return t(this,p).get(f)||null}getHash(){if(t(this,T)!==null)return t(this,T);const f=new R.MurmurHash3_64;for(const[A,E]of t(this,p))f.update(`${A}:${E.visible}`);return rt(this,T,f.hexdigest())}}T=new WeakMap,p=new WeakMap,O=new WeakMap,U=new WeakMap,w=new WeakSet,Ne=function(f){const A=f.length;if(A<2)return!0;const E=f[0];for(let k=1;k<A;k++){const g=f[k];let n;if(Array.isArray(g))n=Q(this,w,Ne).call(this,g);else if(t(this,p).has(g))n=t(this,p).get(g).visible;else return(0,h.warn)(`Optional content group not found: ${g}`),!0;switch(E){case"And":if(!n)return!1;break;case"Or":if(n)return!0;break;case"Not":return!n;default:return!0}}return E==="And"},u.OptionalContentConfig=ct},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var h=nt(1),R=nt(6);class it{constructor({length:T,initialData:p,progressiveDone:O=!1,contentDispositionFilename:U=null,disableRange:w=!1,disableStream:y=!1},v){if((0,h.assert)(v,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=O,this._contentDispositionFilename=U,(p==null?void 0:p.length)>0){const f=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;this._queuedChunks.push(f)}this._pdfDataRangeTransport=v,this._isStreamingSupported=!y,this._isRangeSupported=!w,this._contentLength=T,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((f,A)=>{this._onReceiveData({begin:f,chunk:A})}),this._pdfDataRangeTransport.addProgressListener((f,A)=>{this._onProgress({loaded:f,total:A})}),this._pdfDataRangeTransport.addProgressiveReadListener(f=>{this._onReceiveData({chunk:f})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:T,chunk:p}){const O=p instanceof Uint8Array&&p.byteLength===p.buffer.byteLength?p.buffer:new Uint8Array(p).buffer;if(T===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(O):this._queuedChunks.push(O);else{const U=this._rangeReaders.some(function(w){return w._begin!==T?!1:(w._enqueue(O),!0)});(0,h.assert)(U,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var T,p;return(p=(T=this._fullRequestReader)==null?void 0:T._loaded)!=null?p:0}_onProgress(T){var p,O,U,w;T.total===void 0?(O=(p=this._rangeReaders[0])==null?void 0:p.onProgress)==null||O.call(p,{loaded:T.loaded}):(w=(U=this._fullRequestReader)==null?void 0:U.onProgress)==null||w.call(U,{loaded:T.loaded,total:T.total})}_onProgressiveDone(){var T;(T=this._fullRequestReader)==null||T.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(T){const p=this._rangeReaders.indexOf(T);p>=0&&this._rangeReaders.splice(p,1)}getFullReader(){(0,h.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const T=this._queuedChunks;return this._queuedChunks=null,new J(this,T,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(T,p){if(p<=this._progressiveDataLength)return null;const O=new ct(this,T,p);return this._pdfDataRangeTransport.requestDataRange(T,p),this._rangeReaders.push(O),O}cancelAllRequests(T){var p;(p=this._fullRequestReader)==null||p.cancel(T);for(const O of this._rangeReaders.slice(0))O.cancel(T);this._pdfDataRangeTransport.abort()}}u.PDFDataTransportStream=it;class J{constructor(T,p,O=!1,U=null){this._stream=T,this._done=O||!1,this._filename=(0,R.isPdfFile)(U)?U:null,this._queuedChunks=p||[],this._loaded=0;for(const w of this._queuedChunks)this._loaded+=w.byteLength;this._requests=[],this._headersReady=Promise.resolve(),T._fullRequestReader=this,this.onProgress=null}_enqueue(T){this._done||(this._requests.length>0?this._requests.shift().resolve({value:T,done:!1}):this._queuedChunks.push(T),this._loaded+=T.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const T=new h.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ct{constructor(T,p,O){this._stream=T,this._begin=p,this._end=O,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(T){if(!this._done){if(this._requests.length===0)this._queuedChunk=T;else{this._requests.shift().resolve({value:T,done:!1});for(const O of this._requests)O.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const p=this._queuedChunk;return this._queuedChunk=null,{value:p,done:!1}}if(this._done)return{value:void 0,done:!0};const T=new h.PromiseCapability;return this._requests.push(T),T.promise}cancel(T){this._done=!0;for(const p of this._requests)p.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var h=nt(1),R=nt(20);function it(O,U,w){return{method:"GET",headers:O,signal:w.signal,mode:"cors",credentials:U?"include":"same-origin",redirect:"follow"}}function J(O){const U=new Headers;for(const w in O){const y=O[w];y!==void 0&&U.append(w,y)}return U}function ct(O){return O instanceof Uint8Array?O.buffer:O instanceof ArrayBuffer?O:((0,h.warn)(`getArrayBuffer - unexpected data format: ${O}`),new Uint8Array(O).buffer)}class B{constructor(U){this.source=U,this.isHttp=/^https?:/i.test(U.url),this.httpHeaders=this.isHttp&&U.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var U,w;return(w=(U=this._fullRequestReader)==null?void 0:U._loaded)!=null?w:0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(U,w){if(w<=this._progressiveDataLength)return null;const y=new p(this,U,w);return this._rangeRequestReaders.push(y),y}cancelAllRequests(U){var w;(w=this._fullRequestReader)==null||w.cancel(U);for(const y of this._rangeRequestReaders.slice(0))y.cancel(U)}}u.PDFFetchStream=B;class T{constructor(U){this._stream=U,this._reader=null,this._loaded=0,this._filename=null;const w=U.source;this._withCredentials=w.withCredentials||!1,this._contentLength=w.length,this._headersCapability=new h.PromiseCapability,this._disableRange=w.disableRange||!1,this._rangeChunkSize=w.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!w.disableStream,this._isRangeSupported=!w.disableRange,this._headers=J(this._stream.httpHeaders);const y=w.url;fetch(y,it(this._headers,this._withCredentials,this._abortController)).then(v=>{if(!(0,R.validateResponseStatus)(v.status))throw(0,R.createResponseStatusError)(v.status,y);this._reader=v.body.getReader(),this._headersCapability.resolve();const f=k=>v.headers.get(k),{allowRangeRequests:A,suggestedLength:E}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=A,this._contentLength=E||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(f),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new h.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;await this._headersCapability.promise;const{value:U,done:w}=await this._reader.read();return w?{value:U,done:w}:(this._loaded+=U.byteLength,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded,total:this._contentLength}),{value:ct(U),done:!1})}cancel(U){var w;(w=this._reader)==null||w.cancel(U),this._abortController.abort()}}class p{constructor(U,w,y){this._stream=U,this._reader=null,this._loaded=0;const v=U.source;this._withCredentials=v.withCredentials||!1,this._readCapability=new h.PromiseCapability,this._isStreamingSupported=!v.disableStream,this._abortController=new AbortController,this._headers=J(this._stream.httpHeaders),this._headers.append("Range",`bytes=${w}-${y-1}`);const f=v.url;fetch(f,it(this._headers,this._withCredentials,this._abortController)).then(A=>{if(!(0,R.validateResponseStatus)(A.status))throw(0,R.createResponseStatusError)(A.status,f);this._readCapability.resolve(),this._reader=A.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var y;await this._readCapability.promise;const{value:U,done:w}=await this._reader.read();return w?{value:U,done:w}:(this._loaded+=U.byteLength,(y=this.onProgress)==null||y.call(this,{loaded:this._loaded}),{value:ct(U),done:!1})}cancel(U){var w;(w=this._reader)==null||w.cancel(U),this._abortController.abort()}}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=B,u.extractFilenameFromHeader=ct,u.validateRangeRequestCapabilities=J,u.validateResponseStatus=T;var h=nt(1),R=nt(21),it=nt(6);function J({getResponseHeader:p,isHttp:O,rangeChunkSize:U,disableRange:w}){const y={allowRangeRequests:!1,suggestedLength:void 0},v=parseInt(p("Content-Length"),10);return!Number.isInteger(v)||(y.suggestedLength=v,v<=2*U)||w||!O||p("Accept-Ranges")!=="bytes"||(p("Content-Encoding")||"identity")!=="identity"||(y.allowRangeRequests=!0),y}function ct(p){const O=p("Content-Disposition");if(O){let U=(0,R.getFilenameFromContentDispositionHeader)(O);if(U.includes("%"))try{U=decodeURIComponent(U)}catch{}if((0,it.isPdfFile)(U))return U}return null}function B(p,O){return p===404||p===0&&O.startsWith("file:")?new h.MissingPDFException('Missing PDF "'+O+'".'):new h.UnexpectedResponseException(`Unexpected server response (${p}) while retrieving PDF "${O}".`,p)}function T(p){return p===200||p===206}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=R;var h=nt(1);function R(it){let J=!0,ct=B("filename\\*","i").exec(it);if(ct){ct=ct[1];let v=U(ct);return v=unescape(v),v=w(v),v=y(v),p(v)}if(ct=O(it),ct){const v=y(ct);return p(v)}if(ct=B("filename","i").exec(it),ct){ct=ct[1];let v=U(ct);return v=y(v),p(v)}function B(v,f){return new RegExp("(?:^|;)\\s*"+v+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function T(v,f){if(v){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const A=new TextDecoder(v,{fatal:!0}),E=(0,h.stringToBytes)(f);f=A.decode(E),J=!1}catch{}}return f}function p(v){return J&&/[\x80-\xff]/.test(v)&&(v=T("utf-8",v),J&&(v=T("iso-8859-1",v))),v}function O(v){const f=[];let A;const E=B("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(A=E.exec(v))!==null;){let[,g,n,o]=A;if(g=parseInt(g,10),g in f){if(g===0)break;continue}f[g]=[n,o]}const k=[];for(let g=0;g<f.length&&g in f;++g){let[n,o]=f[g];o=U(o),n&&(o=unescape(o),g===0&&(o=w(o))),k.push(o)}return k.join("")}function U(v){if(v.startsWith('"')){const f=v.slice(1).split('\\"');for(let A=0;A<f.length;++A){const E=f[A].indexOf('"');E!==-1&&(f[A]=f[A].slice(0,E),f.length=A+1),f[A]=f[A].replaceAll(/\\(.)/g,"$1")}v=f.join('"')}return v}function w(v){const f=v.indexOf("'");if(f===-1)return v;const A=v.slice(0,f),k=v.slice(f+1).replace(/^[^']*'/,"");return T(A,k)}function y(v){return!v.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(v)?v:v.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,A,E,k){if(E==="q"||E==="Q")return k=k.replaceAll("_"," "),k=k.replaceAll(/=([0-9a-fA-F]{2})/g,function(g,n){return String.fromCharCode(parseInt(n,16))}),T(A,k);try{k=atob(k)}catch{}return T(A,k)})}return""}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var h=nt(1),R=nt(20);const it=200,J=206;function ct(U){const w=U.response;return typeof w!="string"?w:(0,h.stringToBytes)(w).buffer}class B{constructor(w,y={}){this.url=w,this.isHttp=/^https?:/i.test(w),this.httpHeaders=this.isHttp&&y.httpHeaders||Object.create(null),this.withCredentials=y.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(w,y,v){const f={begin:w,end:y};for(const A in v)f[A]=v[A];return this.request(f)}requestFull(w){return this.request(w)}request(w){const y=new XMLHttpRequest,v=this.currXhrId++,f=this.pendingRequests[v]={xhr:y};y.open("GET",this.url),y.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const E=this.httpHeaders[A];E!==void 0&&y.setRequestHeader(A,E)}return this.isHttp&&"begin"in w&&"end"in w?(y.setRequestHeader("Range",`bytes=${w.begin}-${w.end-1}`),f.expectedStatus=J):f.expectedStatus=it,y.responseType="arraybuffer",w.onError&&(y.onerror=function(A){w.onError(y.status)}),y.onreadystatechange=this.onStateChange.bind(this,v),y.onprogress=this.onProgress.bind(this,v),f.onHeadersReceived=w.onHeadersReceived,f.onDone=w.onDone,f.onError=w.onError,f.onProgress=w.onProgress,y.send(null),v}onProgress(w,y){var f;const v=this.pendingRequests[w];!v||(f=v.onProgress)==null||f.call(v,y)}onStateChange(w,y){var g,n,o;const v=this.pendingRequests[w];if(!v)return;const f=v.xhr;if(f.readyState>=2&&v.onHeadersReceived&&(v.onHeadersReceived(),delete v.onHeadersReceived),f.readyState!==4||!(w in this.pendingRequests))return;if(delete this.pendingRequests[w],f.status===0&&this.isHttp){(g=v.onError)==null||g.call(v,f.status);return}const A=f.status||it;if(!(A===it&&v.expectedStatus===J)&&A!==v.expectedStatus){(n=v.onError)==null||n.call(v,f.status);return}const k=ct(f);if(A===J){const F=f.getResponseHeader("Content-Range"),b=/bytes (\d+)-(\d+)\/(\d+)/.exec(F);v.onDone({begin:parseInt(b[1],10),chunk:k})}else k?v.onDone({begin:0,chunk:k}):(o=v.onError)==null||o.call(v,f.status)}getRequestXhr(w){return this.pendingRequests[w].xhr}isPendingRequest(w){return w in this.pendingRequests}abortRequest(w){const y=this.pendingRequests[w].xhr;delete this.pendingRequests[w],y.abort()}}class T{constructor(w){this._source=w,this._manager=new B(w.url,{httpHeaders:w.httpHeaders,withCredentials:w.withCredentials}),this._rangeChunkSize=w.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(w){const y=this._rangeRequestReaders.indexOf(w);y>=0&&this._rangeRequestReaders.splice(y,1)}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new p(this._manager,this._source),this._fullRequestReader}getRangeReader(w,y){const v=new O(this._manager,w,y);return v.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(v),v}cancelAllRequests(w){var y;(y=this._fullRequestReader)==null||y.cancel(w);for(const v of this._rangeRequestReaders.slice(0))v.cancel(w)}}u.PDFNetworkStream=T;class p{constructor(w,y){this._manager=w;const v={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=y.url,this._fullRequestId=w.requestFull(v),this._headersReceivedCapability=new h.PromiseCapability,this._disableRange=y.disableRange||!1,this._contentLength=y.length,this._rangeChunkSize=y.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const w=this._fullRequestId,y=this._manager.getRequestXhr(w),v=E=>y.getResponseHeader(E),{allowRangeRequests:f,suggestedLength:A}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:v,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});f&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(v),this._isRangeSupported&&this._manager.abortRequest(w),this._headersReceivedCapability.resolve()}_onDone(w){if(w&&(this._requests.length>0?this._requests.shift().resolve({value:w.chunk,done:!1}):this._cachedChunks.push(w.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(w){this._storedError=(0,R.createResponseStatusError)(w,this._url),this._headersReceivedCapability.reject(this._storedError);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(w){var y;(y=this.onProgress)==null||y.call(this,{loaded:w.loaded,total:w.lengthComputable?w.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const w=new h.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0,this._headersReceivedCapability.reject(w);for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class O{constructor(w,y,v){this._manager=w;const f={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=w.url,this._requestId=w.requestRange(y,v,f),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var w;(w=this.onClosed)==null||w.call(this,this)}_onDone(w){const y=w.chunk;this._requests.length>0?this._requests.shift().resolve({value:y,done:!1}):this._queuedChunk=y,this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(w){this._storedError=(0,R.createResponseStatusError)(w,this._url);for(const y of this._requests)y.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(w){var y;this.isStreamingSupported||(y=this.onProgress)==null||y.call(this,{loaded:w.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const y=this._queuedChunk;return this._queuedChunk=null,{value:y,done:!1}}if(this._done)return{value:void 0,done:!0};const w=new h.PromiseCapability;return this._requests.push(w),w.promise}cancel(w){this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var h=nt(1),R=nt(20);const it=/^file:\/\/\/[a-zA-Z]:\//;function J(v){const f=require$$5,A=f.parse(v);return A.protocol==="file:"||A.host?A:/^[a-z]:[/\\]/i.test(v)?f.parse(`file:///${v}`):(A.host||(A.protocol="file:"),A)}class ct{constructor(f){this.source=f,this.url=J(f.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&f.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var f,A;return(A=(f=this._fullRequestReader)==null?void 0:f._loaded)!=null?A:0}getFullReader(){return(0,h.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new w(this):new O(this),this._fullRequestReader}getRangeReader(f,A){if(A<=this._progressiveDataLength)return null;const E=this.isFsUrl?new y(this,f,A):new U(this,f,A);return this._rangeRequestReaders.push(E),E}cancelAllRequests(f){var A;(A=this._fullRequestReader)==null||A.cancel(f);for(const E of this._rangeRequestReaders.slice(0))E.cancel(f)}}u.PDFNodeStream=ct;class B{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null;const A=f.source;this._contentLength=A.length,this._loaded=0,this._filename=null,this._disableRange=A.disableRange||!1,this._rangeChunkSize=A.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._readableStream=null,this._readCapability=new h.PromiseCapability,this._headersCapability=new h.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=f.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",A=>{this._error(A)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new h.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class T{constructor(f){this._url=f.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new h.PromiseCapability;const A=f.source;this._isStreamingSupported=!A.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var E;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const f=this._readableStream.read();return f===null?(this._readCapability=new h.PromiseCapability,this.read()):(this._loaded+=f.length,(E=this.onProgress)==null||E.call(this,{loaded:this._loaded}),{value:new Uint8Array(f).buffer,done:!1})}cancel(f){if(!this._readableStream){this._error(f);return}this._readableStream.destroy(f)}_error(f){this._storedError=f,this._readCapability.resolve()}_setReadableStream(f){this._readableStream=f,f.on("readable",()=>{this._readCapability.resolve()}),f.on("end",()=>{f.destroy(),this._done=!0,this._readCapability.resolve()}),f.on("error",A=>{this._error(A)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(v,f){return{protocol:v.protocol,auth:v.auth,host:v.hostname,port:v.port,path:v.path,method:"GET",headers:f}}class O extends B{constructor(f){super(f);const A=E=>{if(E.statusCode===404){const o=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=o,this._headersCapability.reject(o);return}this._headersCapability.resolve(),this._setReadableStream(E);const k=o=>this._readableStream.headers[o.toLowerCase()],{allowRangeRequests:g,suggestedLength:n}=(0,R.validateRangeRequestCapabilities)({getResponseHeader:k,isHttp:f.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=g,this._contentLength=n||this._contentLength,this._filename=(0,R.extractFilenameFromHeader)(k)};if(this._request=null,this._url.protocol==="http:"){const E=require$$5;this._request=E.request(p(this._url,f.httpHeaders),A)}else{const E=require$$5;this._request=E.request(p(this._url,f.httpHeaders),A)}this._request.on("error",E=>{this._storedError=E,this._headersCapability.reject(E)}),this._request.end()}}class U extends T{constructor(f,A,E){super(f),this._httpHeaders={};for(const g in f.httpHeaders){const n=f.httpHeaders[g];n!==void 0&&(this._httpHeaders[g]=n)}this._httpHeaders.Range=`bytes=${A}-${E-1}`;const k=g=>{if(g.statusCode===404){const n=new h.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=n;return}this._setReadableStream(g)};if(this._request=null,this._url.protocol==="http:"){const g=require$$5;this._request=g.request(p(this._url,this._httpHeaders),k)}else{const g=require$$5;this._request=g.request(p(this._url,this._httpHeaders),k)}this._request.on("error",g=>{this._storedError=g}),this._request.end()}}class w extends B{constructor(f){super(f);let A=decodeURIComponent(this._url.path);it.test(this._url.href)&&(A=A.replace(/^\//,""));const E=require$$5;E.lstat(A,(k,g)=>{if(k){k.code==="ENOENT"&&(k=new h.MissingPDFException(`Missing PDF "${A}".`)),this._storedError=k,this._headersCapability.reject(k);return}this._contentLength=g.size,this._setReadableStream(E.createReadStream(A)),this._headersCapability.resolve()})}}class y extends T{constructor(f,A,E){super(f);let k=decodeURIComponent(this._url.path);it.test(this._url.href)&&(k=k.replace(/^\//,""));const g=require$$5;this._setReadableStream(g.createReadStream(k,{start:A,end:E-1}))}}},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var h=nt(6),R=nt(1);const it={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},J="http://www.w3.org/XML/1998/namespace",ct="http://www.w3.org/1999/xlink",B=["butt","round","square"],T=["miter","round","bevel"],p=function(g,n="",o=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!o)return URL.createObjectURL(new Blob([g],{type:n}));const F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let b=`data:${n};base64,`;for(let s=0,l=g.length;s<l;s+=3){const r=g[s]&255,M=g[s+1]&255,L=g[s+2]&255,q=r>>2,_=(r&3)<<4|M>>4,G=s+1<l?(M&15)<<2|L>>6:64,D=s+2<l?L&63:64;b+=F[q]+F[_]+F[G]+F[D]}return b},O=function(){const g=new Uint8Array([137,80,78,71,13,10,26,10]),n=12,o=new Int32Array(256);for(let L=0;L<256;L++){let q=L;for(let _=0;_<8;_++)q=q&1?3988292384^q>>1&2147483647:q>>1&2147483647;o[L]=q}function F(L,q,_){let G=-1;for(let D=q;D<_;D++){const x=(G^L[D])&255,$=o[x];G=G>>>8^$}return G^-1}function b(L,q,_,G){let D=G;const x=q.length;_[D]=x>>24&255,_[D+1]=x>>16&255,_[D+2]=x>>8&255,_[D+3]=x&255,D+=4,_[D]=L.charCodeAt(0)&255,_[D+1]=L.charCodeAt(1)&255,_[D+2]=L.charCodeAt(2)&255,_[D+3]=L.charCodeAt(3)&255,D+=4,_.set(q,D),D+=q.length;const $=F(_,G+4,D);_[D]=$>>24&255,_[D+1]=$>>16&255,_[D+2]=$>>8&255,_[D+3]=$&255}function s(L,q,_){let G=1,D=0;for(let x=q;x<_;++x)G=(G+(L[x]&255))%65521,D=(D+G)%65521;return D<<16|G}function l(L){if(!R.isNodeJS)return r(L);try{const q=parseInt(process.versions.node)>=8?L:Buffer.from(L),_=require$$5.deflateSync(q,{level:9});return _ instanceof Uint8Array?_:new Uint8Array(_)}catch(q){(0,R.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+q)}return r(L)}function r(L){let q=L.length;const _=65535,G=Math.ceil(q/_),D=new Uint8Array(2+q+G*5+4);let x=0;D[x++]=120,D[x++]=156;let $=0;for(;q>_;)D[x++]=0,D[x++]=255,D[x++]=255,D[x++]=0,D[x++]=0,D.set(L.subarray($,$+_),x),x+=_,$+=_,q-=_;D[x++]=1,D[x++]=q&255,D[x++]=q>>8&255,D[x++]=~q&65535&255,D[x++]=(~q&65535)>>8&255,D.set(L.subarray($),x),x+=L.length-$;const et=s(L,0,L.length);return D[x++]=et>>24&255,D[x++]=et>>16&255,D[x++]=et>>8&255,D[x++]=et&255,D}function M(L,q,_,G){const D=L.width,x=L.height;let $,et,pt;const _t=L.data;switch(q){case R.ImageKind.GRAYSCALE_1BPP:et=0,$=1,pt=D+7>>3;break;case R.ImageKind.RGB_24BPP:et=2,$=8,pt=D*3;break;case R.ImageKind.RGBA_32BPP:et=6,$=8,pt=D*4;break;default:throw new Error("invalid format")}const I=new Uint8Array((1+pt)*x);let i=0,e=0;for(let Y=0;Y<x;++Y)I[i++]=0,I.set(_t.subarray(e,e+pt),i),e+=pt,i+=pt;if(q===R.ImageKind.GRAYSCALE_1BPP&&G){i=0;for(let Y=0;Y<x;Y++){i++;for(let dt=0;dt<pt;dt++)I[i++]^=255}}const m=new Uint8Array([D>>24&255,D>>16&255,D>>8&255,D&255,x>>24&255,x>>16&255,x>>8&255,x&255,$,et,0,0,0]),N=l(I),P=g.length+n*3+m.length+N.length,H=new Uint8Array(P);let z=0;return H.set(g,z),z+=g.length,b("IHDR",m,H,z),z+=n+m.length,b("IDATA",N,H,z),z+=n+N.length,b("IEND",new Uint8Array(0),H,z),p(H,"image/png",_)}return function(q,_,G){const D=q.kind===void 0?R.ImageKind.GRAYSCALE_1BPP:q.kind;return M(q,D,_,G)}}();class U{constructor(){this.fontSizeScale=1,this.fontWeight=it.fontWeight,this.fontSize=0,this.textMatrix=R.IDENTITY_MATRIX,this.fontMatrix=R.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=R.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=it.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(n,o){this.x=n,this.y=o}}function w(g){let n=[];const o=[];for(const F of g){if(F.fn==="save"){n.push({fnId:92,fn:"group",items:[]}),o.push(n),n=n.at(-1).items;continue}F.fn==="restore"?n=o.pop():n.push(F)}return n}function y(g){if(Number.isInteger(g))return g.toString();const n=g.toFixed(10);let o=n.length-1;if(n[o]!=="0")return n;do o--;while(n[o]==="0");return n.substring(0,n[o]==="."?o:o+1)}function v(g){if(g[4]===0&&g[5]===0){if(g[1]===0&&g[2]===0)return g[0]===1&&g[3]===1?"":`scale(${y(g[0])} ${y(g[3])})`;if(g[0]===g[3]&&g[1]===-g[2]){const n=Math.acos(g[0])*180/Math.PI;return`rotate(${y(n)})`}}else if(g[0]===1&&g[1]===0&&g[2]===0&&g[3]===1)return`translate(${y(g[4])} ${y(g[5])})`;return`matrix(${y(g[0])} ${y(g[1])} ${y(g[2])} ${y(g[3])} ${y(g[4])} ${y(g[5])})`}let f=0,A=0,E=0;class k{constructor(n,o,F=!1){(0,h.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new h.DOMSVGFactory,this.current=new U,this.transformMatrix=R.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!F,this._operatorIdMapping=[];for(const b in R.OPS)this._operatorIdMapping[R.OPS[b]]=b}getObject(n,o=null){return typeof n=="string"?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):o}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const o=n.fnArray,F=n.argsArray;for(let b=0,s=o.length;b<s;b++)if(o[b]===R.OPS.dependency)for(const l of F[b]){const r=l.startsWith("g_")?this.commonObjs:this.objs,M=new Promise(L=>{r.get(l,L)});this.current.dependencies.push(M)}return Promise.all(this.current.dependencies)}transform(n,o,F,b,s,l){const r=[n,o,F,b,s,l];this.transformMatrix=R.Util.transform(this.transformMatrix,r),this.tgrp=null}getSVG(n,o){this.viewport=o;const F=this._initialize(o);return this.loadDependencies(n).then(()=>(this.transformMatrix=R.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),F))}convertOpList(n){const o=this._operatorIdMapping,F=n.argsArray,b=n.fnArray,s=[];for(let l=0,r=b.length;l<r;l++){const M=b[l];s.push({fnId:M,fn:o[M],args:F[l]})}return w(s)}executeOpTree(n){for(const o of n){const F=o.fn,b=o.fnId,s=o.args;switch(b|0){case R.OPS.beginText:this.beginText();break;case R.OPS.dependency:break;case R.OPS.setLeading:this.setLeading(s);break;case R.OPS.setLeadingMoveText:this.setLeadingMoveText(s[0],s[1]);break;case R.OPS.setFont:this.setFont(s);break;case R.OPS.showText:this.showText(s[0]);break;case R.OPS.showSpacedText:this.showText(s[0]);break;case R.OPS.endText:this.endText();break;case R.OPS.moveText:this.moveText(s[0],s[1]);break;case R.OPS.setCharSpacing:this.setCharSpacing(s[0]);break;case R.OPS.setWordSpacing:this.setWordSpacing(s[0]);break;case R.OPS.setHScale:this.setHScale(s[0]);break;case R.OPS.setTextMatrix:this.setTextMatrix(s[0],s[1],s[2],s[3],s[4],s[5]);break;case R.OPS.setTextRise:this.setTextRise(s[0]);break;case R.OPS.setTextRenderingMode:this.setTextRenderingMode(s[0]);break;case R.OPS.setLineWidth:this.setLineWidth(s[0]);break;case R.OPS.setLineJoin:this.setLineJoin(s[0]);break;case R.OPS.setLineCap:this.setLineCap(s[0]);break;case R.OPS.setMiterLimit:this.setMiterLimit(s[0]);break;case R.OPS.setFillRGBColor:this.setFillRGBColor(s[0],s[1],s[2]);break;case R.OPS.setStrokeRGBColor:this.setStrokeRGBColor(s[0],s[1],s[2]);break;case R.OPS.setStrokeColorN:this.setStrokeColorN(s);break;case R.OPS.setFillColorN:this.setFillColorN(s);break;case R.OPS.shadingFill:this.shadingFill(s[0]);break;case R.OPS.setDash:this.setDash(s[0],s[1]);break;case R.OPS.setRenderingIntent:this.setRenderingIntent(s[0]);break;case R.OPS.setFlatness:this.setFlatness(s[0]);break;case R.OPS.setGState:this.setGState(s[0]);break;case R.OPS.fill:this.fill();break;case R.OPS.eoFill:this.eoFill();break;case R.OPS.stroke:this.stroke();break;case R.OPS.fillStroke:this.fillStroke();break;case R.OPS.eoFillStroke:this.eoFillStroke();break;case R.OPS.clip:this.clip("nonzero");break;case R.OPS.eoClip:this.clip("evenodd");break;case R.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case R.OPS.paintImageXObject:this.paintImageXObject(s[0]);break;case R.OPS.paintInlineImageXObject:this.paintInlineImageXObject(s[0]);break;case R.OPS.paintImageMaskXObject:this.paintImageMaskXObject(s[0]);break;case R.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(s[0],s[1]);break;case R.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case R.OPS.closePath:this.closePath();break;case R.OPS.closeStroke:this.closeStroke();break;case R.OPS.closeFillStroke:this.closeFillStroke();break;case R.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case R.OPS.nextLine:this.nextLine();break;case R.OPS.transform:this.transform(s[0],s[1],s[2],s[3],s[4],s[5]);break;case R.OPS.constructPath:this.constructPath(s[0],s[1]);break;case R.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,R.warn)(`Unimplemented operator ${F}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,o,F,b,s,l){const r=this.current;r.textMatrix=r.lineMatrix=[n,o,F,b,s,l],r.textMatrixScale=Math.hypot(n,o),r.x=r.lineX=0,r.y=r.lineY=0,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${y(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",y(-r.y)),r.txtElement=this.svgFactory.createElement("svg:text"),r.txtElement.append(r.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=R.IDENTITY_MATRIX,n.lineMatrix=R.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,o){const F=this.current;F.x=F.lineX+=n,F.y=F.lineY+=o,F.xcoords=[],F.ycoords=[],F.tspan=this.svgFactory.createElement("svg:tspan"),F.tspan.setAttributeNS(null,"font-family",F.fontFamily),F.tspan.setAttributeNS(null,"font-size",`${y(F.fontSize)}px`),F.tspan.setAttributeNS(null,"y",y(-F.y))}showText(n){const o=this.current,F=o.font,b=o.fontSize;if(b===0)return;const s=o.fontSizeScale,l=o.charSpacing,r=o.wordSpacing,M=o.fontDirection,L=o.textHScale*M,q=F.vertical,_=q?1:-1,G=F.defaultVMetrics,D=b*o.fontMatrix[0];let x=0;for(const pt of n){if(pt===null){x+=M*r;continue}else if(typeof pt=="number"){x+=_*pt*b/1e3;continue}const _t=(pt.isSpace?r:0)+l,I=pt.fontChar;let i,e,m=pt.width;if(q){let P;const H=pt.vmetric||G;P=pt.vmetric?H[1]:m*.5,P=-P*D;const z=H[2]*D;m=H?-H[0]:m,i=P/s,e=(x+z)/s}else i=x/s,e=0;(pt.isInFont||F.missingFile)&&(o.xcoords.push(o.x+i),q&&o.ycoords.push(-o.y+e),o.tspan.textContent+=I);const N=q?m*D-_t*M:m*D+_t*M;x+=N}o.tspan.setAttributeNS(null,"x",o.xcoords.map(y).join(" ")),q?o.tspan.setAttributeNS(null,"y",o.ycoords.map(y).join(" ")):o.tspan.setAttributeNS(null,"y",y(-o.y)),q?o.y-=x:o.x+=x*L,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${y(o.fontSize)}px`),o.fontStyle!==it.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==it.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const $=o.textRenderingMode&R.TextRenderingMode.FILL_STROKE_MASK;if($===R.TextRenderingMode.FILL||$===R.TextRenderingMode.FILL_STROKE?(o.fillColor!==it.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===R.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),$===R.TextRenderingMode.STROKE||$===R.TextRenderingMode.FILL_STROKE){const pt=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,pt)}let et=o.textMatrix;o.textRise!==0&&(et=et.slice(),et[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${v(et)} scale(${y(L)}, -1)`),o.txtElement.setAttributeNS(J,"xml:space","preserve"),o.txtElement.append(o.tspan),o.txtgrp.append(o.txtElement),this._ensureTransformGroup().append(o.txtElement)}setLeadingMoveText(n,o){this.setLeading(-o),this.moveText(n,o)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const o=p(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${o}); }
`}setFont(n){const o=this.current,F=this.commonObjs.get(n[0]);let b=n[1];o.font=F,this.embedFonts&&!F.missingFile&&!this.embeddedFonts[F.loadedName]&&(this.addFontStyle(F),this.embeddedFonts[F.loadedName]=F),o.fontMatrix=F.fontMatrix||R.FONT_IDENTITY_MATRIX;let s="normal";F.black?s="900":F.bold&&(s="bold");const l=F.italic?"italic":"normal";b<0?(b=-b,o.fontDirection=-1):o.fontDirection=1,o.fontSize=b,o.fontFamily=F.loadedName,o.fontWeight=s,o.fontStyle=l,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",y(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){var o;const n=this.current;n.textRenderingMode&R.TextRenderingMode.ADD_TO_PATH_FLAG&&((o=n.txtElement)==null?void 0:o.hasChildNodes())&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=B[n]}setLineJoin(n){this.current.lineJoin=T[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,o,F){this.current.strokeColor=R.Util.makeHexColor(n,o,F)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,o,F){this.current.fillColor=R.Util.makeHexColor(n,o,F),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const{width:o,height:F}=this.viewport,b=R.Util.inverseTransform(this.transformMatrix),[s,l,r,M]=R.Util.getAxialAlignedBoundingBox([0,0,o,F],b),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",s),L.setAttributeNS(null,"y",l),L.setAttributeNS(null,"width",r-s),L.setAttributeNS(null,"height",M-l),L.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&L.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(L)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const o=n[1],F=n[2],b=n[3]||R.IDENTITY_MATRIX,[s,l,r,M]=n[4],L=n[5],q=n[6],_=n[7],G=`shading${E++}`,[D,x,$,et]=R.Util.normalizeRect([...R.Util.applyTransform([s,l],b),...R.Util.applyTransform([r,M],b)]),[pt,_t]=R.Util.singularValueDecompose2dScale(b),I=L*pt,i=q*_t,e=this.svgFactory.createElement("svg:pattern");e.setAttributeNS(null,"id",G),e.setAttributeNS(null,"patternUnits","userSpaceOnUse"),e.setAttributeNS(null,"width",I),e.setAttributeNS(null,"height",i),e.setAttributeNS(null,"x",`${D}`),e.setAttributeNS(null,"y",`${x}`);const m=this.svg,N=this.transformMatrix,P=this.current.fillColor,H=this.current.strokeColor,z=this.svgFactory.create($-D,et-x);if(this.svg=z,this.transformMatrix=b,_===2){const Y=R.Util.makeHexColor(...o);this.current.fillColor=Y,this.current.strokeColor=Y}return this.executeOpTree(this.convertOpList(F)),this.svg=m,this.transformMatrix=N,this.current.fillColor=P,this.current.strokeColor=H,e.append(z.childNodes[0]),this.defs.append(e),`url(#${G})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const o=`shading${E++}`,F=n[3];let b;switch(n[1]){case"axial":const s=n[4],l=n[5];b=this.svgFactory.createElement("svg:linearGradient"),b.setAttributeNS(null,"id",o),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"x1",s[0]),b.setAttributeNS(null,"y1",s[1]),b.setAttributeNS(null,"x2",l[0]),b.setAttributeNS(null,"y2",l[1]);break;case"radial":const r=n[4],M=n[5],L=n[6],q=n[7];b=this.svgFactory.createElement("svg:radialGradient"),b.setAttributeNS(null,"id",o),b.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),b.setAttributeNS(null,"cx",M[0]),b.setAttributeNS(null,"cy",M[1]),b.setAttributeNS(null,"r",q),b.setAttributeNS(null,"fx",r[0]),b.setAttributeNS(null,"fy",r[1]),b.setAttributeNS(null,"fr",L);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const s of F){const l=this.svgFactory.createElement("svg:stop");l.setAttributeNS(null,"offset",s[0]),l.setAttributeNS(null,"stop-color",s[1]),b.append(l)}return this.defs.append(b),`url(#${o})`;case"Mesh":return(0,R.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,o){this.current.dashArray=n,this.current.dashPhase=o}constructPath(n,o){const F=this.current;let b=F.x,s=F.y,l=[],r=0;for(const M of n)switch(M|0){case R.OPS.rectangle:b=o[r++],s=o[r++];const L=o[r++],q=o[r++],_=b+L,G=s+q;l.push("M",y(b),y(s),"L",y(_),y(s),"L",y(_),y(G),"L",y(b),y(G),"Z");break;case R.OPS.moveTo:b=o[r++],s=o[r++],l.push("M",y(b),y(s));break;case R.OPS.lineTo:b=o[r++],s=o[r++],l.push("L",y(b),y(s));break;case R.OPS.curveTo:b=o[r+4],s=o[r+5],l.push("C",y(o[r]),y(o[r+1]),y(o[r+2]),y(o[r+3]),y(b),y(s)),r+=6;break;case R.OPS.curveTo2:l.push("C",y(b),y(s),y(o[r]),y(o[r+1]),y(o[r+2]),y(o[r+3])),b=o[r+2],s=o[r+3],r+=4;break;case R.OPS.curveTo3:b=o[r+2],s=o[r+3],l.push("C",y(o[r]),y(o[r+1]),y(b),y(s),y(b),y(s)),r+=4;break;case R.OPS.closePath:l.push("Z");break}l=l.join(" "),F.path&&n.length>0&&n[0]!==R.OPS.rectangle&&n[0]!==R.OPS.moveTo?l=F.path.getAttributeNS(null,"d")+l:(F.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(F.path)),F.path.setAttributeNS(null,"d",l),F.path.setAttributeNS(null,"fill","none"),F.element=F.path,F.setCurrentPoint(b,s)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const o=`clippath${f++}`,F=this.svgFactory.createElement("svg:clipPath");F.setAttributeNS(null,"id",o),F.setAttributeNS(null,"transform",v(this.transformMatrix));const b=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?b.setAttributeNS(null,"clip-rule","evenodd"):b.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,F.append(b),this.defs.append(F),n.activeClipUrl){n.clipGroup=null;for(const s of this.extraStack)s.clipGroup=null;F.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const o=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",o)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[o,F]of n)switch(o){case"LW":this.setLineWidth(F);break;case"LC":this.setLineCap(F);break;case"LJ":this.setLineJoin(F);break;case"ML":this.setMiterLimit(F);break;case"D":this.setDash(F[0],F[1]);break;case"RI":this.setRenderingIntent(F);break;case"FL":this.setFlatness(F);break;case"Font":this.setFont(F);break;case"CA":this.setStrokeAlpha(F);break;case"ca":this.setFillAlpha(F);break;default:(0,R.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,o=1){const F=this.current;let b=F.dashArray;o!==1&&b.length>0&&(b=b.map(function(s){return o*s})),n.setAttributeNS(null,"stroke",F.strokeColor),n.setAttributeNS(null,"stroke-opacity",F.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",y(F.miterLimit)),n.setAttributeNS(null,"stroke-linecap",F.lineCap),n.setAttributeNS(null,"stroke-linejoin",F.lineJoin),n.setAttributeNS(null,"stroke-width",y(o*F.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",b.map(y).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",y(o*F.dashPhase)+"px")}eoFill(){var n;(n=this.current.element)==null||n.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var n;(n=this.current.element)==null||n.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const o=this.getObject(n);if(!o){(0,R.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(n,o){const F=n.width,b=n.height,s=O(n,this.forceDataSchema,!!o),l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",y(F)),l.setAttributeNS(null,"height",y(b)),this.current.element=l,this.clip("nonzero");const r=this.svgFactory.createElement("svg:image");r.setAttributeNS(ct,"xlink:href",s),r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y",y(-b)),r.setAttributeNS(null,"width",y(F)+"px"),r.setAttributeNS(null,"height",y(b)+"px"),r.setAttributeNS(null,"transform",`scale(${y(1/F)} ${y(-1/b)})`),o?o.append(r):this._ensureTransformGroup().append(r)}paintImageMaskXObject(n){const o=this.getObject(n.data,n);if(o.bitmap){(0,R.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const F=this.current,b=o.width,s=o.height,l=F.fillColor;F.maskId=`mask${A++}`;const r=this.svgFactory.createElement("svg:mask");r.setAttributeNS(null,"id",F.maskId);const M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x","0"),M.setAttributeNS(null,"y","0"),M.setAttributeNS(null,"width",y(b)),M.setAttributeNS(null,"height",y(s)),M.setAttributeNS(null,"fill",l),M.setAttributeNS(null,"mask",`url(#${F.maskId})`),this.defs.append(r),this._ensureTransformGroup().append(M),this.paintInlineImageXObject(o,r)}paintFormXObjectBegin(n,o){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),o){const F=o[2]-o[0],b=o[3]-o[1],s=this.svgFactory.createElement("svg:rect");s.setAttributeNS(null,"x",o[0]),s.setAttributeNS(null,"y",o[1]),s.setAttributeNS(null,"width",y(F)),s.setAttributeNS(null,"height",y(b)),this.current.element=s,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const o=this.svgFactory.create(n.width,n.height),F=this.svgFactory.createElement("svg:defs");o.append(F),this.defs=F;const b=this.svgFactory.createElement("svg:g");return b.setAttributeNS(null,"transform",v(n.transform)),o.append(b),this.svg=b,o}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",v(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}u.SVGGraphics=k},(bt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class nt{static textContent(R){const it=[],J={items:it,styles:Object.create(null)};function ct(B){var O;if(!B)return;let T=null;const p=B.name;if(p==="#text")T=B.value;else if(nt.shouldBuildText(p))(O=B==null?void 0:B.attributes)!=null&&O.textContent?T=B.attributes.textContent:B.value&&(T=B.value);else return;if(T!==null&&it.push({str:T}),!!B.children)for(const U of B.children)ct(U)}return ct(R),J}static shouldBuildText(R){return!(R==="textarea"||R==="input"||R==="option"||R==="select")}}u.XfaText=nt},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=v,u.updateTextLayer=f;var h=nt(1),R=nt(6);const it=1e5,J=30,ct=.8,B=new Map;function T(A,E){let k;if(E&&h.FeatureTest.isOffscreenCanvasSupported)k=new OffscreenCanvas(A,A).getContext("2d",{alpha:!1});else{const g=document.createElement("canvas");g.width=g.height=A,k=g.getContext("2d",{alpha:!1})}return k}function p(A,E){const k=B.get(A);if(k)return k;const g=T(J,E);g.font=`${J}px ${A}`;const n=g.measureText("");let o=n.fontBoundingBoxAscent,F=Math.abs(n.fontBoundingBoxDescent);if(o){const s=o/(o+F);return B.set(A,s),g.canvas.width=g.canvas.height=0,s}g.strokeStyle="red",g.clearRect(0,0,J,J),g.strokeText("g",0,0);let b=g.getImageData(0,0,J,J).data;F=0;for(let s=b.length-1-3;s>=0;s-=4)if(b[s]>0){F=Math.ceil(s/4/J);break}g.clearRect(0,0,J,J),g.strokeText("A",0,J),b=g.getImageData(0,0,J,J).data,o=0;for(let s=0,l=b.length;s<l;s+=4)if(b[s]>0){o=J-Math.floor(s/4/J);break}if(g.canvas.width=g.canvas.height=0,o){const s=o/(o+F);return B.set(A,s),s}return B.set(A,ct),ct}function O(A,E,k){const g=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:E.str!=="",hasEOL:E.hasEOL,fontSize:0};A._textDivs.push(g);const o=h.Util.transform(A._transform,E.transform);let F=Math.atan2(o[1],o[0]);const b=k[E.fontName];b.vertical&&(F+=Math.PI/2);const s=Math.hypot(o[2],o[3]),l=s*p(b.fontFamily,A._isOffscreenCanvasSupported);let r,M;F===0?(r=o[4],M=o[5]-l):(r=o[4]+l*Math.sin(F),M=o[5]-l*Math.cos(F));const L="calc(var(--scale-factor)*",q=g.style;A._container===A._rootContainer?(q.left=`${(100*r/A._pageWidth).toFixed(2)}%`,q.top=`${(100*M/A._pageHeight).toFixed(2)}%`):(q.left=`${L}${r.toFixed(2)}px)`,q.top=`${L}${M.toFixed(2)}px)`),q.fontSize=`${L}${s.toFixed(2)}px)`,q.fontFamily=b.fontFamily,n.fontSize=s,g.setAttribute("role","presentation"),g.textContent=E.str,g.dir=E.dir,A._fontInspectorEnabled&&(g.dataset.fontName=E.fontName),F!==0&&(n.angle=F*(180/Math.PI));let _=!1;if(E.str.length>1)_=!0;else if(E.str!==" "&&E.transform[0]!==E.transform[3]){const G=Math.abs(E.transform[0]),D=Math.abs(E.transform[3]);G!==D&&Math.max(G,D)/Math.min(G,D)>1.5&&(_=!0)}_&&(n.canvasWidth=b.vertical?E.height:E.width),A._textDivProperties.set(g,n),A._isReadableStream&&A._layoutText(g)}function U(A){const{div:E,scale:k,properties:g,ctx:n,prevFontSize:o,prevFontFamily:F}=A,{style:b}=E;let s="";if(g.canvasWidth!==0&&g.hasText){const{fontFamily:l}=b,{canvasWidth:r,fontSize:M}=g;(o!==M||F!==l)&&(n.font=`${M*k}px ${l}`,A.prevFontSize=M,A.prevFontFamily=l);const{width:L}=n.measureText(E.textContent);L>0&&(s=`scaleX(${r*k/L})`)}g.angle!==0&&(s=`rotate(${g.angle}deg) ${s}`),s.length>0&&(b.transform=s)}function w(A){if(A._canceled)return;const E=A._textDivs,k=A._capability;if(E.length>it){k.resolve();return}if(!A._isReadableStream)for(const n of E)A._layoutText(n);k.resolve()}class y{constructor({textContentSource:E,container:k,viewport:g,textDivs:n,textDivProperties:o,textContentItemsStr:F,isOffscreenCanvasSupported:b}){var L;this._textContentSource=E,this._isReadableStream=E instanceof ReadableStream,this._container=this._rootContainer=k,this._textDivs=n||[],this._textContentItemsStr=F||[],this._isOffscreenCanvasSupported=b,this._fontInspectorEnabled=!!((L=globalThis.FontInspector)!=null&&L.enabled),this._reader=null,this._textDivProperties=o||new WeakMap,this._canceled=!1,this._capability=new h.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:g.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:T(0,b)};const{pageWidth:s,pageHeight:l,pageX:r,pageY:M}=g.rawDims;this._transform=[1,0,0,-1,-r,M+l],this._pageWidth=s,this._pageHeight=l,(0,R.setLayerDimensions)(k,g),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new h.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new h.AbortException("TextLayer task cancelled."))}_processItems(E,k){for(const g of E){if(g.str===void 0){if(g.type==="beginMarkedContentProps"||g.type==="beginMarkedContent"){const n=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),g.id!==null&&this._container.setAttribute("id",`${g.id}`),n.append(this._container)}else g.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(g.str),O(this,g,k)}}_layoutText(E){const k=this._layoutTextParams.properties=this._textDivProperties.get(E);if(this._layoutTextParams.div=E,U(this._layoutTextParams),k.hasText&&this._container.append(E),k.hasEOL){const g=document.createElement("br");g.setAttribute("role","presentation"),this._container.append(g)}}_render(){const E=new h.PromiseCapability;let k=Object.create(null);if(this._isReadableStream){const g=()=>{this._reader.read().then(({value:n,done:o})=>{if(o){E.resolve();return}Object.assign(k,n.styles),this._processItems(n.items,k),g()},E.reject)};this._reader=this._textContentSource.getReader(),g()}else if(this._textContentSource){const{items:g,styles:n}=this._textContentSource;this._processItems(g,n),E.resolve()}else throw new Error('No "textContentSource" parameter specified.');E.promise.then(()=>{k=null,w(this)},this._capability.reject)}}u.TextLayerRenderTask=y;function v(A){!A.textContentSource&&(A.textContent||A.textContentStream)&&((0,R.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),A.textContentSource=A.textContent||A.textContentStream);const{container:E,viewport:k}=A,g=getComputedStyle(E),n=g.getPropertyValue("visibility"),o=parseFloat(g.getPropertyValue("--scale-factor"));n==="visible"&&(!o||Math.abs(o-k.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const F=new y(A);return F._render(),F}function f({container:A,viewport:E,textDivs:k,textDivProperties:g,isOffscreenCanvasSupported:n,mustRotate:o=!0,mustRescale:F=!0}){if(o&&(0,R.setLayerDimensions)(A,{rotation:E.rotation}),F){const b=T(0,n),l={prevFontSize:null,prevFontFamily:null,div:null,scale:E.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:b};for(const r of k)l.properties=g.get(r),l.div=r,U(l)}}},(bt,u,nt)=>{var O,U,w,y,v,f,A,E,k,g,n,Be,F,gi,s,Ue,r,je;Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var h=nt(1),R=nt(4),it=nt(5),J=nt(28),ct=nt(33),B=nt(6),T=nt(34);const L=class{constructor({uiManager:_,pageIndex:G,div:D,accessibilityManager:x,annotationLayer:$,viewport:et,l10n:pt}){W(this,n);W(this,F);W(this,s);W(this,r);W(this,O,void 0);W(this,U,!1);W(this,w,null);W(this,y,this.pointerup.bind(this));W(this,v,this.pointerdown.bind(this));W(this,f,new Map);W(this,A,!1);W(this,E,!1);W(this,k,!1);W(this,g,void 0);const _t=[J.FreeTextEditor,ct.InkEditor,T.StampEditor];if(!L._initialized){L._initialized=!0;for(const I of _t)I.initialize(pt)}_.registerEditorTypes(_t),rt(this,g,_),this.pageIndex=G,this.div=D,rt(this,O,x),rt(this,w,$),this.viewport=et,t(this,g).addLayer(this)}get isEmpty(){return t(this,f).size===0}updateToolbar(_){t(this,g).updateToolbar(_)}updateMode(_=t(this,g).getMode()){Q(this,r,je).call(this),_===h.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),t(this,g).unselectAll(),_!==h.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",_===h.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",_===h.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",_===h.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(_){if(!_&&t(this,g).getMode()!==h.AnnotationEditorType.INK)return;if(!_){for(const D of t(this,f).values())if(D.isEmpty()){D.setInBackground();return}}Q(this,s,Ue).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(_){t(this,g).setEditingState(_)}addCommands(_){t(this,g).addCommands(_)}enable(){this.div.style.pointerEvents="auto";const _=new Set;for(const D of t(this,f).values())D.enableEditing(),D.annotationElementId&&_.add(D.annotationElementId);if(!t(this,w))return;const G=t(this,w).getEditableAnnotations();for(const D of G){if(D.hide(),t(this,g).isDeletedAnnotationElement(D.data.id)||_.has(D.data.id))continue;const x=this.deserialize(D);!x||(this.addOrRebuild(x),x.enableEditing())}}disable(){var G;rt(this,k,!0),this.div.style.pointerEvents="none";const _=new Set;for(const D of t(this,f).values()){if(D.disableEditing(),!D.annotationElementId||D.serialize()!==null){_.add(D.annotationElementId);continue}(G=this.getEditableAnnotation(D.annotationElementId))==null||G.show(),D.remove()}if(t(this,w)){const D=t(this,w).getEditableAnnotations();for(const x of D){const{id:$}=x.data;_.has($)||t(this,g).isDeletedAnnotationElement($)||x.show()}}Q(this,r,je).call(this),this.isEmpty&&(this.div.hidden=!0),rt(this,k,!1)}getEditableAnnotation(_){var G;return((G=t(this,w))==null?void 0:G.getEditableAnnotation(_))||null}setActiveEditor(_){t(this,g).getActive()!==_&&t(this,g).setActiveEditor(_)}enableClick(){this.div.addEventListener("pointerdown",t(this,v)),this.div.addEventListener("pointerup",t(this,y))}disableClick(){this.div.removeEventListener("pointerdown",t(this,v)),this.div.removeEventListener("pointerup",t(this,y))}attach(_){t(this,f).set(_.id,_);const{annotationElementId:G}=_;G&&t(this,g).isDeletedAnnotationElement(G)&&t(this,g).removeDeletedAnnotationElement(_)}detach(_){var G;t(this,f).delete(_.id),(G=t(this,O))==null||G.removePointerInTextLayer(_.contentDiv),!t(this,k)&&_.annotationElementId&&t(this,g).addDeletedAnnotationElement(_)}remove(_){this.detach(_),t(this,g).removeEditor(_),_.div.style.display="none",setTimeout(()=>{_.div.style.display="",_.div.remove(),_.isAttachedToDOM=!1,document.activeElement===document.body&&t(this,g).focusMainContainer()},0),t(this,E)||this.addInkEditorIfNeeded(!1)}add(_){if(Q(this,n,Be).call(this,_),t(this,g).addEditor(_),this.attach(_),!_.isAttachedToDOM){const G=_.render();this.div.append(G),_.isAttachedToDOM=!0}this.moveEditorInDOM(_),_.onceAdded(),t(this,g).addToAnnotationStorage(_)}moveEditorInDOM(_){var G;(G=t(this,O))==null||G.moveElementInDOM(this.div,_.div,_.contentDiv,!0)}addOrRebuild(_){_.needsToBeRebuilt()?_.rebuild():this.add(_)}addUndoableEditor(_){const G=()=>{this.addOrRebuild(_)},D=()=>{_.remove()};this.addCommands({cmd:G,undo:D,mustExec:!1})}getNextId(){return t(this,g).getId()}deserialize(_){var G;switch((G=_.annotationType)!=null?G:_.annotationEditorType){case h.AnnotationEditorType.FREETEXT:return J.FreeTextEditor.deserialize(_,this,t(this,g));case h.AnnotationEditorType.INK:return ct.InkEditor.deserialize(_,this,t(this,g));case h.AnnotationEditorType.STAMP:return T.StampEditor.deserialize(_,this,t(this,g))}return null}setSelected(_){t(this,g).setSelected(_)}toggleSelected(_){t(this,g).toggleSelected(_)}isSelected(_){return t(this,g).isSelected(_)}unselect(_){t(this,g).unselect(_)}pointerup(_){const{isMac:G}=h.FeatureTest.platform;if(!(_.button!==0||_.ctrlKey&&G)&&_.target===this.div&&!!t(this,A)){if(rt(this,A,!1),!t(this,U)){rt(this,U,!0);return}Q(this,s,Ue).call(this,_)}}pointerdown(_){if(t(this,A)){rt(this,A,!1);return}const{isMac:G}=h.FeatureTest.platform;if(_.button!==0||_.ctrlKey&&G||_.target!==this.div)return;rt(this,A,!0);const D=t(this,g).getActive();rt(this,U,!D||D.isEmpty())}drop(_){const G=_.dataTransfer.getData("text/plain"),D=t(this,g).getEditor(G);if(!D)return;_.preventDefault(),_.dataTransfer.dropEffect="move",Q(this,n,Be).call(this,D);const x=this.div.getBoundingClientRect(),$=_.clientX-x.x,et=_.clientY-x.y;D.translate($-D.startX,et-D.startY),this.moveEditorInDOM(D),D.div.focus()}dragover(_){_.preventDefault()}destroy(){var _,G;((_=t(this,g).getActive())==null?void 0:_.parent)===this&&t(this,g).setActiveEditor(null);for(const D of t(this,f).values())(G=t(this,O))==null||G.removePointerInTextLayer(D.contentDiv),D.setParent(null),D.isAttachedToDOM=!1,D.div.remove();this.div=null,t(this,f).clear(),t(this,g).removeLayer(this)}render({viewport:_}){this.viewport=_,(0,B.setLayerDimensions)(this.div,_),(0,it.bindEvents)(this,this.div,["dragover","drop"]);for(const G of t(this,g).getEditors(this.pageIndex))this.add(G);this.updateMode()}update({viewport:_}){t(this,g).commitOrRemove(),this.viewport=_,(0,B.setLayerDimensions)(this.div,{rotation:_.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:_,pageHeight:G}=this.viewport.rawDims;return[_,G]}};let p=L;O=new WeakMap,U=new WeakMap,w=new WeakMap,y=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakMap,E=new WeakMap,k=new WeakMap,g=new WeakMap,n=new WeakSet,Be=function(_){var G;_.parent!==this&&(_.annotationElementId&&(t(this,g).addDeletedAnnotationElement(_.annotationElementId),R.AnnotationEditor.deleteAnnotationElement(_),_.annotationElementId=null),this.attach(_),(G=_.parent)==null||G.detach(_),_.setParent(this),_.div&&_.isAttachedToDOM&&(_.div.remove(),this.div.append(_.div)))},F=new WeakSet,gi=function(_){switch(t(this,g).getMode()){case h.AnnotationEditorType.FREETEXT:return new J.FreeTextEditor(_);case h.AnnotationEditorType.INK:return new ct.InkEditor(_);case h.AnnotationEditorType.STAMP:return new T.StampEditor(_)}return null},s=new WeakSet,Ue=function(_){const G=this.getNextId(),D=Q(this,F,gi).call(this,{parent:this,id:G,x:_.offsetX,y:_.offsetY,uiManager:t(this,g)});return D&&this.add(D),D},r=new WeakSet,je=function(){rt(this,E,!0);for(const _ of t(this,f).values())_.isEmpty()&&_.remove();rt(this,E,!1)},Yt(p,"_initialized",!1),u.AnnotationEditorLayer=p},(bt,u,nt)=>{var B,T,p,O,U,w,y,v,f,A,mi,k,bi,n,_i,F,ge,s,He,r,Ai,L,We;Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var h=nt(1),R=nt(5),it=nt(4),J=nt(29);const _=class extends it.AnnotationEditor{constructor(x){super({...x,name:"freeTextEditor"});W(this,A);W(this,k);W(this,n);W(this,F);W(this,s);W(this,r);W(this,L);W(this,B,this.editorDivBlur.bind(this));W(this,T,this.editorDivFocus.bind(this));W(this,p,this.editorDivInput.bind(this));W(this,O,this.editorDivKeydown.bind(this));W(this,U,void 0);W(this,w,"");W(this,y,`${this.id}-editor`);W(this,v,void 0);W(this,f,null);rt(this,U,x.color||_._defaultColor||it.AnnotationEditor._defaultLineColor),rt(this,v,x.fontSize||_._defaultFontSize)}static get _keyboardManager(){const x=_.prototype,$=_t=>_t.isEmpty(),et=R.AnnotationEditorUIManager.TRANSLATE_SMALL,pt=R.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,h.shadow)(this,"_keyboardManager",new R.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],x.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],x.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],x._translateEmpty,{args:[-et,0],checker:$}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],x._translateEmpty,{args:[-pt,0],checker:$}],[["ArrowRight","mac+ArrowRight"],x._translateEmpty,{args:[et,0],checker:$}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],x._translateEmpty,{args:[pt,0],checker:$}],[["ArrowUp","mac+ArrowUp"],x._translateEmpty,{args:[0,-et],checker:$}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],x._translateEmpty,{args:[0,-pt],checker:$}],[["ArrowDown","mac+ArrowDown"],x._translateEmpty,{args:[0,et],checker:$}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],x._translateEmpty,{args:[0,pt],checker:$}]]))}static initialize(x){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(et=>[et,x.get(et)]));const $=getComputedStyle(document.documentElement);this._internalPadding=parseFloat($.getPropertyValue("--freetext-padding"))}static updateDefaultParams(x,$){switch(x){case h.AnnotationEditorParamsType.FREETEXT_SIZE:_._defaultFontSize=$;break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:_._defaultColor=$;break}}updateParams(x,$){switch(x){case h.AnnotationEditorParamsType.FREETEXT_SIZE:Q(this,A,mi).call(this,$);break;case h.AnnotationEditorParamsType.FREETEXT_COLOR:Q(this,k,bi).call(this,$);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,_._defaultFontSize],[h.AnnotationEditorParamsType.FREETEXT_COLOR,_._defaultColor||it.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[h.AnnotationEditorParamsType.FREETEXT_SIZE,t(this,v)],[h.AnnotationEditorParamsType.FREETEXT_COLOR,t(this,U)]]}_translateEmpty(x,$){this._uiManager.translateSelectedEditors(x,$,!0)}getInitialTranslation(){const x=this.parentScale;return[-_._internalPadding*x,-(_._internalPadding+t(this,v))*x]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(h.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",t(this,O)),this.editorDiv.addEventListener("focus",t(this,T)),this.editorDiv.addEventListener("blur",t(this,B)),this.editorDiv.addEventListener("input",t(this,p)))}disableEditMode(){!this.isInEditMode()||(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",t(this,y)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",t(this,O)),this.editorDiv.removeEventListener("focus",t(this,T)),this.editorDiv.removeEventListener("blur",t(this,B)),this.editorDiv.removeEventListener("input",t(this,p)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(x){super.focusin(x),x.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){if(this.width){Q(this,L,We).call(this);return}this.enableEditMode(),this.editorDiv.focus()}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const x=t(this,w),$=rt(this,w,Q(this,n,_i).call(this).trimEnd());if(x===$)return;const et=pt=>{if(rt(this,w,pt),!pt){this.remove();return}Q(this,s,He).call(this),this.rebuild(),Q(this,F,ge).call(this)};this.addCommands({cmd:()=>{et($)},undo:()=>{et(x)},mustExec:!1}),Q(this,F,ge).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(x){this.enterInEditMode()}keydown(x){x.target===this.div&&x.key==="Enter"&&this.enterInEditMode()}editorDivKeydown(x){_._keyboardManager.exec(this,x)}editorDivFocus(x){this.isEditing=!0}editorDivBlur(x){this.isEditing=!1}editorDivInput(x){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let x,$;this.width&&(x=this.x,$=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",t(this,y)),this.enableEditing(),_._l10nPromise.get("editor_free_text2_aria_label").then(pt=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("aria-label",pt)}),_._l10nPromise.get("free_text2_default_content").then(pt=>{var _t;return(_t=this.editorDiv)==null?void 0:_t.setAttribute("default-content",pt)}),this.editorDiv.contentEditable=!0;const{style:et}=this.editorDiv;if(et.fontSize=`calc(${t(this,v)}px * var(--scale-factor))`,et.color=t(this,U),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,R.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[pt,_t]=this.parentDimensions;if(this.annotationElementId){const{position:I}=t(this,f);let[i,e]=this.getInitialTranslation();[i,e]=this.pageTranslationToScreen(i,e);const[m,N]=this.pageDimensions,[P,H]=this.pageTranslation;let z,Y;switch(this.rotation){case 0:z=x+(I[0]-P)/m,Y=$+this.height-(I[1]-H)/N;break;case 90:z=x+(I[0]-P)/m,Y=$-(I[1]-H)/N,[i,e]=[e,-i];break;case 180:z=x-this.width+(I[0]-P)/m,Y=$-(I[1]-H)/N,[i,e]=[-i,-e];break;case 270:z=x+(I[0]-P-this.height*N)/m,Y=$+(I[1]-H-this.width*m)/N,[i,e]=[-e,i];break}this.setAt(z*pt,Y*_t,i,e)}else this.setAt(x*pt,$*_t,this.width*pt,this.height*_t);Q(this,s,He).call(this),this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(x,$,et){let pt=null;if(x instanceof J.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:I,fontColor:i},rect:e,rotation:m,id:N},textContent:P,textPosition:H,parent:{page:{pageNumber:z}}}=x;if(!P||P.length===0)return null;pt=x={annotationType:h.AnnotationEditorType.FREETEXT,color:Array.from(i),fontSize:I,value:P.join(`
`),position:H,pageIndex:z-1,rect:e,rotation:m,id:N,deleted:!1}}const _t=super.deserialize(x,$,et);return rt(_t,v,x.fontSize),rt(_t,U,h.Util.makeHexColor(...x.color)),rt(_t,w,x.value),_t.annotationElementId=x.id||null,rt(_t,f,pt),_t}serialize(x=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const $=_._internalPadding*this.parentScale,et=this.getRect($,$),pt=it.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:t(this,U)),_t={annotationType:h.AnnotationEditorType.FREETEXT,color:pt,fontSize:t(this,v),value:t(this,w),pageIndex:this.pageIndex,rect:et,rotation:this.rotation};return x?_t:this.annotationElementId&&!Q(this,r,Ai).call(this,_t)?null:(_t.id=this.annotationElementId,_t)}};let ct=_;B=new WeakMap,T=new WeakMap,p=new WeakMap,O=new WeakMap,U=new WeakMap,w=new WeakMap,y=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakSet,mi=function(x){const $=pt=>{this.editorDiv.style.fontSize=`calc(${pt}px * var(--scale-factor))`,this.translate(0,-(pt-t(this,v))*this.parentScale),rt(this,v,pt),Q(this,F,ge).call(this)},et=t(this,v);this.addCommands({cmd:()=>{$(x)},undo:()=>{$(et)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,bi=function(x){const $=t(this,U);this.addCommands({cmd:()=>{rt(this,U,this.editorDiv.style.color=x)},undo:()=>{rt(this,U,this.editorDiv.style.color=$)},mustExec:!0,type:h.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},n=new WeakSet,_i=function(){const x=this.editorDiv.getElementsByTagName("div");if(x.length===0)return this.editorDiv.innerText;const $=[];for(const et of x)$.push(et.innerText.replace(/\r\n?|\n/,""));return $.join(`
`)},F=new WeakSet,ge=function(){const[x,$]=this.parentDimensions;let et;if(this.isAttachedToDOM)et=this.div.getBoundingClientRect();else{const{currentLayer:pt,div:_t}=this,I=_t.style.display;_t.style.display="hidden",pt.div.append(this.div),et=_t.getBoundingClientRect(),_t.remove(),_t.style.display=I}this.rotation%180===this.parentRotation%180?(this.width=et.width/x,this.height=et.height/$):(this.width=et.height/x,this.height=et.width/$),this.fixAndSetPosition()},s=new WeakSet,He=function(){if(this.editorDiv.replaceChildren(),!!t(this,w))for(const x of t(this,w).split(`
`)){const $=document.createElement("div");$.append(x?document.createTextNode(x):document.createElement("br")),this.editorDiv.append($)}},r=new WeakSet,Ai=function(x){const{value:$,fontSize:et,color:pt,rect:_t,pageIndex:I}=t(this,f);return x.value!==$||x.fontSize!==et||x.rect.some((i,e)=>Math.abs(i-_t[e])>=1)||x.color.some((i,e)=>i!==pt[e])||x.pageIndex!==I},L=new WeakSet,We=function(x=!1){if(!this.annotationElementId)return;if(Q(this,F,ge).call(this),!x&&(this.width===0||this.height===0)){setTimeout(()=>Q(this,L,We).call(this,!0),0);return}const $=_._internalPadding*this.parentScale;t(this,f).rect=this.getRect($,$)},Yt(ct,"_freeTextDefaultContent",""),Yt(ct,"_l10nPromise"),Yt(ct,"_internalPadding",0),Yt(ct,"_defaultColor",null),Yt(ct,"_defaultFontSize",10),Yt(ct,"_type","freetext"),u.FreeTextEditor=ct},(bt,u,nt)=>{var e,m,re,P,yi,z,Y,dt,at,ht,ft,Ct,At,Rt,Ht,St,Nt,vt,st,tt,gt,yt,ze,Dt,Ge,It,Xe,zt,Ut,lt,V,K,wt,jt,Ot,qt,Kt,vi,X,Ve;Object.defineProperty(u,"__esModule",{value:!0}),u.StampAnnotationElement=u.InkAnnotationElement=u.FreeTextAnnotationElement=u.AnnotationLayer=void 0;var h=nt(1),R=nt(6),it=nt(3),J=nt(30),ct=nt(31),B=nt(32);const T=1e3,p=9,O=new WeakSet;function U(ot){return{width:ot[2]-ot[0],height:ot[3]-ot[1]}}class w{static create(d){switch(d.data.annotationType){case h.AnnotationType.LINK:return new v(d);case h.AnnotationType.TEXT:return new f(d);case h.AnnotationType.WIDGET:switch(d.data.fieldType){case"Tx":return new E(d);case"Btn":return d.data.radioButton?new n(d):d.data.checkBox?new g(d):new o(d);case"Ch":return new F(d);case"Sig":return new k(d)}return new A(d);case h.AnnotationType.POPUP:return new b(d);case h.AnnotationType.FREETEXT:return new l(d);case h.AnnotationType.LINE:return new r(d);case h.AnnotationType.SQUARE:return new M(d);case h.AnnotationType.CIRCLE:return new L(d);case h.AnnotationType.POLYLINE:return new q(d);case h.AnnotationType.CARET:return new G(d);case h.AnnotationType.INK:return new D(d);case h.AnnotationType.POLYGON:return new _(d);case h.AnnotationType.HIGHLIGHT:return new x(d);case h.AnnotationType.UNDERLINE:return new $(d);case h.AnnotationType.SQUIGGLY:return new et(d);case h.AnnotationType.STRIKEOUT:return new pt(d);case h.AnnotationType.STAMP:return new _t(d);case h.AnnotationType.FILEATTACHMENT:return new I(d);default:return new y(d)}}}class y{constructor(d,{isRenderable:a=!1,ignoreBorder:C=!1,createQuadrilaterals:S=!1}={}){W(this,e,!1);this.isRenderable=a,this.data=d.data,this.layer=d.layer,this.linkService=d.linkService,this.downloadManager=d.downloadManager,this.imageResourcesPath=d.imageResourcesPath,this.renderForms=d.renderForms,this.svgFactory=d.svgFactory,this.annotationStorage=d.annotationStorage,this.enableScripting=d.enableScripting,this.hasJSActions=d.hasJSActions,this._fieldObjects=d.fieldObjects,this.parent=d.parent,a&&(this.container=this._createContainer(C)),S&&this._createQuadrilaterals()}_createContainer(d){const{data:a,parent:{page:C,viewport:S}}=this,j=document.createElement("section");j.setAttribute("data-annotation-id",a.id),j.style.zIndex=this.parent.zIndex++,this.data.popupRef&&j.setAttribute("aria-haspopup","dialog"),a.noRotate&&j.classList.add("norotate");const{pageWidth:Z,pageHeight:mt,pageX:xt,pageY:kt}=S.rawDims;if(!a.rect||this instanceof b){const{rotation:Mt}=a;return!a.hasOwnCanvas&&Mt!==0&&this.setRotation(Mt,j),j}const{width:Et,height:Lt}=U(a.rect),Tt=h.Util.normalizeRect([a.rect[0],C.view[3]-a.rect[1]+C.view[1],a.rect[2],C.view[3]-a.rect[3]+C.view[1]]);if(!d&&a.borderStyle.width>0){j.style.borderWidth=`${a.borderStyle.width}px`;const Mt=a.borderStyle.horizontalCornerRadius,Bt=a.borderStyle.verticalCornerRadius;if(Mt>0||Bt>0){const Vt=`calc(${Mt}px * var(--scale-factor)) / calc(${Bt}px * var(--scale-factor))`;j.style.borderRadius=Vt}else if(this instanceof n){const Vt=`calc(${Et}px * var(--scale-factor)) / calc(${Lt}px * var(--scale-factor))`;j.style.borderRadius=Vt}switch(a.borderStyle.style){case h.AnnotationBorderStyleType.SOLID:j.style.borderStyle="solid";break;case h.AnnotationBorderStyleType.DASHED:j.style.borderStyle="dashed";break;case h.AnnotationBorderStyleType.BEVELED:(0,h.warn)("Unimplemented border style: beveled");break;case h.AnnotationBorderStyleType.INSET:(0,h.warn)("Unimplemented border style: inset");break;case h.AnnotationBorderStyleType.UNDERLINE:j.style.borderBottomStyle="solid";break}const Gt=a.borderColor||null;Gt?(rt(this,e,!0),j.style.borderColor=h.Util.makeHexColor(Gt[0]|0,Gt[1]|0,Gt[2]|0)):j.style.borderWidth=0}j.style.left=`${100*(Tt[0]-xt)/Z}%`,j.style.top=`${100*(Tt[1]-kt)/mt}%`;const{rotation:Pt}=a;return a.hasOwnCanvas||Pt===0?(j.style.width=`${100*Et/Z}%`,j.style.height=`${100*Lt/mt}%`):this.setRotation(Pt,j),j}setRotation(d,a=this.container){if(!this.data.rect)return;const{pageWidth:C,pageHeight:S}=this.parent.viewport.rawDims,{width:j,height:Z}=U(this.data.rect);let mt,xt;d%180===0?(mt=100*j/C,xt=100*Z/S):(mt=100*Z/C,xt=100*j/S),a.style.width=`${mt}%`,a.style.height=`${xt}%`,a.setAttribute("data-main-rotation",(360-d)%360)}get _commonActions(){const d=(a,C,S)=>{const j=S.detail[a];S.target.style[C]=J.ColorConverters[`${j[0]}_HTML`](j.slice(1))};return(0,h.shadow)(this,"_commonActions",{display:a=>{const C=a.detail.display%2===1;this.container.style.visibility=C?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:C,print:a.detail.display===0||a.detail.display===3})},print:a=>{this.annotationStorage.setValue(this.data.id,{print:a.detail.print})},hidden:a=>{this.container.style.visibility=a.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:a.detail.hidden})},focus:a=>{setTimeout(()=>a.target.focus({preventScroll:!1}),0)},userName:a=>{a.target.title=a.detail.userName},readonly:a=>{a.detail.readonly?a.target.setAttribute("readonly",""):a.target.removeAttribute("readonly")},required:a=>{this._setRequired(a.target,a.detail.required)},bgColor:a=>{d("bgColor","backgroundColor",a)},fillColor:a=>{d("fillColor","backgroundColor",a)},fgColor:a=>{d("fgColor","color",a)},textColor:a=>{d("textColor","color",a)},borderColor:a=>{d("borderColor","borderColor",a)},strokeColor:a=>{d("strokeColor","borderColor",a)},rotation:a=>{const C=a.detail.rotation;this.setRotation(C),this.annotationStorage.setValue(this.data.id,{rotation:C})}})}_dispatchEventFromSandbox(d,a){const C=this._commonActions;for(const S of Object.keys(a.detail)){const j=d[S]||C[S];j==null||j(a)}}_setDefaultPropertiesFromJS(d){if(!this.enableScripting)return;const a=this.annotationStorage.getRawValue(this.data.id);if(!a)return;const C=this._commonActions;for(const[S,j]of Object.entries(a)){const Z=C[S];if(Z){const mt={detail:{[S]:j},target:d};Z(mt),delete a[S]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:d}=this.data;if(!d)return;const[a,C,S,j]=this.data.rect;if(d.length===1){const[,{x:Bt,y:Gt},{x:Vt,y:Jt}]=d[0];if(S===Bt&&j===Gt&&a===Vt&&C===Jt)return}const{style:Z}=this.container;let mt;if(t(this,e)){const{borderColor:Bt,borderWidth:Gt}=Z;Z.borderWidth=0,mt=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${Bt}" stroke-width="${Gt}">`],this.container.classList.add("hasBorder")}const xt=S-a,kt=j-C,{svgFactory:Et}=this,Lt=Et.createElement("svg");Lt.classList.add("quadrilateralsContainer"),Lt.setAttribute("width",0),Lt.setAttribute("height",0);const Tt=Et.createElement("defs");Lt.append(Tt);const Pt=Et.createElement("clipPath"),Mt=`clippath_${this.data.id}`;Pt.setAttribute("id",Mt),Pt.setAttribute("clipPathUnits","objectBoundingBox"),Tt.append(Pt);for(const[,{x:Bt,y:Gt},{x:Vt,y:Jt}]of d){const $t=Et.createElement("rect"),Qt=(Vt-a)/xt,te=(j-Gt)/kt,Zt=(Bt-Vt)/xt,ne=(Gt-Jt)/kt;$t.setAttribute("x",Qt),$t.setAttribute("y",te),$t.setAttribute("width",Zt),$t.setAttribute("height",ne),Pt.append($t),mt==null||mt.push(`<rect vector-effect="non-scaling-stroke" x="${Qt}" y="${te}" width="${Zt}" height="${ne}"/>`)}t(this,e)&&(mt.push("</g></svg>')"),Z.backgroundImage=mt.join("")),this.container.append(Lt),this.container.style.clipPath=`url(#${Mt})`}_createPopup(){const{container:d,data:a}=this;d.setAttribute("aria-haspopup","dialog");const C=new b({data:{color:a.color,titleObj:a.titleObj,modificationDate:a.modificationDate,contentsObj:a.contentsObj,richText:a.richText,parentRect:a.rect,borderStyle:0,id:`popup_${a.id}`,rotation:a.rotation},parent:this.parent,elements:[this]});this.parent.div.append(C.render())}render(){(0,h.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(d,a=null){const C=[];if(this._fieldObjects){const S=this._fieldObjects[d];if(S)for(const{page:j,id:Z,exportValues:mt}of S){if(j===-1||Z===a)continue;const xt=typeof mt=="string"?mt:null,kt=document.querySelector(`[data-element-id="${Z}"]`);if(kt&&!O.has(kt)){(0,h.warn)(`_getElementsByName - element not allowed: ${Z}`);continue}C.push({id:Z,exportValue:xt,domElement:kt})}return C}for(const S of document.getElementsByName(d)){const{exportValue:j}=S,Z=S.getAttribute("data-element-id");Z!==a&&(!O.has(S)||C.push({id:Z,exportValue:j,domElement:S}))}return C}show(){var d;this.container&&(this.container.hidden=!1),(d=this.popup)==null||d.maybeShow()}hide(){var d;this.container&&(this.container.hidden=!0),(d=this.popup)==null||d.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const d=this.getElementsToTriggerPopup();if(Array.isArray(d))for(const a of d)a.classList.add("highlightArea");else d.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:d,data:{id:a}}=this;this.container.addEventListener("dblclick",()=>{var C;(C=this.linkService.eventBus)==null||C.dispatch("switchannotationeditormode",{source:this,mode:d,editId:a})})}}e=new WeakMap;class v extends y{constructor(a,C=null){super(a,{isRenderable:!0,ignoreBorder:!!(C!=null&&C.ignoreBorder),createQuadrilaterals:!0});W(this,m);W(this,P);this.isTooltipOnly=a.data.isTooltipOnly}render(){const{data:a,linkService:C}=this,S=document.createElement("a");S.setAttribute("data-element-id",a.id);let j=!1;return a.url?(C.addLinkAttributes(S,a.url,a.newWindow),j=!0):a.action?(this._bindNamedAction(S,a.action),j=!0):a.attachment?(this._bindAttachment(S,a.attachment),j=!0):a.setOCGState?(Q(this,P,yi).call(this,S,a.setOCGState),j=!0):a.dest?(this._bindLink(S,a.dest),j=!0):(a.actions&&(a.actions.Action||a.actions["Mouse Up"]||a.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(S,a),j=!0),a.resetForm?(this._bindResetFormAction(S,a.resetForm),j=!0):this.isTooltipOnly&&!j&&(this._bindLink(S,""),j=!0)),this.container.classList.add("linkAnnotation"),j&&this.container.append(S),this.container}_bindLink(a,C){a.href=this.linkService.getDestinationHash(C),a.onclick=()=>(C&&this.linkService.goToDestination(C),!1),(C||C==="")&&Q(this,m,re).call(this)}_bindNamedAction(a,C){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeNamedAction(C),!1),Q(this,m,re).call(this)}_bindAttachment(a,C){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>{var S;return(S=this.downloadManager)==null||S.openOrDownloadData(this.container,C.content,C.filename),!1},Q(this,m,re).call(this)}_bindJSAction(a,C){a.href=this.linkService.getAnchorUrl("");const S=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const j of Object.keys(C.actions)){const Z=S.get(j);!Z||(a[Z]=()=>{var mt;return(mt=this.linkService.eventBus)==null||mt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:C.id,name:j}}),!1})}a.onclick||(a.onclick=()=>!1),Q(this,m,re).call(this)}_bindResetFormAction(a,C){const S=a.onclick;if(S||(a.href=this.linkService.getAnchorUrl("")),Q(this,m,re).call(this),!this._fieldObjects){(0,h.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),S||(a.onclick=()=>!1);return}a.onclick=()=>{var Lt;S==null||S();const{fields:j,refs:Z,include:mt}=C,xt=[];if(j.length!==0||Z.length!==0){const Tt=new Set(Z);for(const Pt of j){const Mt=this._fieldObjects[Pt]||[];for(const{id:Bt}of Mt)Tt.add(Bt)}for(const Pt of Object.values(this._fieldObjects))for(const Mt of Pt)Tt.has(Mt.id)===mt&&xt.push(Mt)}else for(const Tt of Object.values(this._fieldObjects))xt.push(...Tt);const kt=this.annotationStorage,Et=[];for(const Tt of xt){const{id:Pt}=Tt;switch(Et.push(Pt),Tt.type){case"text":{const Bt=Tt.defaultValue||"";kt.setValue(Pt,{value:Bt});break}case"checkbox":case"radiobutton":{const Bt=Tt.defaultValue===Tt.exportValues;kt.setValue(Pt,{value:Bt});break}case"combobox":case"listbox":{const Bt=Tt.defaultValue||"";kt.setValue(Pt,{value:Bt});break}default:continue}const Mt=document.querySelector(`[data-element-id="${Pt}"]`);if(Mt){if(!O.has(Mt)){(0,h.warn)(`_bindResetFormAction - element not allowed: ${Pt}`);continue}}else continue;Mt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Lt=this.linkService.eventBus)==null||Lt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Et,name:"ResetForm"}})),!1}}}m=new WeakSet,re=function(){this.container.setAttribute("data-internal-link","")},P=new WeakSet,yi=function(a,C){a.href=this.linkService.getAnchorUrl(""),a.onclick=()=>(this.linkService.executeSetOCGState(C),!1),Q(this,m,re).call(this)};class f extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a})}render(){this.container.classList.add("textAnnotation");const d=document.createElement("img");return d.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",d.alt="[{{type}} Annotation]",d.dataset.l10nId="text_annotation_type",d.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.popupRef||this._createPopup(),this.container.append(d),this.container}}class A extends y{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(d){var a;this.data.hasOwnCanvas&&(((a=d.previousSibling)==null?void 0:a.nodeName)==="CANVAS"&&(d.previousSibling.hidden=!0),d.hidden=!1)}_getKeyModifier(d){const{isWin:a,isMac:C}=h.FeatureTest.platform;return a&&d.ctrlKey||C&&d.metaKey}_setEventListener(d,a,C,S){a.includes("mouse")?d.addEventListener(a,j=>{var Z;(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:C,value:S(j),shift:j.shiftKey,modifier:this._getKeyModifier(j)}})}):d.addEventListener(a,j=>{var Z;(Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:C,value:S(j)}})})}_setEventListeners(d,a,C){var S;for(const[j,Z]of a)(Z==="Action"||((S=this.data.actions)==null?void 0:S[Z]))&&this._setEventListener(d,j,Z,C)}_setBackgroundColor(d){const a=this.data.backgroundColor||null;d.style.backgroundColor=a===null?"transparent":h.Util.makeHexColor(a[0],a[1],a[2])}_setTextStyle(d){const a=["left","center","right"],{fontColor:C}=this.data.defaultAppearanceData,S=this.data.defaultAppearanceData.fontSize||p,j=d.style;let Z;const mt=2,xt=kt=>Math.round(10*kt)/10;if(this.data.multiLine){const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-mt),Et=Math.round(kt/(h.LINE_FACTOR*S))||1,Lt=kt/Et;Z=Math.min(S,xt(Lt/h.LINE_FACTOR))}else{const kt=Math.abs(this.data.rect[3]-this.data.rect[1]-mt);Z=Math.min(S,xt(kt/h.LINE_FACTOR))}j.fontSize=`calc(${Z}px * var(--scale-factor))`,j.color=h.Util.makeHexColor(C[0],C[1],C[2]),this.data.textAlignment!==null&&(j.textAlign=a[this.data.textAlignment])}_setRequired(d,a){a?d.setAttribute("required",!0):d.removeAttribute("required"),d.setAttribute("aria-required",a)}}class E extends A{constructor(d){const a=d.renderForms||!d.data.hasAppearance&&!!d.data.fieldValue;super(d,{isRenderable:a})}setPropertyOnSiblings(d,a,C,S){const j=this.annotationStorage;for(const Z of this._getElementsByName(d.name,d.id))Z.domElement&&(Z.domElement[a]=C),j.setValue(Z.id,{[S]:C})}render(){var S,j;const d=this.annotationStorage,a=this.data.id;this.container.classList.add("textWidgetAnnotation");let C=null;if(this.renderForms){const Z=d.getValue(a,{value:this.data.fieldValue});let mt=Z.value||"";const xt=d.getValue(a,{charLimit:this.data.maxLen}).charLimit;xt&&mt.length>xt&&(mt=mt.slice(0,xt));let kt=Z.formattedValue||((S=this.data.textContent)==null?void 0:S.join(`
`))||null;kt&&this.data.comb&&(kt=kt.replaceAll(/\s+/g,""));const Et={userValue:mt,formattedValue:kt,lastCommittedValue:null,commitKey:1};this.data.multiLine?(C=document.createElement("textarea"),C.textContent=kt!=null?kt:mt,this.data.doNotScroll&&(C.style.overflowY="hidden")):(C=document.createElement("input"),C.type="text",C.setAttribute("value",kt!=null?kt:mt),this.data.doNotScroll&&(C.style.overflowX="hidden")),this.data.hasOwnCanvas&&(C.hidden=!0),O.add(C),C.setAttribute("data-element-id",a),C.disabled=this.data.readOnly,C.name=this.data.baseFieldName||this.data.fieldName,C.tabIndex=T,this._setRequired(C,this.data.required),xt&&(C.maxLength=xt),C.addEventListener("input",Tt=>{d.setValue(a,{value:Tt.target.value}),this.setPropertyOnSiblings(C,"value",Tt.target.value,"value"),Et.formattedValue=null}),C.addEventListener("resetform",Tt=>{var Mt;const Pt=(Mt=this.data.defaultFieldValue)!=null?Mt:"";C.value=Et.userValue=Pt,Et.formattedValue=null});let Lt=Tt=>{const{formattedValue:Pt}=Et;Pt!=null&&(Tt.target.value=Pt),Tt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){C.addEventListener("focus",Pt=>{const{target:Mt}=Pt;Et.userValue&&(Mt.value=Et.userValue),Et.lastCommittedValue=Mt.value,Et.commitKey=1}),C.addEventListener("updatefromsandbox",Pt=>{this.showElementAndHideCanvas(Pt.target);const Mt={value(Bt){var Gt;Et.userValue=(Gt=Bt.detail.value)!=null?Gt:"",d.setValue(a,{value:Et.userValue.toString()}),Bt.target.value=Et.userValue},formattedValue(Bt){const{formattedValue:Gt}=Bt.detail;Et.formattedValue=Gt,Gt!=null&&Bt.target!==document.activeElement&&(Bt.target.value=Gt),d.setValue(a,{formattedValue:Gt})},selRange(Bt){Bt.target.setSelectionRange(...Bt.detail.selRange)},charLimit:Bt=>{var $t;const{charLimit:Gt}=Bt.detail,{target:Vt}=Bt;if(Gt===0){Vt.removeAttribute("maxLength");return}Vt.setAttribute("maxLength",Gt);let Jt=Et.userValue;!Jt||Jt.length<=Gt||(Jt=Jt.slice(0,Gt),Vt.value=Et.userValue=Jt,d.setValue(a,{value:Jt}),($t=this.linkService.eventBus)==null||$t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:Jt,willCommit:!0,commitKey:1,selStart:Vt.selectionStart,selEnd:Vt.selectionEnd}}))}};this._dispatchEventFromSandbox(Mt,Pt)}),C.addEventListener("keydown",Pt=>{var Gt;Et.commitKey=1;let Mt=-1;if(Pt.key==="Escape"?Mt=0:Pt.key==="Enter"&&!this.data.multiLine?Mt=2:Pt.key==="Tab"&&(Et.commitKey=3),Mt===-1)return;const{value:Bt}=Pt.target;Et.lastCommittedValue!==Bt&&(Et.lastCommittedValue=Bt,Et.userValue=Bt,(Gt=this.linkService.eventBus)==null||Gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:Bt,willCommit:!0,commitKey:Mt,selStart:Pt.target.selectionStart,selEnd:Pt.target.selectionEnd}}))});const Tt=Lt;Lt=null,C.addEventListener("blur",Pt=>{var Bt;if(!Pt.relatedTarget)return;const{value:Mt}=Pt.target;Et.userValue=Mt,Et.lastCommittedValue!==Mt&&((Bt=this.linkService.eventBus)==null||Bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:Mt,willCommit:!0,commitKey:Et.commitKey,selStart:Pt.target.selectionStart,selEnd:Pt.target.selectionEnd}})),Tt(Pt)}),(j=this.data.actions)!=null&&j.Keystroke&&C.addEventListener("beforeinput",Pt=>{var te;Et.lastCommittedValue=null;const{data:Mt,target:Bt}=Pt,{value:Gt,selectionStart:Vt,selectionEnd:Jt}=Bt;let $t=Vt,Qt=Jt;switch(Pt.inputType){case"deleteWordBackward":{const Zt=Gt.substring(0,Vt).match(/\w*[^\w]*$/);Zt&&($t-=Zt[0].length);break}case"deleteWordForward":{const Zt=Gt.substring(Vt).match(/^[^\w]*\w*/);Zt&&(Qt+=Zt[0].length);break}case"deleteContentBackward":Vt===Jt&&($t-=1);break;case"deleteContentForward":Vt===Jt&&(Qt+=1);break}Pt.preventDefault(),(te=this.linkService.eventBus)==null||te.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:Gt,change:Mt||"",willCommit:!1,selStart:$t,selEnd:Qt}})}),this._setEventListeners(C,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Pt=>Pt.target.value)}if(Lt&&C.addEventListener("blur",Lt),this.data.comb){const Pt=(this.data.rect[2]-this.data.rect[0])/xt;C.classList.add("comb"),C.style.letterSpacing=`calc(${Pt}px * var(--scale-factor) - 1ch)`}}else C=document.createElement("div"),C.textContent=this.data.fieldValue,C.style.verticalAlign="middle",C.style.display="table-cell";return this._setTextStyle(C),this._setBackgroundColor(C),this._setDefaultPropertiesFromJS(C),this.container.append(C),this.container}}class k extends A{constructor(d){super(d,{isRenderable:!!d.data.hasOwnCanvas})}}class g extends A{constructor(d){super(d,{isRenderable:d.renderForms})}render(){const d=this.annotationStorage,a=this.data,C=a.id;let S=d.getValue(C,{value:a.exportValue===a.fieldValue}).value;typeof S=="string"&&(S=S!=="Off",d.setValue(C,{value:S})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const j=document.createElement("input");return O.add(j),j.setAttribute("data-element-id",C),j.disabled=a.readOnly,this._setRequired(j,this.data.required),j.type="checkbox",j.name=a.baseFieldName||a.fieldName,S&&j.setAttribute("checked",!0),j.setAttribute("exportValue",a.exportValue),j.tabIndex=T,j.addEventListener("change",Z=>{const{name:mt,checked:xt}=Z.target;for(const kt of this._getElementsByName(mt,C)){const Et=xt&&kt.exportValue===a.exportValue;kt.domElement&&(kt.domElement.checked=Et),d.setValue(kt.id,{value:Et})}d.setValue(C,{value:xt})}),j.addEventListener("resetform",Z=>{const mt=a.defaultFieldValue||"Off";Z.target.checked=mt===a.exportValue}),this.enableScripting&&this.hasJSActions&&(j.addEventListener("updatefromsandbox",Z=>{const mt={value(xt){xt.target.checked=xt.detail.value!=="Off",d.setValue(C,{value:xt.target.checked})}};this._dispatchEventFromSandbox(mt,Z)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Z=>Z.target.checked)),this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class n extends A{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const d=this.annotationStorage,a=this.data,C=a.id;let S=d.getValue(C,{value:a.fieldValue===a.buttonValue}).value;typeof S=="string"&&(S=S!==a.buttonValue,d.setValue(C,{value:S}));const j=document.createElement("input");if(O.add(j),j.setAttribute("data-element-id",C),j.disabled=a.readOnly,this._setRequired(j,this.data.required),j.type="radio",j.name=a.baseFieldName||a.fieldName,S&&j.setAttribute("checked",!0),j.tabIndex=T,j.addEventListener("change",Z=>{const{name:mt,checked:xt}=Z.target;for(const kt of this._getElementsByName(mt,C))d.setValue(kt.id,{value:!1});d.setValue(C,{value:xt})}),j.addEventListener("resetform",Z=>{const mt=a.defaultFieldValue;Z.target.checked=mt!=null&&mt===a.buttonValue}),this.enableScripting&&this.hasJSActions){const Z=a.buttonValue;j.addEventListener("updatefromsandbox",mt=>{const xt={value:kt=>{const Et=Z===kt.detail.value;for(const Lt of this._getElementsByName(kt.target.name)){const Tt=Et&&Lt.id===C;Lt.domElement&&(Lt.domElement.checked=Tt),d.setValue(Lt.id,{value:Tt})}}};this._dispatchEventFromSandbox(xt,mt)}),this._setEventListeners(j,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],mt=>mt.target.checked)}return this._setBackgroundColor(j),this._setDefaultPropertiesFromJS(j),this.container.append(j),this.container}}class o extends v{constructor(d){super(d,{ignoreBorder:d.data.hasAppearance})}render(){const d=super.render();d.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(d.title=this.data.alternativeText);const a=d.lastChild;return this.enableScripting&&this.hasJSActions&&a&&(this._setDefaultPropertiesFromJS(a),a.addEventListener("updatefromsandbox",C=>{this._dispatchEventFromSandbox({},C)})),d}}class F extends A{constructor(d){super(d,{isRenderable:d.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const d=this.annotationStorage,a=this.data.id,C=d.getValue(a,{value:this.data.fieldValue}),S=document.createElement("select");O.add(S),S.setAttribute("data-element-id",a),S.disabled=this.data.readOnly,this._setRequired(S,this.data.required),S.name=this.data.baseFieldName||this.data.fieldName,S.tabIndex=T;let j=this.data.combo&&this.data.options.length>0;this.data.combo||(S.size=this.data.options.length,this.data.multiSelect&&(S.multiple=!0)),S.addEventListener("resetform",Et=>{const Lt=this.data.defaultFieldValue;for(const Tt of S.options)Tt.selected=Tt.value===Lt});for(const Et of this.data.options){const Lt=document.createElement("option");Lt.textContent=Et.displayValue,Lt.value=Et.exportValue,C.value.includes(Et.exportValue)&&(Lt.setAttribute("selected",!0),j=!1),S.append(Lt)}let Z=null;if(j){const Et=document.createElement("option");Et.value=" ",Et.setAttribute("hidden",!0),Et.setAttribute("selected",!0),S.prepend(Et),Z=()=>{Et.remove(),S.removeEventListener("input",Z),Z=null},S.addEventListener("input",Z)}const mt=Et=>{const Lt=Et?"value":"textContent",{options:Tt,multiple:Pt}=S;return Pt?Array.prototype.filter.call(Tt,Mt=>Mt.selected).map(Mt=>Mt[Lt]):Tt.selectedIndex===-1?null:Tt[Tt.selectedIndex][Lt]};let xt=mt(!1);const kt=Et=>{const Lt=Et.target.options;return Array.prototype.map.call(Lt,Tt=>({displayValue:Tt.textContent,exportValue:Tt.value}))};return this.enableScripting&&this.hasJSActions?(S.addEventListener("updatefromsandbox",Et=>{const Lt={value(Tt){Z==null||Z();const Pt=Tt.detail.value,Mt=new Set(Array.isArray(Pt)?Pt:[Pt]);for(const Bt of S.options)Bt.selected=Mt.has(Bt.value);d.setValue(a,{value:mt(!0)}),xt=mt(!1)},multipleSelection(Tt){S.multiple=!0},remove(Tt){const Pt=S.options,Mt=Tt.detail.remove;Pt[Mt].selected=!1,S.remove(Mt),Pt.length>0&&Array.prototype.findIndex.call(Pt,Gt=>Gt.selected)===-1&&(Pt[0].selected=!0),d.setValue(a,{value:mt(!0),items:kt(Tt)}),xt=mt(!1)},clear(Tt){for(;S.length!==0;)S.remove(0);d.setValue(a,{value:null,items:[]}),xt=mt(!1)},insert(Tt){const{index:Pt,displayValue:Mt,exportValue:Bt}=Tt.detail.insert,Gt=S.children[Pt],Vt=document.createElement("option");Vt.textContent=Mt,Vt.value=Bt,Gt?Gt.before(Vt):S.append(Vt),d.setValue(a,{value:mt(!0),items:kt(Tt)}),xt=mt(!1)},items(Tt){const{items:Pt}=Tt.detail;for(;S.length!==0;)S.remove(0);for(const Mt of Pt){const{displayValue:Bt,exportValue:Gt}=Mt,Vt=document.createElement("option");Vt.textContent=Bt,Vt.value=Gt,S.append(Vt)}S.options.length>0&&(S.options[0].selected=!0),d.setValue(a,{value:mt(!0),items:kt(Tt)}),xt=mt(!1)},indices(Tt){const Pt=new Set(Tt.detail.indices);for(const Mt of Tt.target.options)Mt.selected=Pt.has(Mt.index);d.setValue(a,{value:mt(!0)}),xt=mt(!1)},editable(Tt){Tt.target.disabled=!Tt.detail.editable}};this._dispatchEventFromSandbox(Lt,Et)}),S.addEventListener("input",Et=>{var Tt;const Lt=mt(!0);d.setValue(a,{value:Lt}),Et.preventDefault(),(Tt=this.linkService.eventBus)==null||Tt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:a,name:"Keystroke",value:xt,changeEx:Lt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(S,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Et=>Et.target.value)):S.addEventListener("input",function(Et){d.setValue(a,{value:mt(!0)})}),this.data.combo&&this._setTextStyle(S),this._setBackgroundColor(S),this._setDefaultPropertiesFromJS(S),this.container.append(S),this.container}}class b extends y{constructor(d){var j,Z,mt;const{data:a,elements:C}=d,S=!!(((j=a.titleObj)==null?void 0:j.str)||((Z=a.contentsObj)==null?void 0:Z.str)||((mt=a.richText)==null?void 0:mt.str));super(d,{isRenderable:S}),this.elements=C}render(){this.container.classList.add("popupAnnotation");const d=new s({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),a=[];for(const C of this.elements)C.popup=d,a.push(C.data.id),C.addHighlightArea();return this.container.setAttribute("aria-controls",a.join(",")),this.container}}class s{constructor({container:d,color:a,elements:C,titleObj:S,modificationDate:j,contentsObj:Z,richText:mt,parent:xt,rect:kt,parentRect:Et,open:Lt}){W(this,yt);W(this,Dt);W(this,It);W(this,z,null);W(this,Y,Q(this,It,Xe).bind(this));W(this,dt,Q(this,Dt,Ge).bind(this));W(this,at,Q(this,yt,ze).bind(this));W(this,ht,null);W(this,ft,null);W(this,Ct,null);W(this,At,null);W(this,Rt,null);W(this,Ht,null);W(this,St,!1);W(this,Nt,null);W(this,vt,null);W(this,st,null);W(this,tt,null);W(this,gt,!1);rt(this,ft,d),rt(this,tt,S),rt(this,Ct,Z),rt(this,st,mt),rt(this,Rt,xt),rt(this,ht,a),rt(this,vt,kt),rt(this,Ht,Et),rt(this,At,C);const Tt=R.PDFDateString.toDateObject(j);Tt&&rt(this,z,xt.l10n.get("annotation_date_string",{date:Tt.toLocaleDateString(),time:Tt.toLocaleTimeString()})),this.trigger=C.flatMap(Pt=>Pt.getElementsToTriggerPopup());for(const Pt of this.trigger)Pt.addEventListener("click",t(this,at)),Pt.addEventListener("mouseenter",t(this,dt)),Pt.addEventListener("mouseleave",t(this,Y));t(this,ft).hidden=!0,Lt&&Q(this,yt,ze).call(this)}render(){if(t(this,Nt))return;const{page:{view:d},viewport:{rawDims:{pageWidth:a,pageHeight:C,pageX:S,pageY:j}}}=t(this,Rt),Z=rt(this,Nt,document.createElement("div"));if(Z.className="popup",t(this,ht)){const $t=Z.style.outlineColor=h.Util.makeHexColor(...t(this,ht));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Z.style.backgroundColor=`color-mix(in srgb, ${$t} 30%, white)`:Z.style.backgroundColor=h.Util.makeHexColor(...t(this,ht).map(te=>Math.floor(.7*(255-te)+te)))}const mt=document.createElement("span");mt.className="header";const xt=document.createElement("h1");if(mt.append(xt),{dir:xt.dir,str:xt.textContent}=t(this,tt),Z.append(mt),t(this,z)){const $t=document.createElement("span");$t.classList.add("popupDate"),t(this,z).then(Qt=>{$t.textContent=Qt}),mt.append($t)}const kt=t(this,Ct),Et=t(this,st);if((Et==null?void 0:Et.str)&&(!(kt!=null&&kt.str)||kt.str===Et.str))B.XfaLayer.render({xfaHtml:Et.html,intent:"richText",div:Z}),Z.lastChild.classList.add("richText","popupContent");else{const $t=this._formatContents(kt);Z.append($t)}let Lt=!!t(this,Ht),Tt=Lt?t(this,Ht):t(this,vt);for(const $t of t(this,At))if(!Tt||h.Util.intersect($t.data.rect,Tt)!==null){Tt=$t.data.rect,Lt=!0;break}const Pt=h.Util.normalizeRect([Tt[0],d[3]-Tt[1]+d[1],Tt[2],d[3]-Tt[3]+d[1]]),Mt=5,Bt=Lt?Tt[2]-Tt[0]+Mt:0,Gt=Pt[0]+Bt,Vt=Pt[1],{style:Jt}=t(this,ft);Jt.left=`${100*(Gt-S)/a}%`,Jt.top=`${100*(Vt-j)/C}%`,t(this,ft).append(Z)}_formatContents({str:d,dir:a}){const C=document.createElement("p");C.classList.add("popupContent"),C.dir=a;const S=d.split(/(?:\r\n?|\n)/);for(let j=0,Z=S.length;j<Z;++j){const mt=S[j];C.append(document.createTextNode(mt)),j<Z-1&&C.append(document.createElement("br"))}return C}forceHide(){rt(this,gt,this.isVisible),t(this,gt)&&(t(this,ft).hidden=!0)}maybeShow(){!t(this,gt)||(rt(this,gt,!1),t(this,ft).hidden=!1)}get isVisible(){return t(this,ft).hidden===!1}}z=new WeakMap,Y=new WeakMap,dt=new WeakMap,at=new WeakMap,ht=new WeakMap,ft=new WeakMap,Ct=new WeakMap,At=new WeakMap,Rt=new WeakMap,Ht=new WeakMap,St=new WeakMap,Nt=new WeakMap,vt=new WeakMap,st=new WeakMap,tt=new WeakMap,gt=new WeakMap,yt=new WeakSet,ze=function(){rt(this,St,!t(this,St)),t(this,St)?(Q(this,Dt,Ge).call(this),t(this,ft).addEventListener("click",t(this,at))):(Q(this,It,Xe).call(this),t(this,ft).removeEventListener("click",t(this,at)))},Dt=new WeakSet,Ge=function(){t(this,Nt)||this.render(),this.isVisible?t(this,St)&&t(this,ft).classList.add("focused"):(t(this,ft).hidden=!1,t(this,ft).style.zIndex=parseInt(t(this,ft).style.zIndex)+1e3)},It=new WeakSet,Xe=function(){t(this,ft).classList.remove("focused"),!(t(this,St)||!this.isVisible)&&(t(this,ft).hidden=!0,t(this,ft).style.zIndex=parseInt(t(this,ft).style.zIndex)-1e3)};class l extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0}),this.textContent=d.data.textContent,this.textPosition=d.data.textPosition,this.annotationEditorType=h.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const d=document.createElement("div");d.classList.add("annotationTextContent"),d.setAttribute("role","comment");for(const a of this.textContent){const C=document.createElement("span");C.textContent=a,d.append(C)}this.container.append(d)}return this.data.popupRef||this._createPopup(),this._editOnDoubleClick(),this.container}}u.FreeTextAnnotationElement=l;class r extends y{constructor(a){var S,j,Z;const C=!!(a.data.popupRef||((S=a.data.titleObj)==null?void 0:S.str)||((j=a.data.contentsObj)==null?void 0:j.str)||((Z=a.data.richText)==null?void 0:Z.str));super(a,{isRenderable:C,ignoreBorder:!0});W(this,zt,null)}render(){this.container.classList.add("lineAnnotation");const a=this.data,{width:C,height:S}=U(a.rect),j=this.svgFactory.create(C,S,!0),Z=rt(this,zt,this.svgFactory.createElement("svg:line"));return Z.setAttribute("x1",a.rect[2]-a.lineCoordinates[0]),Z.setAttribute("y1",a.rect[3]-a.lineCoordinates[1]),Z.setAttribute("x2",a.rect[2]-a.lineCoordinates[2]),Z.setAttribute("y2",a.rect[3]-a.lineCoordinates[3]),Z.setAttribute("stroke-width",a.borderStyle.width||1),Z.setAttribute("stroke","transparent"),Z.setAttribute("fill","transparent"),j.append(Z),this.container.append(j),a.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,zt)}addHighlightArea(){this.container.classList.add("highlightArea")}}zt=new WeakMap;class M extends y{constructor(a){var S,j,Z;const C=!!(a.data.popupRef||((S=a.data.titleObj)==null?void 0:S.str)||((j=a.data.contentsObj)==null?void 0:j.str)||((Z=a.data.richText)==null?void 0:Z.str));super(a,{isRenderable:C,ignoreBorder:!0});W(this,Ut,null)}render(){this.container.classList.add("squareAnnotation");const a=this.data,{width:C,height:S}=U(a.rect),j=this.svgFactory.create(C,S,!0),Z=a.borderStyle.width,mt=rt(this,Ut,this.svgFactory.createElement("svg:rect"));return mt.setAttribute("x",Z/2),mt.setAttribute("y",Z/2),mt.setAttribute("width",C-Z),mt.setAttribute("height",S-Z),mt.setAttribute("stroke-width",Z||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),j.append(mt),this.container.append(j),a.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,Ut)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ut=new WeakMap;class L extends y{constructor(a){var S,j,Z;const C=!!(a.data.popupRef||((S=a.data.titleObj)==null?void 0:S.str)||((j=a.data.contentsObj)==null?void 0:j.str)||((Z=a.data.richText)==null?void 0:Z.str));super(a,{isRenderable:C,ignoreBorder:!0});W(this,lt,null)}render(){this.container.classList.add("circleAnnotation");const a=this.data,{width:C,height:S}=U(a.rect),j=this.svgFactory.create(C,S,!0),Z=a.borderStyle.width,mt=rt(this,lt,this.svgFactory.createElement("svg:ellipse"));return mt.setAttribute("cx",C/2),mt.setAttribute("cy",S/2),mt.setAttribute("rx",C/2-Z/2),mt.setAttribute("ry",S/2-Z/2),mt.setAttribute("stroke-width",Z||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),j.append(mt),this.container.append(j),a.popupRef||this._createPopup(),this.container}getElementsToTriggerPopup(){return t(this,lt)}addHighlightArea(){this.container.classList.add("highlightArea")}}lt=new WeakMap;class q extends y{constructor(a){var S,j,Z;const C=!!(a.data.popupRef||((S=a.data.titleObj)==null?void 0:S.str)||((j=a.data.contentsObj)==null?void 0:j.str)||((Z=a.data.richText)==null?void 0:Z.str));super(a,{isRenderable:C,ignoreBorder:!0});W(this,V,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const a=this.data,{width:C,height:S}=U(a.rect),j=this.svgFactory.create(C,S,!0);let Z=[];for(const xt of a.vertices){const kt=xt.x-a.rect[0],Et=a.rect[3]-xt.y;Z.push(kt+","+Et)}Z=Z.join(" ");const mt=rt(this,V,this.svgFactory.createElement(this.svgElementName));return mt.setAttribute("points",Z),mt.setAttribute("stroke-width",a.borderStyle.width||1),mt.setAttribute("stroke","transparent"),mt.setAttribute("fill","transparent"),j.append(mt),this.container.append(j),a.popupRef||this._createPopup(mt,a),this.container}getElementsToTriggerPopup(){return t(this,V)}addHighlightArea(){this.container.classList.add("highlightArea")}}V=new WeakMap;class _ extends q{constructor(d){super(d),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class G extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.popupRef||this._createPopup(),this.container}}class D extends y{constructor(a){var S,j,Z;const C=!!(a.data.popupRef||((S=a.data.titleObj)==null?void 0:S.str)||((j=a.data.contentsObj)==null?void 0:j.str)||((Z=a.data.richText)==null?void 0:Z.str));super(a,{isRenderable:C,ignoreBorder:!0});W(this,K,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=h.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const a=this.data,{width:C,height:S}=U(a.rect),j=this.svgFactory.create(C,S,!0);for(const Z of a.inkLists){let mt=[];for(const kt of Z){const Et=kt.x-a.rect[0],Lt=a.rect[3]-kt.y;mt.push(`${Et},${Lt}`)}mt=mt.join(" ");const xt=this.svgFactory.createElement(this.svgElementName);t(this,K).push(xt),xt.setAttribute("points",mt),xt.setAttribute("stroke-width",a.borderStyle.width||1),xt.setAttribute("stroke","transparent"),xt.setAttribute("fill","transparent"),a.popupRef||this._createPopup(xt,a),j.append(xt)}return this.container.append(j),this.container}getElementsToTriggerPopup(){return t(this,K)}addHighlightArea(){this.container.classList.add("highlightArea")}}K=new WeakMap,u.InkAnnotationElement=D;class x extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class $ extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class et extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class pt extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.popupRef||this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class _t extends y{constructor(d){var C,S,j;const a=!!(d.data.popupRef||((C=d.data.titleObj)==null?void 0:C.str)||((S=d.data.contentsObj)==null?void 0:S.str)||((j=d.data.richText)==null?void 0:j.str));super(d,{isRenderable:a,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.popupRef||this._createPopup(),this.container}}u.StampAnnotationElement=_t;class I extends y{constructor(a){var j;super(a,{isRenderable:!0});W(this,wt,null);const{filename:C,content:S}=this.data.file;this.filename=(0,R.getFilenameFromUrl)(C,!0),this.content=S,(j=this.linkService.eventBus)==null||j.dispatch("fileattachmentannotation",{source:this,filename:C,content:S})}render(){var C,S;this.container.classList.add("fileAttachmentAnnotation");let a;return this.data.hasAppearance?a=document.createElement("div"):(a=document.createElement("img"),a.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),a.classList.add("popupTriggerArea"),a.addEventListener("dblclick",this._download.bind(this)),rt(this,wt,a),!this.data.popupRef&&(((C=this.data.titleObj)==null?void 0:C.str)||((S=this.data.contentsObj)==null?void 0:S.str)||this.data.richText)&&this._createPopup(),this.container.append(a),this.container}getElementsToTriggerPopup(){return t(this,wt)}addHighlightArea(){this.container.classList.add("highlightArea")}_download(){var a;(a=this.downloadManager)==null||a.openOrDownloadData(this.container,this.content,this.filename)}}wt=new WeakMap;class i{constructor({div:d,accessibilityManager:a,annotationCanvasMap:C,l10n:S,page:j,viewport:Z}){W(this,Kt);W(this,X);W(this,jt,null);W(this,Ot,null);W(this,qt,new Map);this.div=d,rt(this,jt,a),rt(this,Ot,C),this.l10n=S,this.page=j,this.viewport=Z,this.zIndex=0,this.l10n||(this.l10n=ct.NullL10n)}async render(d){const{annotations:a}=d,C=this.div;(0,R.setLayerDimensions)(C,this.viewport);const S=new Map,j={data:null,layer:C,linkService:d.linkService,downloadManager:d.downloadManager,imageResourcesPath:d.imageResourcesPath||"",renderForms:d.renderForms!==!1,svgFactory:new R.DOMSVGFactory,annotationStorage:d.annotationStorage||new it.AnnotationStorage,enableScripting:d.enableScripting===!0,hasJSActions:d.hasJSActions,fieldObjects:d.fieldObjects,parent:this,elements:null};for(const Z of a){if(Z.noHTML)continue;const mt=Z.annotationType===h.AnnotationType.POPUP;if(mt){const Et=S.get(Z.id);if(!Et)continue;j.elements=Et}else{const{width:Et,height:Lt}=U(Z.rect);if(Et<=0||Lt<=0)continue}j.data=Z;const xt=w.create(j);if(!xt.isRenderable)continue;if(!mt&&Z.popupRef){const Et=S.get(Z.popupRef);Et?Et.push(xt):S.set(Z.popupRef,[xt])}xt.annotationEditorType>0&&t(this,qt).set(xt.data.id,xt);const kt=xt.render();Z.hidden&&(kt.style.visibility="hidden"),Q(this,Kt,vi).call(this,kt,Z.id)}Q(this,X,Ve).call(this),await this.l10n.translate(C)}update({viewport:d}){const a=this.div;this.viewport=d,(0,R.setLayerDimensions)(a,{rotation:d.rotation}),Q(this,X,Ve).call(this),a.hidden=!1}getEditableAnnotations(){return Array.from(t(this,qt).values())}getEditableAnnotation(d){return t(this,qt).get(d)}}jt=new WeakMap,Ot=new WeakMap,qt=new WeakMap,Kt=new WeakSet,vi=function(d,a){var S;const C=d.firstChild||d;C.id=`${R.AnnotationPrefix}${a}`,this.div.append(d),(S=t(this,jt))==null||S.moveElementInDOM(this.div,d,C,!1)},X=new WeakSet,Ve=function(){if(!t(this,Ot))return;const d=this.div;for(const[a,C]of t(this,Ot)){const S=d.querySelector(`[data-annotation-id="${a}"]`);if(!S)continue;const{firstChild:j}=S;j?j.nodeName==="CANVAS"?j.replaceWith(C):j.before(C):S.append(C)}t(this,Ot).clear()},u.AnnotationLayer=i},(bt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0;function nt(R){return Math.floor(Math.max(0,Math.min(1,R))*255).toString(16).padStart(2,"0")}class h{static CMYK_G([it,J,ct,B]){return["G",1-Math.min(1,.3*it+.59*ct+.11*J+B)]}static G_CMYK([it]){return["CMYK",0,0,0,1-it]}static G_RGB([it]){return["RGB",it,it,it]}static G_HTML([it]){const J=nt(it);return`#${J}${J}${J}`}static RGB_G([it,J,ct]){return["G",.3*it+.59*J+.11*ct]}static RGB_HTML([it,J,ct]){const B=nt(it),T=nt(J),p=nt(ct);return`#${B}${T}${p}`}static T_HTML(){return"#00000000"}static CMYK_RGB([it,J,ct,B]){return["RGB",1-Math.min(1,it+B),1-Math.min(1,ct+B),1-Math.min(1,J+B)]}static CMYK_HTML(it){const J=this.CMYK_RGB(it).slice(1);return this.RGB_HTML(J)}static RGB_CMYK([it,J,ct]){const B=1-it,T=1-J,p=1-ct,O=Math.min(B,T,p);return["CMYK",B,T,p,O]}}u.ColorConverters=h},(bt,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NullL10n=void 0,u.getL10nFallback=h;const nt={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xD7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xD7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing\u2026",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image"};nt.print_progress_percent="{{progress}}%";function h(J,ct){switch(J){case"find_match_count":J=`find_match_count[${ct.total===1?"one":"other"}]`;break;case"find_match_count_limit":J=`find_match_count_limit[${ct.limit===1?"one":"other"}]`;break}return nt[J]||""}function R(J,ct){return ct?J.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(B,T)=>T in ct?ct[T]:"{{"+T+"}}"):J}const it={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(J,ct=null,B=h(J,ct)){return R(B,ct)},async translate(J){}};u.NullL10n=it},(bt,u,nt)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var h=nt(25);class R{static setupStorage(J,ct,B,T,p){const O=T.getValue(ct,{value:null});switch(B.name){case"textarea":if(O.value!==null&&(J.textContent=O.value),p==="print")break;J.addEventListener("input",U=>{T.setValue(ct,{value:U.target.value})});break;case"input":if(B.attributes.type==="radio"||B.attributes.type==="checkbox"){if(O.value===B.attributes.xfaOn?J.setAttribute("checked",!0):O.value===B.attributes.xfaOff&&J.removeAttribute("checked"),p==="print")break;J.addEventListener("change",U=>{T.setValue(ct,{value:U.target.checked?U.target.getAttribute("xfaOn"):U.target.getAttribute("xfaOff")})})}else{if(O.value!==null&&J.setAttribute("value",O.value),p==="print")break;J.addEventListener("input",U=>{T.setValue(ct,{value:U.target.value})})}break;case"select":if(O.value!==null){J.setAttribute("value",O.value);for(const U of B.children)U.attributes.value===O.value?U.attributes.selected=!0:U.attributes.hasOwnProperty("selected")&&delete U.attributes.selected}J.addEventListener("input",U=>{const w=U.target.options,y=w.selectedIndex===-1?"":w[w.selectedIndex].value;T.setValue(ct,{value:y})});break}}static setAttributes({html:J,element:ct,storage:B=null,intent:T,linkService:p}){const{attributes:O}=ct,U=J instanceof HTMLAnchorElement;O.type==="radio"&&(O.name=`${O.name}-${T}`);for(const[w,y]of Object.entries(O))if(y!=null)switch(w){case"class":y.length&&J.setAttribute(w,y.join(" "));break;case"dataId":break;case"id":J.setAttribute("data-element-id",y);break;case"style":Object.assign(J.style,y);break;case"textContent":J.textContent=y;break;default:(!U||w!=="href"&&w!=="newWindow")&&J.setAttribute(w,y)}U&&p.addLinkAttributes(J,O.href,O.newWindow),B&&O.dataId&&this.setupStorage(J,O.dataId,ct,B)}static render(J){var v;const ct=J.annotationStorage,B=J.linkService,T=J.xfaHtml,p=J.intent||"display",O=document.createElement(T.name);T.attributes&&this.setAttributes({html:O,element:T,intent:p,linkService:B});const U=[[T,-1,O]],w=J.div;if(w.append(O),J.viewport){const f=`matrix(${J.viewport.transform.join(",")})`;w.style.transform=f}p!=="richText"&&w.setAttribute("class","xfaLayer xfaFont");const y=[];for(;U.length>0;){const[f,A,E]=U.at(-1);if(A+1===f.children.length){U.pop();continue}const k=f.children[++U.at(-1)[1]];if(k===null)continue;const{name:g}=k;if(g==="#text"){const o=document.createTextNode(k.value);y.push(o),E.append(o);continue}const n=(v=k==null?void 0:k.attributes)!=null&&v.xmlns?document.createElementNS(k.attributes.xmlns,g):document.createElement(g);if(E.append(n),k.attributes&&this.setAttributes({html:n,element:k,storage:ct,intent:p,linkService:B}),k.children&&k.children.length>0)U.push([k,-1,n]);else if(k.value){const o=document.createTextNode(k.value);h.XfaText.shouldBuildText(g)&&y.push(o),n.append(o)}}for(const f of w.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))f.setAttribute("readOnly",!0);return{textDivs:y}}static update(J){const ct=`matrix(${J.viewport.transform.join(",")})`;J.div.style.transform=ct,J.div.hidden=!1}}u.XfaLayer=R},(bt,u,nt)=>{var B,T,p,O,U,w,y,v,f,A,E,k,g,n,o,F,Si,s,Ei,r,Ci,L,wi,_,qe,D,Ti,$,$e,pt,Pi,I,xi,e,ki,N,Fi,H,Ri,Y,se,at,Ye,ft,ve,At,Se,Ht,ce,Nt,Ke,st,Ee,gt,Mi,Ft,Je,Wt,Di,Xt,Ii,Ut,Qe,V,Ce,wt,he;Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0;var h=nt(1),R=nt(4),it=nt(29),J=nt(5);const Ot=class extends R.AnnotationEditor{constructor(c){super({...c,name:"inkEditor"});W(this,F);W(this,s);W(this,r);W(this,L);W(this,_);W(this,D);W(this,$);W(this,pt);W(this,I);W(this,e);W(this,N);W(this,H);W(this,Y);W(this,at);W(this,ft);W(this,At);W(this,Ht);W(this,Nt);W(this,st);W(this,Xt);W(this,Ut);W(this,V);W(this,wt);W(this,B,0);W(this,T,0);W(this,p,this.canvasContextMenu.bind(this));W(this,O,this.canvasPointermove.bind(this));W(this,U,this.canvasPointerleave.bind(this));W(this,w,this.canvasPointerup.bind(this));W(this,y,this.canvasPointerdown.bind(this));W(this,v,new Path2D);W(this,f,!1);W(this,A,!1);W(this,E,!1);W(this,k,null);W(this,g,0);W(this,n,0);W(this,o,null);this.color=c.color||null,this.thickness=c.thickness||null,this.opacity=c.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(c){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(X=>[X,c.get(X)]))}static updateDefaultParams(c,X){switch(c){case h.AnnotationEditorParamsType.INK_THICKNESS:Ot._defaultThickness=X;break;case h.AnnotationEditorParamsType.INK_COLOR:Ot._defaultColor=X;break;case h.AnnotationEditorParamsType.INK_OPACITY:Ot._defaultOpacity=X/100;break}}updateParams(c,X){switch(c){case h.AnnotationEditorParamsType.INK_THICKNESS:Q(this,F,Si).call(this,X);break;case h.AnnotationEditorParamsType.INK_COLOR:Q(this,s,Ei).call(this,X);break;case h.AnnotationEditorParamsType.INK_OPACITY:Q(this,r,Ci).call(this,X);break}}static get defaultPropertiesToUpdate(){return[[h.AnnotationEditorParamsType.INK_THICKNESS,Ot._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,Ot._defaultColor||R.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ot._defaultOpacity*100)]]}get propertiesToUpdate(){var c;return[[h.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ot._defaultThickness],[h.AnnotationEditorParamsType.INK_COLOR,this.color||Ot._defaultColor||R.AnnotationEditor._defaultLineColor],[h.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*((c=this.opacity)!=null?c:Ot._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(Q(this,ft,ve).call(this),Q(this,At,Se).call(this)),this.isAttachedToDOM||(this.parent.add(this),Q(this,Ht,ce).call(this)),Q(this,wt,he).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,t(this,k).disconnect(),rt(this,k,null),super.remove())}setParent(c){!this.parent&&c?this._uiManager.removeShouldRescale(this):this.parent&&c===null&&this._uiManager.addShouldRescale(this),super.setParent(c)}onScaleChanging(){const[c,X]=this.parentDimensions,ut=this.width*c,ot=this.height*X;this.setDimensions(ut,ot)}enableEditMode(){t(this,f)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",t(this,y)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",t(this,y)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){t(this,f)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),rt(this,f,!0),this.div.classList.add("disabled"),Q(this,wt,he).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(c){super.focusin(c),this.enableEditMode()}canvasPointerdown(c){c.button!==0||!this.isInEditMode()||t(this,f)||(this.setInForeground(),c.preventDefault(),c.type!=="mouse"&&this.div.focus(),Q(this,D,Ti).call(this,c.offsetX,c.offsetY))}canvasContextMenu(c){c.preventDefault()}canvasPointermove(c){c.preventDefault(),Q(this,$,$e).call(this,c.offsetX,c.offsetY)}canvasPointerup(c){c.preventDefault(),Q(this,at,Ye).call(this,c)}canvasPointerleave(c){Q(this,at,Ye).call(this,c)}get isResizable(){return!this.isEmpty()&&t(this,f)}render(){if(this.div)return this.div;let c,X;this.width&&(c=this.x,X=this.y),super.render(),Ot._l10nPromise.get("editor_ink2_aria_label").then(C=>{var S;return(S=this.div)==null?void 0:S.setAttribute("aria-label",C)});const[ut,ot,d,a]=Q(this,L,wi).call(this);if(this.setAt(ut,ot,0,0),this.setDims(d,a),Q(this,ft,ve).call(this),this.width){const[C,S]=this.parentDimensions;this.setAspectRatio(this.width*C,this.height*S),this.setAt(c*C,X*S,this.width*C,this.height*S),rt(this,E,!0),Q(this,Ht,ce).call(this),this.setDims(this.width*C,this.height*S),Q(this,Y,se).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Q(this,At,Se).call(this),this.div}setDimensions(c,X){const ut=Math.round(c),ot=Math.round(X);if(t(this,g)===ut&&t(this,n)===ot)return;rt(this,g,ut),rt(this,n,ot),this.canvas.style.visibility="hidden";const[d,a]=this.parentDimensions;this.width=c/d,this.height=X/a,this.fixAndSetPosition(),t(this,f)&&Q(this,Nt,Ke).call(this,c,X),Q(this,Ht,ce).call(this),Q(this,Y,se).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(c,X,ut){var Lt,Tt,Pt;if(c instanceof it.InkAnnotationElement)return null;const ot=super.deserialize(c,X,ut);ot.thickness=c.thickness,ot.color=h.Util.makeHexColor(...c.color),ot.opacity=c.opacity;const[d,a]=ot.pageDimensions,C=ot.width*d,S=ot.height*a,j=ot.parentScale,Z=c.thickness/2;rt(ot,f,!0),rt(ot,g,Math.round(C)),rt(ot,n,Math.round(S));const{paths:mt,rect:xt,rotation:kt}=c;for(let{bezier:Mt}of mt){Mt=Q(Lt=Ot,Wt,Di).call(Lt,Mt,xt,kt);const Bt=[];ot.paths.push(Bt);let Gt=j*(Mt[0]-Z),Vt=j*(Mt[1]-Z);for(let $t=2,Qt=Mt.length;$t<Qt;$t+=6){const te=j*(Mt[$t]-Z),Zt=j*(Mt[$t+1]-Z),ne=j*(Mt[$t+2]-Z),Bi=j*(Mt[$t+3]-Z),ei=j*(Mt[$t+4]-Z),ii=j*(Mt[$t+5]-Z);Bt.push([[Gt,Vt],[te,Zt],[ne,Bi],[ei,ii]]),Gt=ei,Vt=ii}const Jt=Q(this,gt,Mi).call(this,Bt);ot.bezierPath2D.push(Jt)}const Et=Q(Tt=ot,Ut,Qe).call(Tt);return rt(ot,T,Math.max(R.AnnotationEditor.MIN_SIZE,Et[2]-Et[0])),rt(ot,B,Math.max(R.AnnotationEditor.MIN_SIZE,Et[3]-Et[1])),Q(Pt=ot,Nt,Ke).call(Pt,C,S),ot}serialize(){if(this.isEmpty())return null;const c=this.getRect(0,0),X=R.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:h.AnnotationEditorType.INK,color:X,thickness:this.thickness,opacity:this.opacity,paths:Q(this,Xt,Ii).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,c),pageIndex:this.pageIndex,rect:c,rotation:this.rotation}}};let ct=Ot;B=new WeakMap,T=new WeakMap,p=new WeakMap,O=new WeakMap,U=new WeakMap,w=new WeakMap,y=new WeakMap,v=new WeakMap,f=new WeakMap,A=new WeakMap,E=new WeakMap,k=new WeakMap,g=new WeakMap,n=new WeakMap,o=new WeakMap,F=new WeakSet,Si=function(c){const X=this.thickness;this.addCommands({cmd:()=>{this.thickness=c,Q(this,wt,he).call(this)},undo:()=>{this.thickness=X,Q(this,wt,he).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},s=new WeakSet,Ei=function(c){const X=this.color;this.addCommands({cmd:()=>{this.color=c,Q(this,Y,se).call(this)},undo:()=>{this.color=X,Q(this,Y,se).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},r=new WeakSet,Ci=function(c){c/=100;const X=this.opacity;this.addCommands({cmd:()=>{this.opacity=c,Q(this,Y,se).call(this)},undo:()=>{this.opacity=X,Q(this,Y,se).call(this)},mustExec:!0,type:h.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},L=new WeakSet,wi=function(){const{parentRotation:c,parentDimensions:[X,ut]}=this;switch(c){case 90:return[0,ut,ut,X];case 180:return[X,ut,X,ut];case 270:return[X,0,ut,X];default:return[0,0,X,ut]}},_=new WeakSet,qe=function(){const{ctx:c,color:X,opacity:ut,thickness:ot,parentScale:d,scaleFactor:a}=this;c.lineWidth=ot*d/a,c.lineCap="round",c.lineJoin="round",c.miterLimit=10,c.strokeStyle=`${X}${(0,J.opacityToHex)(ut)}`},D=new WeakSet,Ti=function(c,X){var ut;this.canvas.addEventListener("contextmenu",t(this,p)),this.canvas.addEventListener("pointerleave",t(this,U)),this.canvas.addEventListener("pointermove",t(this,O)),this.canvas.addEventListener("pointerup",t(this,w)),this.canvas.removeEventListener("pointerdown",t(this,y)),this.isEditing=!0,t(this,E)||(rt(this,E,!0),Q(this,Ht,ce).call(this),this.thickness||(this.thickness=Ot._defaultThickness),this.color||(this.color=Ot._defaultColor||R.AnnotationEditor._defaultLineColor),(ut=this.opacity)!=null||(this.opacity=Ot._defaultOpacity)),this.currentPath.push([c,X]),rt(this,A,!1),Q(this,_,qe).call(this),rt(this,o,()=>{Q(this,e,ki).call(this),t(this,o)&&window.requestAnimationFrame(t(this,o))}),window.requestAnimationFrame(t(this,o))},$=new WeakSet,$e=function(c,X){const[ut,ot]=this.currentPath.at(-1);if(this.currentPath.length>1&&c===ut&&X===ot)return;const d=this.currentPath;let a=t(this,v);if(d.push([c,X]),rt(this,A,!0),d.length<=2){a.moveTo(...d[0]),a.lineTo(c,X);return}d.length===3&&(rt(this,v,a=new Path2D),a.moveTo(...d[0])),Q(this,N,Fi).call(this,a,...d.at(-3),...d.at(-2),c,X)},pt=new WeakSet,Pi=function(){if(this.currentPath.length===0)return;const c=this.currentPath.at(-1);t(this,v).lineTo(...c)},I=new WeakSet,xi=function(c,X){rt(this,o,null),c=Math.min(Math.max(c,0),this.canvas.width),X=Math.min(Math.max(X,0),this.canvas.height),Q(this,$,$e).call(this,c,X),Q(this,pt,Pi).call(this);let ut;if(this.currentPath.length!==1)ut=Q(this,H,Ri).call(this);else{const S=[c,X];ut=[[S,S.slice(),S.slice(),S]]}const ot=t(this,v),d=this.currentPath;this.currentPath=[],rt(this,v,new Path2D);const a=()=>{this.allRawPaths.push(d),this.paths.push(ut),this.bezierPath2D.push(ot),this.rebuild()},C=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Q(this,ft,ve).call(this),Q(this,At,Se).call(this)),Q(this,wt,he).call(this))};this.addCommands({cmd:a,undo:C,mustExec:!0})},e=new WeakSet,ki=function(){if(!t(this,A))return;rt(this,A,!1);const c=Math.ceil(this.thickness*this.parentScale),X=this.currentPath.slice(-3),ut=X.map(a=>a[0]),ot=X.map(a=>a[1]);Math.min(...ut)-c,Math.max(...ut)+c,Math.min(...ot)-c,Math.max(...ot)+c;const{ctx:d}=this;d.save(),d.clearRect(0,0,this.canvas.width,this.canvas.height);for(const a of this.bezierPath2D)d.stroke(a);d.stroke(t(this,v)),d.restore()},N=new WeakSet,Fi=function(c,X,ut,ot,d,a,C){const S=(X+ot)/2,j=(ut+d)/2,Z=(ot+a)/2,mt=(d+C)/2;c.bezierCurveTo(S+2*(ot-S)/3,j+2*(d-j)/3,Z+2*(ot-Z)/3,mt+2*(d-mt)/3,Z,mt)},H=new WeakSet,Ri=function(){const c=this.currentPath;if(c.length<=2)return[[c[0],c[0],c.at(-1),c.at(-1)]];const X=[];let ut,[ot,d]=c[0];for(ut=1;ut<c.length-2;ut++){const[xt,kt]=c[ut],[Et,Lt]=c[ut+1],Tt=(xt+Et)/2,Pt=(kt+Lt)/2,Mt=[ot+2*(xt-ot)/3,d+2*(kt-d)/3],Bt=[Tt+2*(xt-Tt)/3,Pt+2*(kt-Pt)/3];X.push([[ot,d],Mt,Bt,[Tt,Pt]]),[ot,d]=[Tt,Pt]}const[a,C]=c[ut],[S,j]=c[ut+1],Z=[ot+2*(a-ot)/3,d+2*(C-d)/3],mt=[S+2*(a-S)/3,j+2*(C-j)/3];return X.push([[ot,d],Z,mt,[S,j]]),X},Y=new WeakSet,se=function(){if(this.isEmpty()){Q(this,st,Ee).call(this);return}Q(this,_,qe).call(this);const{canvas:c,ctx:X}=this;X.setTransform(1,0,0,1,0,0),X.clearRect(0,0,c.width,c.height),Q(this,st,Ee).call(this);for(const ut of this.bezierPath2D)X.stroke(ut)},at=new WeakSet,Ye=function(c){this.canvas.removeEventListener("pointerleave",t(this,U)),this.canvas.removeEventListener("pointermove",t(this,O)),this.canvas.removeEventListener("pointerup",t(this,w)),this.canvas.addEventListener("pointerdown",t(this,y)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",t(this,p))},10),Q(this,I,xi).call(this,c.offsetX,c.offsetY),this.addToAnnotationStorage(),this.setInBackground()},ft=new WeakSet,ve=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ot._l10nPromise.get("editor_ink_canvas_aria_label").then(c=>{var X;return(X=this.canvas)==null?void 0:X.setAttribute("aria-label",c)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},At=new WeakSet,Se=function(){rt(this,k,new ResizeObserver(c=>{const X=c[0].contentRect;X.width&&X.height&&this.setDimensions(X.width,X.height)})),t(this,k).observe(this.div)},Ht=new WeakSet,ce=function(){if(!t(this,E))return;const[c,X]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*c),this.canvas.height=Math.ceil(this.height*X),Q(this,st,Ee).call(this)},Nt=new WeakSet,Ke=function(c,X){const ut=Q(this,V,Ce).call(this),ot=(c-ut)/t(this,T),d=(X-ut)/t(this,B);this.scaleFactor=Math.min(ot,d)},st=new WeakSet,Ee=function(){const c=Q(this,V,Ce).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+c,this.translationY*this.scaleFactor+c)},gt=new WeakSet,Mi=function(c){const X=new Path2D;for(let ut=0,ot=c.length;ut<ot;ut++){const[d,a,C,S]=c[ut];ut===0&&X.moveTo(...d),X.bezierCurveTo(a[0],a[1],C[0],C[1],S[0],S[1])}return X},Ft=new WeakSet,Je=function(c,X,ut){const[ot,d,a,C]=X;switch(ut){case 0:for(let S=0,j=c.length;S<j;S+=2)c[S]+=ot,c[S+1]=C-c[S+1];break;case 90:for(let S=0,j=c.length;S<j;S+=2){const Z=c[S];c[S]=c[S+1]+ot,c[S+1]=Z+d}break;case 180:for(let S=0,j=c.length;S<j;S+=2)c[S]=a-c[S],c[S+1]+=d;break;case 270:for(let S=0,j=c.length;S<j;S+=2){const Z=c[S];c[S]=a-c[S+1],c[S+1]=C-Z}break;default:throw new Error("Invalid rotation")}return c},Wt=new WeakSet,Di=function(c,X,ut){const[ot,d,a,C]=X;switch(ut){case 0:for(let S=0,j=c.length;S<j;S+=2)c[S]-=ot,c[S+1]=C-c[S+1];break;case 90:for(let S=0,j=c.length;S<j;S+=2){const Z=c[S];c[S]=c[S+1]-d,c[S+1]=Z-ot}break;case 180:for(let S=0,j=c.length;S<j;S+=2)c[S]=a-c[S],c[S+1]-=d;break;case 270:for(let S=0,j=c.length;S<j;S+=2){const Z=c[S];c[S]=C-c[S+1],c[S+1]=a-Z}break;default:throw new Error("Invalid rotation")}return c},Xt=new WeakSet,Ii=function(c,X,ut,ot){var j,Z;const d=[],a=this.thickness/2,C=c*X+a,S=c*ut+a;for(const mt of this.paths){const xt=[],kt=[];for(let Et=0,Lt=mt.length;Et<Lt;Et++){const[Tt,Pt,Mt,Bt]=mt[Et],Gt=c*Tt[0]+C,Vt=c*Tt[1]+S,Jt=c*Pt[0]+C,$t=c*Pt[1]+S,Qt=c*Mt[0]+C,te=c*Mt[1]+S,Zt=c*Bt[0]+C,ne=c*Bt[1]+S;Et===0&&(xt.push(Gt,Vt),kt.push(Gt,Vt)),xt.push(Jt,$t,Qt,te,Zt,ne),kt.push(Jt,$t),Et===Lt-1&&kt.push(Zt,ne)}d.push({bezier:Q(j=Ot,Ft,Je).call(j,xt,ot,this.rotation),points:Q(Z=Ot,Ft,Je).call(Z,kt,ot,this.rotation)})}return d},Ut=new WeakSet,Qe=function(){let c=1/0,X=-1/0,ut=1/0,ot=-1/0;for(const d of this.paths)for(const[a,C,S,j]of d){const Z=h.Util.bezierBoundingBox(...a,...C,...S,...j);c=Math.min(c,Z[0]),ut=Math.min(ut,Z[1]),X=Math.max(X,Z[2]),ot=Math.max(ot,Z[3])}return[c,ut,X,ot]},V=new WeakSet,Ce=function(){return t(this,f)?Math.ceil(this.thickness*this.parentScale):0},wt=new WeakSet,he=function(c=!1){if(this.isEmpty())return;if(!t(this,f)){Q(this,Y,se).call(this);return}const X=Q(this,Ut,Qe).call(this),ut=Q(this,V,Ce).call(this);rt(this,T,Math.max(R.AnnotationEditor.MIN_SIZE,X[2]-X[0])),rt(this,B,Math.max(R.AnnotationEditor.MIN_SIZE,X[3]-X[1]));const ot=Math.ceil(ut+t(this,T)*this.scaleFactor),d=Math.ceil(ut+t(this,B)*this.scaleFactor),[a,C]=this.parentDimensions;this.width=ot/a,this.height=d/C,this.setAspectRatio(ot,d);const S=this.translationX,j=this.translationY;this.translationX=-X[0],this.translationY=-X[1],Q(this,Ht,ce).call(this),Q(this,Y,se).call(this),rt(this,g,ot),rt(this,n,d),this.setDims(ot,d);const Z=c?ut/this.scaleFactor/2:0;this.translate(S-this.translationX-Z,j-this.translationY-Z)},W(ct,gt),W(ct,Ft),W(ct,Wt),Yt(ct,"_defaultColor",null),Yt(ct,"_defaultOpacity",1),Yt(ct,"_defaultThickness",1),Yt(ct,"_l10nPromise"),Yt(ct,"_type","ink"),u.InkEditor=ct},(bt,u,nt)=>{var B,T,p,O,U,w,y,v,f,Ze,E,me,g,Li,o,Oi,b,ti,l,we,M,Ni;Object.defineProperty(u,"__esModule",{value:!0}),u.StampEditor=void 0;var h=nt(4),R=nt(1),it=nt(6),J=nt(29);class ct extends h.AnnotationEditor{constructor(G){super({...G,name:"stampEditor"});W(this,f);W(this,E);W(this,g);W(this,o);W(this,b);W(this,l);W(this,M);W(this,B,null);W(this,T,null);W(this,p,null);W(this,O,null);W(this,U,null);W(this,w,null);W(this,y,null);W(this,v,!1);rt(this,O,G.bitmapUrl)}remove(){var G,D;t(this,T)&&(rt(this,B,null),this._uiManager.imageManager.deleteId(t(this,T)),(G=t(this,U))==null||G.remove(),rt(this,U,null),(D=t(this,w))==null||D.disconnect(),rt(this,w,null)),super.remove()}rebuild(){super.rebuild(),this.div!==null&&(t(this,T)&&Q(this,f,Ze).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this.div.draggable=!0,this.parent.addUndoableEditor(this),this.div.focus()}isEmpty(){return t(this,p)===null&&t(this,B)===null&&t(this,O)===null}get isResizable(){return!0}render(){if(this.div)return this.div;let G,D;if(this.width&&(G=this.x,D=this.y),super.render(),t(this,B)?Q(this,E,me).call(this):(this.div.classList.add("loading"),Q(this,f,Ze).call(this)),this.width){const[x,$]=this.parentDimensions;this.setAt(G*x,D*$,this.width*x,this.height*$)}return this.div}static deserialize(G,D,x){if(G instanceof J.StampAnnotationElement)return null;const $=super.deserialize(G,D,x),{rect:et,bitmapUrl:pt,bitmapId:_t,isSvg:I}=G;_t&&x.imageManager.isValidId(_t)?rt($,T,_t):rt($,O,pt),rt($,v,I);const[i,e]=$.pageDimensions;return $.width=(et[2]-et[0])/i,$.height=(et[3]-et[1])/e,$}serialize(G=!1,D=null){if(this.isEmpty())return null;const x={annotationType:R.AnnotationEditorType.STAMP,bitmapId:t(this,T),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:t(this,v)};if(G)return x.bitmapUrl=Q(this,l,we).call(this,!0),x;if(D===null)return x;D.stamps||(D.stamps=new Map);const $=t(this,v)?(x.rect[2]-x.rect[0])*(x.rect[3]-x.rect[1]):null;if(!D.stamps.has(t(this,T)))D.stamps.set(t(this,T),{area:$,serialized:x}),x.bitmap=Q(this,l,we).call(this,!1);else if(t(this,v)){const et=D.stamps.get(t(this,T));$>et.area&&(et.area=$,et.serialized.bitmap.close(),et.serialized.bitmap=Q(this,l,we).call(this,!1))}return x}}B=new WeakMap,T=new WeakMap,p=new WeakMap,O=new WeakMap,U=new WeakMap,w=new WeakMap,y=new WeakMap,v=new WeakMap,f=new WeakSet,Ze=function(){if(t(this,T)){this._uiManager.imageManager.getFromId(t(this,T)).then(D=>{if(!D){this.remove();return}rt(this,B,D.bitmap),Q(this,E,me).call(this)});return}if(t(this,O)){const D=t(this,O);rt(this,O,null),rt(this,p,this._uiManager.imageManager.getFromUrl(D).then(x=>{if(rt(this,p,null),!x){this.remove();return}({bitmap:ie(this,B)._,id:ie(this,T)._,isSvg:ie(this,v)._}=x),Q(this,E,me).call(this)}));return}const G=document.createElement("input");G.type="file",G.accept="image/*",rt(this,p,new Promise(D=>{G.addEventListener("change",async()=>{if(rt(this,p,null),!G.files||G.files.length===0)this.remove();else{const x=await this._uiManager.imageManager.getFromFile(G.files[0]);if(!x){this.remove();return}({bitmap:ie(this,B)._,id:ie(this,T)._,isSvg:ie(this,v)._}=x),Q(this,E,me).call(this)}D()}),G.addEventListener("cancel",()=>{rt(this,p,null),this.remove(),D()})})),G.click()},E=new WeakSet,me=function(){const{div:G}=this;let{width:D,height:x}=t(this,B);const[$,et]=this.pageDimensions,pt=.75;if(this.width)D=this.width*$,x=this.height*et;else if(D>pt*$||x>pt*et){const e=Math.min(pt*$/D,pt*et/x);D*=e,x*=e}const[_t,I]=this.parentDimensions;this.setDims(D*_t/$,x*I/et);const i=rt(this,U,document.createElement("canvas"));G.append(i),Q(this,b,ti).call(this,D,x),Q(this,M,Ni).call(this),G.classList.remove("loading")},g=new WeakSet,Li=function(G,D){const[x,$]=this.parentDimensions;this.width=G/x,this.height=D/$,this.setDims(G,D),this.fixAndSetPosition(),t(this,y)!==null&&clearTimeout(t(this,y)),rt(this,y,setTimeout(()=>{rt(this,y,null),Q(this,b,ti).call(this,G,D)},200))},o=new WeakSet,Oi=function(G,D){const{width:x,height:$}=t(this,B);let et=x,pt=$,_t=t(this,B);for(;et>2*G||pt>2*D;){const I=et,i=pt;et>2*G&&(et=et>=16384?Math.floor(et/2)-1:Math.ceil(et/2)),pt>2*D&&(pt=pt>=16384?Math.floor(pt/2)-1:Math.ceil(pt/2));const e=new OffscreenCanvas(et,pt);e.getContext("2d").drawImage(_t,0,0,I,i,0,0,et,pt),_t=e.transferToImageBitmap()}return _t},b=new WeakSet,ti=function(G,D){const x=t(this,U);if(!x||x.width===G&&x.height===D)return;x.width=G,x.height=D;const $=t(this,v)?t(this,B):Q(this,o,Oi).call(this,G,D),et=x.getContext("2d");et.filter=this._uiManager.hcmFilter,et.drawImage($,0,0,$.width,$.height,0,0,G,D)},l=new WeakSet,we=function(G){if(G){if(t(this,v)){const $=this._uiManager.imageManager.getSvgUrl(t(this,T));if($)return $}const D=document.createElement("canvas");return{width:D.width,height:D.height}=t(this,B),D.getContext("2d").drawImage(t(this,B),0,0),D.toDataURL()}if(t(this,v)){const[D,x]=this.pageDimensions,$=Math.round(this.width*D*it.PixelsPerInch.PDF_TO_CSS_UNITS),et=Math.round(this.height*x*it.PixelsPerInch.PDF_TO_CSS_UNITS),pt=new OffscreenCanvas($,et);return pt.getContext("2d").drawImage(t(this,B),0,0,t(this,B).width,t(this,B).height,0,0,$,et),pt.transferToImageBitmap()}return structuredClone(t(this,B))},M=new WeakSet,Ni=function(){rt(this,w,new ResizeObserver(G=>{const D=G[0].contentRect;D.width&&D.height&&Q(this,g,Li).call(this,D.width,D.height)})),t(this,w).observe(this.div)},Yt(ct,"_type","stamp"),u.StampEditor=ct}],__webpack_module_cache__={};function __w_pdfjs_require__(bt){var u=__webpack_module_cache__[bt];if(u!==void 0)return u.exports;var nt=__webpack_module_cache__[bt]={exports:{}};return __webpack_modules__[bt](nt,nt.exports,__w_pdfjs_require__),nt.exports}var __webpack_exports__={};return(()=>{var bt=__webpack_exports__;Object.defineProperty(bt,"__esModule",{value:!0}),Object.defineProperty(bt,"AbortException",{enumerable:!0,get:function(){return u.AbortException}}),Object.defineProperty(bt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return it.AnnotationEditorLayer}}),Object.defineProperty(bt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(bt,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(bt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return J.AnnotationEditorUIManager}}),Object.defineProperty(bt,"AnnotationLayer",{enumerable:!0,get:function(){return ct.AnnotationLayer}}),Object.defineProperty(bt,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(bt,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(bt,"FeatureTest",{enumerable:!0,get:function(){return u.FeatureTest}}),Object.defineProperty(bt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return B.GlobalWorkerOptions}}),Object.defineProperty(bt,"ImageKind",{enumerable:!0,get:function(){return u.ImageKind}}),Object.defineProperty(bt,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(bt,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(bt,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(bt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return nt.PDFDataRangeTransport}}),Object.defineProperty(bt,"PDFDateString",{enumerable:!0,get:function(){return h.PDFDateString}}),Object.defineProperty(bt,"PDFWorker",{enumerable:!0,get:function(){return nt.PDFWorker}}),Object.defineProperty(bt,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(bt,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(bt,"PixelsPerInch",{enumerable:!0,get:function(){return h.PixelsPerInch}}),Object.defineProperty(bt,"PromiseCapability",{enumerable:!0,get:function(){return u.PromiseCapability}}),Object.defineProperty(bt,"RenderingCancelledException",{enumerable:!0,get:function(){return h.RenderingCancelledException}}),Object.defineProperty(bt,"SVGGraphics",{enumerable:!0,get:function(){return nt.SVGGraphics}}),Object.defineProperty(bt,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(bt,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(bt,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(bt,"XfaLayer",{enumerable:!0,get:function(){return T.XfaLayer}}),Object.defineProperty(bt,"build",{enumerable:!0,get:function(){return nt.build}}),Object.defineProperty(bt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(bt,"getDocument",{enumerable:!0,get:function(){return nt.getDocument}}),Object.defineProperty(bt,"getFilenameFromUrl",{enumerable:!0,get:function(){return h.getFilenameFromUrl}}),Object.defineProperty(bt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return h.getPdfFilenameFromUrl}}),Object.defineProperty(bt,"getXfaPageViewport",{enumerable:!0,get:function(){return h.getXfaPageViewport}}),Object.defineProperty(bt,"isDataScheme",{enumerable:!0,get:function(){return h.isDataScheme}}),Object.defineProperty(bt,"isPdfFile",{enumerable:!0,get:function(){return h.isPdfFile}}),Object.defineProperty(bt,"loadScript",{enumerable:!0,get:function(){return h.loadScript}}),Object.defineProperty(bt,"normalizeUnicode",{enumerable:!0,get:function(){return u.normalizeUnicode}}),Object.defineProperty(bt,"renderTextLayer",{enumerable:!0,get:function(){return R.renderTextLayer}}),Object.defineProperty(bt,"setLayerDimensions",{enumerable:!0,get:function(){return h.setLayerDimensions}}),Object.defineProperty(bt,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(bt,"updateTextLayer",{enumerable:!0,get:function(){return R.updateTextLayer}}),Object.defineProperty(bt,"version",{enumerable:!0,get:function(){return nt.version}});var u=__w_pdfjs_require__(1),nt=__w_pdfjs_require__(2),h=__w_pdfjs_require__(6),R=__w_pdfjs_require__(26),it=__w_pdfjs_require__(27),J=__w_pdfjs_require__(5),ct=__w_pdfjs_require__(29),B=__w_pdfjs_require__(14),T=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);const pdfjs=getDefaultExportFromCjs(pdf.exports),table_vue_vue_type_style_index_0_scoped_36be4354_lang="";function getPdfPath(bt){return`/pdf/${bt}`}const _sfc_main={setup(){const bt=ref([{name:"\u8001\u65E9\u6709\u4E9B\u68B3\u5934\u5A18\u4E5F\u4F1A\u7ED9\u4EBA\u7EDE\u8138.pdf"}]),u=ref(null),nt=ref(null),h=ref(!1),R=async B=>{const T=getPdfPath(B),p=pdfjs.getDocument(T);try{const O=await p.promise;it(O),h.value=!0}catch(O){console.error("Error loading PDF:",O)}},it=async B=>{const T=nt.value;for(let p=1;p<=B.numPages;p++)try{const O=await B.getPage(p),U=document.createElement("canvas"),w=1.5,y=O.getViewport({scale:w}),v=U.getContext("2d");U.height=y.height,U.width=y.width;const f={canvasContext:v,viewport:y};await O.render(f).promise,T.appendChild(U)}catch(O){console.error("Error rendering PDF page:",O)}};return{pdfList:bt,viewPDF:R,pdfContainer:u,pdfViewer:nt,showPDF:h,closePDF:()=>{for(h.value=!1;nt.value.firstChild;)nt.value.removeChild(nt.value.firstChild)},downloadPDF:B=>{const T=getPdfPath(B),p=document.createElement("a");p.href=T,p.download=B,p.target="_blank",p.click()},pdfViewer:nt}}},_hoisted_1={class:"page"},_hoisted_2={class:"down"},_hoisted_3=["onClick"],_hoisted_4=["onClick"],_hoisted_5={key:0,ref:"pdfContainer",class:"pdf-container"},_hoisted_6={class:"pdf-toolbar"},_hoisted_7={ref:"pdfViewer"};function _sfc_render(bt,u,nt,h,R,it){const J=__unplugin_components_0,ct=ElTableColumn,B=ElTable;return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(J),createBaseVNode("div",_hoisted_2,[createVNode(B,{data:h.pdfList,size:"small",stripe:"",height:"80%",style:{width:"100%"}},{default:withCtx(()=>[createVNode(ct,{align:"center",prop:"name","show-overflow-tooltip":"",label:"\u6587\u4EF6"}),createVNode(ct,{label:"\u64CD\u4F5C"},{default:withCtx(T=>[createBaseVNode("a",{onClick:p=>h.viewPDF(T.row.name)},"\u67E5\u770B",8,_hoisted_3),createBaseVNode("a",{onClick:p=>h.downloadPDF(T.row.name)},"\u4E0B\u8F7D",8,_hoisted_4)]),_:1})]),_:1},8,["data"]),h.showPDF?(openBlock(),createElementBlock("div",_hoisted_5,[createBaseVNode("div",_hoisted_6,[createBaseVNode("button",{onClick:u[0]||(u[0]=(...T)=>h.closePDF&&h.closePDF(...T))},"\u5173\u95ED")]),createBaseVNode("div",_hoisted_7,null,512)],512)):createCommentVNode("",!0)])])}const table=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-36be4354"]]);export{table as default};
